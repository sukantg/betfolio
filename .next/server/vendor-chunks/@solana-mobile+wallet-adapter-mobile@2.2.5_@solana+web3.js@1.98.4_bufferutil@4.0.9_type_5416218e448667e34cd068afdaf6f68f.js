"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@solana-mobile+wallet-adapter-mobile@2.2.5_@solana+web3.js@1.98.4_bufferutil@4.0.9_type_5416218e448667e34cd068afdaf6f68f";
exports.ids = ["vendor-chunks/@solana-mobile+wallet-adapter-mobile@2.2.5_@solana+web3.js@1.98.4_bufferutil@4.0.9_type_5416218e448667e34cd068afdaf6f68f"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@solana-mobile+wallet-adapter-mobile@2.2.5_@solana+web3.js@1.98.4_bufferutil@4.0.9_type_5416218e448667e34cd068afdaf6f68f/node_modules/@solana-mobile/wallet-adapter-mobile/lib/esm/index.js":
/*!************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@solana-mobile+wallet-adapter-mobile@2.2.5_@solana+web3.js@1.98.4_bufferutil@4.0.9_type_5416218e448667e34cd068afdaf6f68f/node_modules/@solana-mobile/wallet-adapter-mobile/lib/esm/index.js ***!
  \************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LocalSolanaMobileWalletAdapter: () => (/* binding */ LocalSolanaMobileWalletAdapter),\n/* harmony export */   RemoteSolanaMobileWalletAdapter: () => (/* binding */ RemoteSolanaMobileWalletAdapter),\n/* harmony export */   SolanaMobileWalletAdapter: () => (/* binding */ SolanaMobileWalletAdapter),\n/* harmony export */   SolanaMobileWalletAdapterRemoteWalletName: () => (/* binding */ SolanaMobileWalletAdapterRemoteWalletName),\n/* harmony export */   SolanaMobileWalletAdapterWalletName: () => (/* binding */ SolanaMobileWalletAdapterWalletName),\n/* harmony export */   createDefaultAddressSelector: () => (/* binding */ createDefaultAddressSelector),\n/* harmony export */   createDefaultAuthorizationResultCache: () => (/* binding */ createDefaultAuthorizationResultCache),\n/* harmony export */   createDefaultWalletNotFoundHandler: () => (/* binding */ createDefaultWalletNotFoundHandler)\n/* harmony export */ });\n/* harmony import */ var _solana_wallet_adapter_base__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @solana/wallet-adapter-base */ \"(ssr)/./node_modules/.pnpm/@solana+wallet-adapter-base@0.9.27_@solana+web3.js@1.98.4_bufferutil@4.0.9_typescript@5.9.3_utf-8-validate@5.0.10_/node_modules/@solana/wallet-adapter-base/lib/esm/signer.js\");\n/* harmony import */ var _solana_wallet_adapter_base__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @solana/wallet-adapter-base */ \"(ssr)/./node_modules/.pnpm/@solana+wallet-adapter-base@0.9.27_@solana+web3.js@1.98.4_bufferutil@4.0.9_typescript@5.9.3_utf-8-validate@5.0.10_/node_modules/@solana/wallet-adapter-base/lib/esm/adapter.js\");\n/* harmony import */ var _solana_wallet_adapter_base__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @solana/wallet-adapter-base */ \"(ssr)/./node_modules/.pnpm/@solana+wallet-adapter-base@0.9.27_@solana+web3.js@1.98.4_bufferutil@4.0.9_typescript@5.9.3_utf-8-validate@5.0.10_/node_modules/@solana/wallet-adapter-base/lib/esm/errors.js\");\n/* harmony import */ var _solana_web3_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @solana/web3.js */ \"(ssr)/./node_modules/.pnpm/@solana+web3.js@1.98.4_bufferutil@4.0.9_typescript@5.9.3_utf-8-validate@5.0.10/node_modules/@solana/web3.js/lib/index.esm.js\");\n/* harmony import */ var _solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @solana/wallet-standard-features */ \"(ssr)/./node_modules/.pnpm/@solana+wallet-standard-features@1.3.0/node_modules/@solana/wallet-standard-features/lib/esm/signIn.js\");\n/* harmony import */ var _solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @solana/wallet-standard-features */ \"(ssr)/./node_modules/.pnpm/@solana+wallet-standard-features@1.3.0/node_modules/@solana/wallet-standard-features/lib/esm/signMessage.js\");\n/* harmony import */ var _solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @solana/wallet-standard-features */ \"(ssr)/./node_modules/.pnpm/@solana+wallet-standard-features@1.3.0/node_modules/@solana/wallet-standard-features/lib/esm/signAndSendTransaction.js\");\n/* harmony import */ var _solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @solana/wallet-standard-features */ \"(ssr)/./node_modules/.pnpm/@solana+wallet-standard-features@1.3.0/node_modules/@solana/wallet-standard-features/lib/esm/signTransaction.js\");\n/* harmony import */ var _solana_mobile_wallet_standard_mobile__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @solana-mobile/wallet-standard-mobile */ \"(ssr)/./node_modules/.pnpm/@solana-mobile+wallet-standard-mobile@0.4.3_@solana+wallet-adapter-base@0.9.27_@solana+_2ad14e9b2dc4e821dfae321f0eb6a4a9/node_modules/@solana-mobile/wallet-standard-mobile/lib/esm/index.js\");\n\n\n\n\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nfunction __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\n\n( false) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\n( false) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\n\n/** Name of the feature. */\nconst StandardConnect = 'standard:connect';\n\n/** Name of the feature. */\nconst StandardDisconnect = 'standard:disconnect';\n\n/** Name of the feature. */\nconst StandardEvents = 'standard:events';\n\n( false) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\n( false) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\n\n( false) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\n( false) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\n\nfunction fromUint8Array(byteArray) {\n    return window.btoa(String.fromCharCode.call(null, ...byteArray));\n}\n\nfunction getIsSupported() {\n    return (typeof window !== 'undefined' &&\n        window.isSecureContext &&\n        typeof document !== 'undefined' &&\n        /android/i.test(navigator.userAgent));\n}\n\nvar _BaseSolanaMobileWalletAdapter_instances, _BaseSolanaMobileWalletAdapter_wallet, _BaseSolanaMobileWalletAdapter_connecting, _BaseSolanaMobileWalletAdapter_readyState, _BaseSolanaMobileWalletAdapter_accountSelector, _BaseSolanaMobileWalletAdapter_selectedAccount, _BaseSolanaMobileWalletAdapter_publicKey, _BaseSolanaMobileWalletAdapter_handleChangeEvent, _BaseSolanaMobileWalletAdapter_connect, _BaseSolanaMobileWalletAdapter_declareWalletAsInstalled, _BaseSolanaMobileWalletAdapter_assertIsAuthorized, _BaseSolanaMobileWalletAdapter_performSignTransactions, _BaseSolanaMobileWalletAdapter_runWithGuard;\nconst SolanaMobileWalletAdapterWalletName = _solana_mobile_wallet_standard_mobile__WEBPACK_IMPORTED_MODULE_1__.SolanaMobileWalletAdapterWalletName;\nconst SolanaMobileWalletAdapterRemoteWalletName = _solana_mobile_wallet_standard_mobile__WEBPACK_IMPORTED_MODULE_1__.SolanaMobileWalletAdapterRemoteWalletName;\nconst SIGNATURE_LENGTH_IN_BYTES = 64;\nfunction isVersionedTransaction(transaction) {\n    return 'version' in transaction;\n}\nfunction chainOrClusterToChainId(chain) {\n    switch (chain) {\n        case 'mainnet-beta':\n            return 'solana:mainnet';\n        case 'testnet':\n            return 'solana:testnet';\n        case 'devnet':\n            return 'solana:devnet';\n        default:\n            return chain;\n    }\n}\nclass BaseSolanaMobileWalletAdapter extends _solana_wallet_adapter_base__WEBPACK_IMPORTED_MODULE_2__.BaseSignInMessageSignerWalletAdapter {\n    constructor(wallet, config) {\n        super();\n        _BaseSolanaMobileWalletAdapter_instances.add(this);\n        this.supportedTransactionVersions = new Set(\n        // FIXME(#244): We can't actually know what versions are supported until we know which wallet we're talking to.\n        ['legacy', 0]);\n        _BaseSolanaMobileWalletAdapter_wallet.set(this, void 0);\n        _BaseSolanaMobileWalletAdapter_connecting.set(this, false);\n        _BaseSolanaMobileWalletAdapter_readyState.set(this, getIsSupported() ? _solana_wallet_adapter_base__WEBPACK_IMPORTED_MODULE_3__.WalletReadyState.Loadable : _solana_wallet_adapter_base__WEBPACK_IMPORTED_MODULE_3__.WalletReadyState.Unsupported);\n        _BaseSolanaMobileWalletAdapter_accountSelector.set(this, void 0);\n        _BaseSolanaMobileWalletAdapter_selectedAccount.set(this, void 0);\n        _BaseSolanaMobileWalletAdapter_publicKey.set(this, void 0);\n        _BaseSolanaMobileWalletAdapter_handleChangeEvent.set(this, (properties) => __awaiter(this, void 0, void 0, function* () {\n            if (properties.accounts && properties.accounts.length > 0) {\n                __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_instances, \"m\", _BaseSolanaMobileWalletAdapter_declareWalletAsInstalled).call(this);\n                const nextSelectedAccount = yield __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_accountSelector, \"f\").call(this, properties.accounts);\n                if (nextSelectedAccount !== __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_selectedAccount, \"f\")) {\n                    __classPrivateFieldSet(this, _BaseSolanaMobileWalletAdapter_selectedAccount, nextSelectedAccount, \"f\");\n                    __classPrivateFieldSet(this, _BaseSolanaMobileWalletAdapter_publicKey, undefined, \"f\");\n                    this.emit('connect', \n                    // Having just set `this.#selectedAccount`, `this.publicKey` is definitely non-null\n                    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n                    this.publicKey);\n                }\n            }\n        }));\n        // this.#chain = chainOrClusterToChainId(config.chain);\n        __classPrivateFieldSet(this, _BaseSolanaMobileWalletAdapter_accountSelector, (accounts) => __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            const selectedBase64EncodedAddress = yield config.addressSelector.select(accounts.map(({ publicKey }) => fromUint8Array(publicKey)));\n            return (_a = accounts.find(({ publicKey }) => fromUint8Array(publicKey) === selectedBase64EncodedAddress)) !== null && _a !== void 0 ? _a : accounts[0];\n        }), \"f\");\n        __classPrivateFieldSet(this, _BaseSolanaMobileWalletAdapter_wallet, wallet, \"f\");\n        __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_wallet, \"f\").features[StandardEvents].on('change', __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_handleChangeEvent, \"f\"));\n        this.name = __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_wallet, \"f\").name;\n        this.icon = __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_wallet, \"f\").icon;\n        this.url = __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_wallet, \"f\").url;\n        // TODO: evaluate if this logic should be kept - it seems to create a nasty bug where \n        //  the wallet tries to auto connect on page load and gets blocked by the popup blocker\n        // if (this.#readyState !== WalletReadyState.Unsupported) {\n        //     config.authorizationResultCache.get().then((authorizationResult) => {\n        //         if (authorizationResult) {\n        //             // Having a prior authorization result is, right now, the best\n        //             // indication that a mobile wallet is installed. There is no API\n        //             // we can use to test for whether the association URI is supported.\n        //             this.#declareWalletAsInstalled();\n        //         }\n        //     });\n        // }\n    }\n    get publicKey() {\n        var _a;\n        if (!__classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_publicKey, \"f\") && __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_selectedAccount, \"f\")) {\n            try {\n                __classPrivateFieldSet(this, _BaseSolanaMobileWalletAdapter_publicKey, new _solana_web3_js__WEBPACK_IMPORTED_MODULE_0__.PublicKey(__classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_selectedAccount, \"f\").publicKey), \"f\");\n            }\n            catch (e) {\n                throw new _solana_wallet_adapter_base__WEBPACK_IMPORTED_MODULE_4__.WalletPublicKeyError((e instanceof Error && (e === null || e === void 0 ? void 0 : e.message)) || 'Unknown error', e);\n            }\n        }\n        return (_a = __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_publicKey, \"f\")) !== null && _a !== void 0 ? _a : null;\n    }\n    get connected() {\n        return __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_wallet, \"f\").connected;\n    }\n    get connecting() {\n        return __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_connecting, \"f\");\n    }\n    get readyState() {\n        return __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_readyState, \"f\");\n    }\n    /** @deprecated Use `autoConnect()` instead. */\n    autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield this.autoConnect();\n        });\n    }\n    autoConnect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_instances, \"m\", _BaseSolanaMobileWalletAdapter_connect).call(this, true);\n        });\n    }\n    connect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_instances, \"m\", _BaseSolanaMobileWalletAdapter_connect).call(this);\n        });\n    }\n    /** @deprecated Use `connect()` or `autoConnect()` instead. */\n    performAuthorization(signInPayload) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                const cachedAuthorizationResult = yield __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_wallet, \"f\").cachedAuthorizationResult;\n                if (cachedAuthorizationResult) {\n                    yield __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_wallet, \"f\").features[StandardConnect].connect({ silent: true });\n                    return cachedAuthorizationResult;\n                }\n                if (signInPayload) {\n                    yield __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_wallet, \"f\").features[_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_5__.SolanaSignIn].signIn(signInPayload);\n                }\n                else\n                    yield __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_wallet, \"f\").features[StandardConnect].connect();\n                const authorizationResult = yield yield __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_wallet, \"f\").cachedAuthorizationResult;\n                return authorizationResult;\n            }\n            catch (e) {\n                throw new _solana_wallet_adapter_base__WEBPACK_IMPORTED_MODULE_4__.WalletConnectionError((e instanceof Error && e.message) || 'Unknown error', e);\n            }\n        });\n    }\n    disconnect() {\n        return __awaiter(this, void 0, void 0, function* () {\n            // return await this.#runWithGuard(this.#wallet.features[StandardDisconnect].disconnect);\n            return yield __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_instances, \"m\", _BaseSolanaMobileWalletAdapter_runWithGuard).call(this, () => __awaiter(this, void 0, void 0, function* () {\n                __classPrivateFieldSet(this, _BaseSolanaMobileWalletAdapter_connecting, false, \"f\");\n                __classPrivateFieldSet(this, _BaseSolanaMobileWalletAdapter_publicKey, undefined, \"f\");\n                __classPrivateFieldSet(this, _BaseSolanaMobileWalletAdapter_selectedAccount, undefined, \"f\");\n                yield __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_wallet, \"f\").features[StandardDisconnect].disconnect();\n                this.emit('disconnect');\n            }));\n        });\n    }\n    signIn(input) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_instances, \"m\", _BaseSolanaMobileWalletAdapter_runWithGuard).call(this, () => __awaiter(this, void 0, void 0, function* () {\n                var _a;\n                if (__classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_readyState, \"f\") !== _solana_wallet_adapter_base__WEBPACK_IMPORTED_MODULE_3__.WalletReadyState.Installed && __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_readyState, \"f\") !== _solana_wallet_adapter_base__WEBPACK_IMPORTED_MODULE_3__.WalletReadyState.Loadable) {\n                    throw new _solana_wallet_adapter_base__WEBPACK_IMPORTED_MODULE_4__.WalletNotReadyError();\n                }\n                __classPrivateFieldSet(this, _BaseSolanaMobileWalletAdapter_connecting, true, \"f\");\n                try {\n                    const outputs = yield __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_wallet, \"f\").features[_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_5__.SolanaSignIn].signIn(Object.assign(Object.assign({}, input), { domain: (_a = input === null || input === void 0 ? void 0 : input.domain) !== null && _a !== void 0 ? _a : window.location.host }));\n                    if (outputs.length > 0) {\n                        return outputs[0];\n                    }\n                    else {\n                        throw new Error(\"Sign in failed, no sign in result returned by wallet\");\n                    }\n                }\n                catch (e) {\n                    throw new _solana_wallet_adapter_base__WEBPACK_IMPORTED_MODULE_4__.WalletConnectionError((e instanceof Error && e.message) || 'Unknown error', e);\n                }\n                finally {\n                    __classPrivateFieldSet(this, _BaseSolanaMobileWalletAdapter_connecting, false, \"f\");\n                }\n            }));\n        });\n    }\n    signMessage(message) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_instances, \"m\", _BaseSolanaMobileWalletAdapter_runWithGuard).call(this, () => __awaiter(this, void 0, void 0, function* () {\n                const account = __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_instances, \"m\", _BaseSolanaMobileWalletAdapter_assertIsAuthorized).call(this);\n                try {\n                    const outputs = yield __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_wallet, \"f\").features[_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_6__.SolanaSignMessage].signMessage({\n                        account, message: message\n                    });\n                    return outputs[0].signature;\n                }\n                catch (error) {\n                    throw new _solana_wallet_adapter_base__WEBPACK_IMPORTED_MODULE_4__.WalletSignMessageError(error === null || error === void 0 ? void 0 : error.message, error);\n                }\n            }));\n        });\n    }\n    sendTransaction(transaction, connection, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_instances, \"m\", _BaseSolanaMobileWalletAdapter_runWithGuard).call(this, () => __awaiter(this, void 0, void 0, function* () {\n                const account = __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_instances, \"m\", _BaseSolanaMobileWalletAdapter_assertIsAuthorized).call(this);\n                try {\n                    function getTargetCommitment() {\n                        let targetCommitment;\n                        switch (connection.commitment) {\n                            case 'confirmed':\n                            case 'finalized':\n                            case 'processed':\n                                targetCommitment = connection.commitment;\n                                break;\n                            default:\n                                targetCommitment = 'finalized';\n                        }\n                        let targetPreflightCommitment;\n                        switch (options === null || options === void 0 ? void 0 : options.preflightCommitment) {\n                            case 'confirmed':\n                            case 'finalized':\n                            case 'processed':\n                                targetPreflightCommitment = options.preflightCommitment;\n                                break;\n                            case undefined:\n                                targetPreflightCommitment = targetCommitment;\n                                break;\n                            default:\n                                targetPreflightCommitment = 'finalized';\n                        }\n                        const preflightCommitmentScore = targetPreflightCommitment === 'finalized'\n                            ? 2\n                            : targetPreflightCommitment === 'confirmed'\n                                ? 1\n                                : 0;\n                        const targetCommitmentScore = targetCommitment === 'finalized' ? 2 : targetCommitment === 'confirmed' ? 1 : 0;\n                        return preflightCommitmentScore < targetCommitmentScore\n                            ? targetPreflightCommitment\n                            : targetCommitment;\n                    }\n                    if (_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_7__.SolanaSignAndSendTransaction in __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_wallet, \"f\").features) {\n                        const chain = chainOrClusterToChainId(__classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_wallet, \"f\").currentAuthorization.chain);\n                        const [signature] = (yield __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_wallet, \"f\").features[_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_7__.SolanaSignAndSendTransaction].signAndSendTransaction({\n                            account,\n                            transaction: transaction.serialize(),\n                            chain: chain,\n                            options: options ? {\n                                skipPreflight: options.skipPreflight,\n                                maxRetries: options.maxRetries\n                            } : undefined\n                        })).map(((output) => {\n                            return fromUint8Array(output.signature);\n                        }));\n                        return signature;\n                    }\n                    else {\n                        const [signedTransaction] = yield __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_instances, \"m\", _BaseSolanaMobileWalletAdapter_performSignTransactions).call(this, [transaction]);\n                        if (isVersionedTransaction(signedTransaction)) {\n                            return yield connection.sendTransaction(signedTransaction);\n                        }\n                        else {\n                            const serializedTransaction = signedTransaction.serialize();\n                            return yield connection.sendRawTransaction(serializedTransaction, Object.assign(Object.assign({}, options), { preflightCommitment: getTargetCommitment() }));\n                        }\n                    }\n                }\n                catch (error) {\n                    throw new _solana_wallet_adapter_base__WEBPACK_IMPORTED_MODULE_4__.WalletSendTransactionError(error === null || error === void 0 ? void 0 : error.message, error);\n                }\n            }));\n        });\n    }\n    signTransaction(transaction) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_instances, \"m\", _BaseSolanaMobileWalletAdapter_runWithGuard).call(this, () => __awaiter(this, void 0, void 0, function* () {\n                const [signedTransaction] = yield __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_instances, \"m\", _BaseSolanaMobileWalletAdapter_performSignTransactions).call(this, [transaction]);\n                return signedTransaction;\n            }));\n        });\n    }\n    signAllTransactions(transactions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return yield __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_instances, \"m\", _BaseSolanaMobileWalletAdapter_runWithGuard).call(this, () => __awaiter(this, void 0, void 0, function* () {\n                const signedTransactions = yield __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_instances, \"m\", _BaseSolanaMobileWalletAdapter_performSignTransactions).call(this, transactions);\n                return signedTransactions;\n            }));\n        });\n    }\n}\n_BaseSolanaMobileWalletAdapter_wallet = new WeakMap(), _BaseSolanaMobileWalletAdapter_connecting = new WeakMap(), _BaseSolanaMobileWalletAdapter_readyState = new WeakMap(), _BaseSolanaMobileWalletAdapter_accountSelector = new WeakMap(), _BaseSolanaMobileWalletAdapter_selectedAccount = new WeakMap(), _BaseSolanaMobileWalletAdapter_publicKey = new WeakMap(), _BaseSolanaMobileWalletAdapter_handleChangeEvent = new WeakMap(), _BaseSolanaMobileWalletAdapter_instances = new WeakSet(), _BaseSolanaMobileWalletAdapter_connect = function _BaseSolanaMobileWalletAdapter_connect(autoConnect = false) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (this.connecting || this.connected) {\n            return;\n        }\n        return yield __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_instances, \"m\", _BaseSolanaMobileWalletAdapter_runWithGuard).call(this, () => __awaiter(this, void 0, void 0, function* () {\n            if (__classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_readyState, \"f\") !== _solana_wallet_adapter_base__WEBPACK_IMPORTED_MODULE_3__.WalletReadyState.Installed && __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_readyState, \"f\") !== _solana_wallet_adapter_base__WEBPACK_IMPORTED_MODULE_3__.WalletReadyState.Loadable) {\n                throw new _solana_wallet_adapter_base__WEBPACK_IMPORTED_MODULE_4__.WalletNotReadyError();\n            }\n            __classPrivateFieldSet(this, _BaseSolanaMobileWalletAdapter_connecting, true, \"f\");\n            try {\n                yield __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_wallet, \"f\").features[StandardConnect].connect({ silent: autoConnect });\n            }\n            catch (e) {\n                throw new _solana_wallet_adapter_base__WEBPACK_IMPORTED_MODULE_4__.WalletConnectionError((e instanceof Error && e.message) || 'Unknown error', e);\n            }\n            finally {\n                __classPrivateFieldSet(this, _BaseSolanaMobileWalletAdapter_connecting, false, \"f\");\n            }\n        }));\n    });\n}, _BaseSolanaMobileWalletAdapter_declareWalletAsInstalled = function _BaseSolanaMobileWalletAdapter_declareWalletAsInstalled() {\n    if (__classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_readyState, \"f\") !== _solana_wallet_adapter_base__WEBPACK_IMPORTED_MODULE_3__.WalletReadyState.Installed) {\n        this.emit('readyStateChange', (__classPrivateFieldSet(this, _BaseSolanaMobileWalletAdapter_readyState, _solana_wallet_adapter_base__WEBPACK_IMPORTED_MODULE_3__.WalletReadyState.Installed, \"f\")));\n    }\n}, _BaseSolanaMobileWalletAdapter_assertIsAuthorized = function _BaseSolanaMobileWalletAdapter_assertIsAuthorized() {\n    if (!__classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_wallet, \"f\").isAuthorized || !__classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_selectedAccount, \"f\"))\n        throw new _solana_wallet_adapter_base__WEBPACK_IMPORTED_MODULE_4__.WalletNotConnectedError();\n    return __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_selectedAccount, \"f\");\n}, _BaseSolanaMobileWalletAdapter_performSignTransactions = function _BaseSolanaMobileWalletAdapter_performSignTransactions(transactions) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const account = __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_instances, \"m\", _BaseSolanaMobileWalletAdapter_assertIsAuthorized).call(this);\n        try {\n            if (_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_8__.SolanaSignTransaction in __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_wallet, \"f\").features) {\n                return __classPrivateFieldGet(this, _BaseSolanaMobileWalletAdapter_wallet, \"f\").features[_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_8__.SolanaSignTransaction].signTransaction(...transactions.map((value) => {\n                    return { account, transaction: value.serialize() };\n                })).then((outputs) => {\n                    return outputs.map((output) => {\n                        const byteArray = output.signedTransaction;\n                        const numSignatures = byteArray[0];\n                        const messageOffset = numSignatures * SIGNATURE_LENGTH_IN_BYTES + 1;\n                        const version = _solana_web3_js__WEBPACK_IMPORTED_MODULE_0__.VersionedMessage.deserializeMessageVersion(byteArray.slice(messageOffset, byteArray.length));\n                        if (version === 'legacy') {\n                            return _solana_web3_js__WEBPACK_IMPORTED_MODULE_0__.Transaction.from(byteArray);\n                        }\n                        else {\n                            return _solana_web3_js__WEBPACK_IMPORTED_MODULE_0__.VersionedTransaction.deserialize(byteArray);\n                        }\n                    });\n                });\n            }\n            else {\n                throw new Error('Connected wallet does not support signing transactions');\n            }\n        }\n        catch (error) {\n            throw new _solana_wallet_adapter_base__WEBPACK_IMPORTED_MODULE_4__.WalletSignTransactionError(error === null || error === void 0 ? void 0 : error.message, error);\n        }\n    });\n}, _BaseSolanaMobileWalletAdapter_runWithGuard = function _BaseSolanaMobileWalletAdapter_runWithGuard(callback) {\n    return __awaiter(this, void 0, void 0, function* () {\n        try {\n            return yield callback();\n        }\n        catch (e) {\n            this.emit('error', e);\n            throw e;\n        }\n    });\n};\nclass LocalSolanaMobileWalletAdapter extends BaseSolanaMobileWalletAdapter {\n    constructor(config) {\n        var _a;\n        const chain = chainOrClusterToChainId((_a = config.chain) !== null && _a !== void 0 ? _a : config.cluster);\n        super(new _solana_mobile_wallet_standard_mobile__WEBPACK_IMPORTED_MODULE_1__.LocalSolanaMobileWalletAdapterWallet({\n            appIdentity: config.appIdentity,\n            authorizationCache: {\n                set: config.authorizationResultCache.set,\n                get: () => __awaiter(this, void 0, void 0, function* () {\n                    return yield config.authorizationResultCache.get();\n                }),\n                clear: config.authorizationResultCache.clear,\n            },\n            chains: [chain],\n            chainSelector: (0,_solana_mobile_wallet_standard_mobile__WEBPACK_IMPORTED_MODULE_1__.createDefaultChainSelector)(),\n            onWalletNotFound: () => __awaiter(this, void 0, void 0, function* () {\n                config.onWalletNotFound(this);\n            }),\n        }), {\n            addressSelector: config.addressSelector,\n            chain: chain,\n        });\n    }\n}\nclass RemoteSolanaMobileWalletAdapter extends BaseSolanaMobileWalletAdapter {\n    constructor(config) {\n        const chain = chainOrClusterToChainId(config.chain);\n        super(new _solana_mobile_wallet_standard_mobile__WEBPACK_IMPORTED_MODULE_1__.RemoteSolanaMobileWalletAdapterWallet({\n            appIdentity: config.appIdentity,\n            authorizationCache: {\n                set: config.authorizationResultCache.set,\n                get: () => __awaiter(this, void 0, void 0, function* () {\n                    return yield config.authorizationResultCache.get();\n                }),\n                clear: config.authorizationResultCache.clear,\n            },\n            chains: [chain],\n            chainSelector: (0,_solana_mobile_wallet_standard_mobile__WEBPACK_IMPORTED_MODULE_1__.createDefaultChainSelector)(),\n            remoteHostAuthority: config.remoteHostAuthority,\n            onWalletNotFound: () => __awaiter(this, void 0, void 0, function* () {\n                config.onWalletNotFound(this);\n            }),\n        }), {\n            addressSelector: config.addressSelector,\n            chain: chain,\n        });\n    }\n}\nclass SolanaMobileWalletAdapter extends LocalSolanaMobileWalletAdapter {\n}\n\nfunction createDefaultAddressSelector() {\n    return {\n        select(addresses) {\n            return __awaiter(this, void 0, void 0, function* () {\n                return addresses[0];\n            });\n        },\n    };\n}\n\nfunction createDefaultAuthorizationResultCache() {\n    return (0,_solana_mobile_wallet_standard_mobile__WEBPACK_IMPORTED_MODULE_1__.createDefaultAuthorizationCache)();\n}\n\nfunction defaultWalletNotFoundHandler(mobileWalletAdapter) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return (0,_solana_mobile_wallet_standard_mobile__WEBPACK_IMPORTED_MODULE_1__.defaultErrorModalWalletNotFoundHandler)();\n    });\n}\nfunction createDefaultWalletNotFoundHandler() {\n    return defaultWalletNotFoundHandler;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHNvbGFuYS1tb2JpbGUrd2FsbGV0LWFkYXB0ZXItbW9iaWxlQDIuMi41X0Bzb2xhbmErd2ViMy5qc0AxLjk4LjRfYnVmZmVydXRpbEA0LjAuOV90eXBlXzU0MTYyMThlNDQ4NjY3ZTM0Y2QwNjhhZmRhZjZmNjhmL25vZGVfbW9kdWxlcy9Ac29sYW5hLW1vYmlsZS93YWxsZXQtYWRhcHRlci1tb2JpbGUvbGliL2VzbS9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFnUjtBQUMvSztBQUN1QztBQUN5UTs7QUFFalo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsK0RBQStELGlCQUFpQjtBQUM1RztBQUNBLG9DQUFvQyxNQUFNLCtCQUErQixZQUFZO0FBQ3JGLG1DQUFtQyxNQUFNLG1DQUFtQyxZQUFZO0FBQ3hGLGdDQUFnQztBQUNoQztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUMsTUFBNkM7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsTUFBNkM7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsQ0FBQyxNQUE2QztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxNQUE2QztBQUM5QztBQUNBO0FBQ0E7QUFDQTs7QUFFQSxDQUFDLE1BQTZDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLE1BQTZDO0FBQzlDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw0Q0FBNEMsc0dBQXFDO0FBQ2pGLGtEQUFrRCw0R0FBMkM7QUFDN0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsNkZBQW9DO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRUFBK0UseUVBQWdCLFlBQVkseUVBQWdCO0FBQzNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLHFHQUFxRyxXQUFXO0FBQ2hILDBDQUEwQyxXQUFXO0FBQ3JELFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkZBQTJGLHNEQUFTO0FBQ3BHO0FBQ0E7QUFDQSwwQkFBMEIsNkVBQW9CO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1SUFBdUksY0FBYztBQUNySjtBQUNBO0FBQ0E7QUFDQSw0R0FBNEcsMEVBQVk7QUFDeEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsOEVBQXFCO0FBQy9DO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUdBQXFHLHlFQUFnQiwrRkFBK0YseUVBQWdCO0FBQ3BPLDhCQUE4Qiw0RUFBbUI7QUFDakQ7QUFDQTtBQUNBO0FBQ0EsNEhBQTRILDBFQUFZLHVDQUF1QyxZQUFZLGlJQUFpSTtBQUM1VDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLDhFQUFxQjtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEhBQTRILCtFQUFpQjtBQUM3STtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsK0VBQXNCO0FBQ3BEO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QiwwRkFBNEI7QUFDcEQ7QUFDQSxxSUFBcUksMEZBQTRCO0FBQ2pLO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QjtBQUM5Qix5QkFBeUI7QUFDekI7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEhBQTRILGNBQWMsNENBQTRDO0FBQ3RMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLG1GQUEwQjtBQUN4RDtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpR0FBaUcseUVBQWdCLCtGQUErRix5RUFBZ0I7QUFDaE8sMEJBQTBCLDRFQUFtQjtBQUM3QztBQUNBO0FBQ0E7QUFDQSxtSUFBbUkscUJBQXFCO0FBQ3hKO0FBQ0E7QUFDQSwwQkFBMEIsOEVBQXFCO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULEtBQUs7QUFDTCxDQUFDO0FBQ0QseUZBQXlGLHlFQUFnQjtBQUN6RywrR0FBK0cseUVBQWdCO0FBQy9IO0FBQ0EsQ0FBQztBQUNEO0FBQ0Esa0JBQWtCLGdGQUF1QjtBQUN6QztBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsbUZBQXFCO0FBQ3JDLHlHQUF5RyxtRkFBcUI7QUFDOUgsNkJBQTZCO0FBQzdCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3Qyw2REFBZ0I7QUFDeEQ7QUFDQSxtQ0FBbUMsd0RBQVc7QUFDOUM7QUFDQTtBQUNBLG1DQUFtQyxpRUFBb0I7QUFDdkQ7QUFDQSxxQkFBcUI7QUFDckIsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixtRkFBMEI7QUFDaEQ7QUFDQSxLQUFLO0FBQ0wsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQix1R0FBb0M7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGFBQWE7QUFDYjtBQUNBLDJCQUEyQixpR0FBMEI7QUFDckQ7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHdHQUFxQztBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsMkJBQTJCLGlHQUEwQjtBQUNyRDtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBLFdBQVcsc0dBQStCO0FBQzFDOztBQUVBO0FBQ0E7QUFDQSxlQUFlLDZHQUFzQztBQUNyRCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRStSIiwic291cmNlcyI6WyIvVXNlcnMvc3VrYW50Z2hvc2gvQ29kZS9Tb2xhbmEvYmV0Zm9saW8vbm9kZV9tb2R1bGVzLy5wbnBtL0Bzb2xhbmEtbW9iaWxlK3dhbGxldC1hZGFwdGVyLW1vYmlsZUAyLjIuNV9Ac29sYW5hK3dlYjMuanNAMS45OC40X2J1ZmZlcnV0aWxANC4wLjlfdHlwZV81NDE2MjE4ZTQ0ODY2N2UzNGNkMDY4YWZkYWY2ZjY4Zi9ub2RlX21vZHVsZXMvQHNvbGFuYS1tb2JpbGUvd2FsbGV0LWFkYXB0ZXItbW9iaWxlL2xpYi9lc20vaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQmFzZVNpZ25Jbk1lc3NhZ2VTaWduZXJXYWxsZXRBZGFwdGVyLCBXYWxsZXRSZWFkeVN0YXRlLCBXYWxsZXRQdWJsaWNLZXlFcnJvciwgV2FsbGV0Q29ubmVjdGlvbkVycm9yLCBXYWxsZXROb3RSZWFkeUVycm9yLCBXYWxsZXRTaWduTWVzc2FnZUVycm9yLCBXYWxsZXRTZW5kVHJhbnNhY3Rpb25FcnJvciwgV2FsbGV0U2lnblRyYW5zYWN0aW9uRXJyb3IsIFdhbGxldE5vdENvbm5lY3RlZEVycm9yIH0gZnJvbSAnQHNvbGFuYS93YWxsZXQtYWRhcHRlci1iYXNlJztcbmltcG9ydCB7IFB1YmxpY0tleSwgVmVyc2lvbmVkTWVzc2FnZSwgVHJhbnNhY3Rpb24sIFZlcnNpb25lZFRyYW5zYWN0aW9uIH0gZnJvbSAnQHNvbGFuYS93ZWIzLmpzJztcbmltcG9ydCB7IFNvbGFuYVNpZ25JbiwgU29sYW5hU2lnbk1lc3NhZ2UsIFNvbGFuYVNpZ25BbmRTZW5kVHJhbnNhY3Rpb24sIFNvbGFuYVNpZ25UcmFuc2FjdGlvbiB9IGZyb20gJ0Bzb2xhbmEvd2FsbGV0LXN0YW5kYXJkLWZlYXR1cmVzJztcbmltcG9ydCB7IFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXROYW1lIGFzIFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXROYW1lJDEsIFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJSZW1vdGVXYWxsZXROYW1lIGFzIFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJSZW1vdGVXYWxsZXROYW1lJDEsIExvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldCwgY3JlYXRlRGVmYXVsdENoYWluU2VsZWN0b3IsIFJlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXQsIGNyZWF0ZURlZmF1bHRBdXRob3JpemF0aW9uQ2FjaGUsIGRlZmF1bHRFcnJvck1vZGFsV2FsbGV0Tm90Rm91bmRIYW5kbGVyIH0gZnJvbSAnQHNvbGFuYS1tb2JpbGUvd2FsbGV0LXN0YW5kYXJkLW1vYmlsZSc7XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXHJcblxyXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcclxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxyXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcclxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxyXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cclxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1JcclxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxyXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG5cclxuZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgc3RhdGUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIGdldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlYWQgcHJpdmF0ZSBtZW1iZXIgZnJvbSBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIGtpbmQgPT09IFwibVwiID8gZiA6IGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyKSA6IGYgPyBmLnZhbHVlIDogc3RhdGUuZ2V0KHJlY2VpdmVyKTtcclxufVxyXG5cclxuZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZFNldChyZWNlaXZlciwgc3RhdGUsIHZhbHVlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJtXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBzZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xyXG4gICAgcmV0dXJuIChraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlciwgdmFsdWUpIDogZiA/IGYudmFsdWUgPSB2YWx1ZSA6IHN0YXRlLnNldChyZWNlaXZlciwgdmFsdWUpKSwgdmFsdWU7XHJcbn1cblxuKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19jbGFzc1ByaXZhdGVGaWVsZFNldCkgfHwgZnVuY3Rpb24gKHJlY2VpdmVyLCBzdGF0ZSwgdmFsdWUsIGtpbmQsIGYpIHtcbiAgICBpZiAoa2luZCA9PT0gXCJtXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIG1ldGhvZCBpcyBub3Qgd3JpdGFibGVcIik7XG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgc2V0dGVyXCIpO1xuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHdyaXRlIHByaXZhdGUgbWVtYmVyIHRvIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XG4gICAgcmV0dXJuIChraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlciwgdmFsdWUpIDogZiA/IGYudmFsdWUgPSB2YWx1ZSA6IHN0YXRlLnNldChyZWNlaXZlciwgdmFsdWUpKSwgdmFsdWU7XG59O1xuKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19jbGFzc1ByaXZhdGVGaWVsZEdldCkgfHwgZnVuY3Rpb24gKHJlY2VpdmVyLCBzdGF0ZSwga2luZCwgZikge1xuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIGdldHRlclwiKTtcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCByZWFkIHByaXZhdGUgbWVtYmVyIGZyb20gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcbiAgICByZXR1cm4ga2luZCA9PT0gXCJtXCIgPyBmIDoga2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIpIDogZiA/IGYudmFsdWUgOiBzdGF0ZS5nZXQocmVjZWl2ZXIpO1xufTtcblxuLyoqIE5hbWUgb2YgdGhlIGZlYXR1cmUuICovXG5jb25zdCBTdGFuZGFyZENvbm5lY3QgPSAnc3RhbmRhcmQ6Y29ubmVjdCc7XG5cbi8qKiBOYW1lIG9mIHRoZSBmZWF0dXJlLiAqL1xuY29uc3QgU3RhbmRhcmREaXNjb25uZWN0ID0gJ3N0YW5kYXJkOmRpc2Nvbm5lY3QnO1xuXG4vKiogTmFtZSBvZiB0aGUgZmVhdHVyZS4gKi9cbmNvbnN0IFN0YW5kYXJkRXZlbnRzID0gJ3N0YW5kYXJkOmV2ZW50cyc7XG5cbih1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fY2xhc3NQcml2YXRlRmllbGRTZXQpIHx8IGZ1bmN0aW9uIChyZWNlaXZlciwgc3RhdGUsIHZhbHVlLCBraW5kLCBmKSB7XG4gICAgaWYgKGtpbmQgPT09IFwibVwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBtZXRob2QgaXMgbm90IHdyaXRhYmxlXCIpO1xuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlclwiKTtcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xuICAgIHJldHVybiAoa2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIsIHZhbHVlKSA6IGYgPyBmLnZhbHVlID0gdmFsdWUgOiBzdGF0ZS5zZXQocmVjZWl2ZXIsIHZhbHVlKSksIHZhbHVlO1xufTtcbih1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fY2xhc3NQcml2YXRlRmllbGRHZXQpIHx8IGZ1bmN0aW9uIChyZWNlaXZlciwgc3RhdGUsIGtpbmQsIGYpIHtcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBnZXR0ZXJcIik7XG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XG4gICAgcmV0dXJuIGtpbmQgPT09IFwibVwiID8gZiA6IGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyKSA6IGYgPyBmLnZhbHVlIDogc3RhdGUuZ2V0KHJlY2VpdmVyKTtcbn07XG5cbih1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fY2xhc3NQcml2YXRlRmllbGRTZXQpIHx8IGZ1bmN0aW9uIChyZWNlaXZlciwgc3RhdGUsIHZhbHVlLCBraW5kLCBmKSB7XG4gICAgaWYgKGtpbmQgPT09IFwibVwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBtZXRob2QgaXMgbm90IHdyaXRhYmxlXCIpO1xuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlclwiKTtcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xuICAgIHJldHVybiAoa2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIsIHZhbHVlKSA6IGYgPyBmLnZhbHVlID0gdmFsdWUgOiBzdGF0ZS5zZXQocmVjZWl2ZXIsIHZhbHVlKSksIHZhbHVlO1xufTtcbih1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fY2xhc3NQcml2YXRlRmllbGRHZXQpIHx8IGZ1bmN0aW9uIChyZWNlaXZlciwgc3RhdGUsIGtpbmQsIGYpIHtcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBnZXR0ZXJcIik7XG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XG4gICAgcmV0dXJuIGtpbmQgPT09IFwibVwiID8gZiA6IGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyKSA6IGYgPyBmLnZhbHVlIDogc3RhdGUuZ2V0KHJlY2VpdmVyKTtcbn07XG5cbmZ1bmN0aW9uIGZyb21VaW50OEFycmF5KGJ5dGVBcnJheSkge1xuICAgIHJldHVybiB3aW5kb3cuYnRvYShTdHJpbmcuZnJvbUNoYXJDb2RlLmNhbGwobnVsbCwgLi4uYnl0ZUFycmF5KSk7XG59XG5cbmZ1bmN0aW9uIGdldElzU3VwcG9ydGVkKCkge1xuICAgIHJldHVybiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgd2luZG93LmlzU2VjdXJlQ29udGV4dCAmJlxuICAgICAgICB0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIC9hbmRyb2lkL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSk7XG59XG5cbnZhciBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfaW5zdGFuY2VzLCBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfd2FsbGV0LCBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfY29ubmVjdGluZywgX0Jhc2VTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyX3JlYWR5U3RhdGUsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9hY2NvdW50U2VsZWN0b3IsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9zZWxlY3RlZEFjY291bnQsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9wdWJsaWNLZXksIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9oYW5kbGVDaGFuZ2VFdmVudCwgX0Jhc2VTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyX2Nvbm5lY3QsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9kZWNsYXJlV2FsbGV0QXNJbnN0YWxsZWQsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9hc3NlcnRJc0F1dGhvcml6ZWQsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9wZXJmb3JtU2lnblRyYW5zYWN0aW9ucywgX0Jhc2VTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyX3J1bldpdGhHdWFyZDtcbmNvbnN0IFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXROYW1lID0gU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldE5hbWUkMTtcbmNvbnN0IFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJSZW1vdGVXYWxsZXROYW1lID0gU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlclJlbW90ZVdhbGxldE5hbWUkMTtcbmNvbnN0IFNJR05BVFVSRV9MRU5HVEhfSU5fQllURVMgPSA2NDtcbmZ1bmN0aW9uIGlzVmVyc2lvbmVkVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24pIHtcbiAgICByZXR1cm4gJ3ZlcnNpb24nIGluIHRyYW5zYWN0aW9uO1xufVxuZnVuY3Rpb24gY2hhaW5PckNsdXN0ZXJUb0NoYWluSWQoY2hhaW4pIHtcbiAgICBzd2l0Y2ggKGNoYWluKSB7XG4gICAgICAgIGNhc2UgJ21haW5uZXQtYmV0YSc6XG4gICAgICAgICAgICByZXR1cm4gJ3NvbGFuYTptYWlubmV0JztcbiAgICAgICAgY2FzZSAndGVzdG5ldCc6XG4gICAgICAgICAgICByZXR1cm4gJ3NvbGFuYTp0ZXN0bmV0JztcbiAgICAgICAgY2FzZSAnZGV2bmV0JzpcbiAgICAgICAgICAgIHJldHVybiAnc29sYW5hOmRldm5ldCc7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gY2hhaW47XG4gICAgfVxufVxuY2xhc3MgQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXIgZXh0ZW5kcyBCYXNlU2lnbkluTWVzc2FnZVNpZ25lcldhbGxldEFkYXB0ZXIge1xuICAgIGNvbnN0cnVjdG9yKHdhbGxldCwgY29uZmlnKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9pbnN0YW5jZXMuYWRkKHRoaXMpO1xuICAgICAgICB0aGlzLnN1cHBvcnRlZFRyYW5zYWN0aW9uVmVyc2lvbnMgPSBuZXcgU2V0KFxuICAgICAgICAvLyBGSVhNRSgjMjQ0KTogV2UgY2FuJ3QgYWN0dWFsbHkga25vdyB3aGF0IHZlcnNpb25zIGFyZSBzdXBwb3J0ZWQgdW50aWwgd2Uga25vdyB3aGljaCB3YWxsZXQgd2UncmUgdGFsa2luZyB0by5cbiAgICAgICAgWydsZWdhY3knLCAwXSk7XG4gICAgICAgIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl93YWxsZXQuc2V0KHRoaXMsIHZvaWQgMCk7XG4gICAgICAgIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9jb25uZWN0aW5nLnNldCh0aGlzLCBmYWxzZSk7XG4gICAgICAgIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9yZWFkeVN0YXRlLnNldCh0aGlzLCBnZXRJc1N1cHBvcnRlZCgpID8gV2FsbGV0UmVhZHlTdGF0ZS5Mb2FkYWJsZSA6IFdhbGxldFJlYWR5U3RhdGUuVW5zdXBwb3J0ZWQpO1xuICAgICAgICBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfYWNjb3VudFNlbGVjdG9yLnNldCh0aGlzLCB2b2lkIDApO1xuICAgICAgICBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfc2VsZWN0ZWRBY2NvdW50LnNldCh0aGlzLCB2b2lkIDApO1xuICAgICAgICBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfcHVibGljS2V5LnNldCh0aGlzLCB2b2lkIDApO1xuICAgICAgICBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfaGFuZGxlQ2hhbmdlRXZlbnQuc2V0KHRoaXMsIChwcm9wZXJ0aWVzKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAocHJvcGVydGllcy5hY2NvdW50cyAmJiBwcm9wZXJ0aWVzLmFjY291bnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9pbnN0YW5jZXMsIFwibVwiLCBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfZGVjbGFyZVdhbGxldEFzSW5zdGFsbGVkKS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRTZWxlY3RlZEFjY291bnQgPSB5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9hY2NvdW50U2VsZWN0b3IsIFwiZlwiKS5jYWxsKHRoaXMsIHByb3BlcnRpZXMuYWNjb3VudHMpO1xuICAgICAgICAgICAgICAgIGlmIChuZXh0U2VsZWN0ZWRBY2NvdW50ICE9PSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9zZWxlY3RlZEFjY291bnQsIFwiZlwiKSkge1xuICAgICAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9zZWxlY3RlZEFjY291bnQsIG5leHRTZWxlY3RlZEFjY291bnQsIFwiZlwiKTtcbiAgICAgICAgICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfcHVibGljS2V5LCB1bmRlZmluZWQsIFwiZlwiKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbWl0KCdjb25uZWN0JywgXG4gICAgICAgICAgICAgICAgICAgIC8vIEhhdmluZyBqdXN0IHNldCBgdGhpcy4jc2VsZWN0ZWRBY2NvdW50YCwgYHRoaXMucHVibGljS2V5YCBpcyBkZWZpbml0ZWx5IG5vbi1udWxsXG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHVibGljS2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgLy8gdGhpcy4jY2hhaW4gPSBjaGFpbk9yQ2x1c3RlclRvQ2hhaW5JZChjb25maWcuY2hhaW4pO1xuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9hY2NvdW50U2VsZWN0b3IsIChhY2NvdW50cykgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWRCYXNlNjRFbmNvZGVkQWRkcmVzcyA9IHlpZWxkIGNvbmZpZy5hZGRyZXNzU2VsZWN0b3Iuc2VsZWN0KGFjY291bnRzLm1hcCgoeyBwdWJsaWNLZXkgfSkgPT4gZnJvbVVpbnQ4QXJyYXkocHVibGljS2V5KSkpO1xuICAgICAgICAgICAgcmV0dXJuIChfYSA9IGFjY291bnRzLmZpbmQoKHsgcHVibGljS2V5IH0pID0+IGZyb21VaW50OEFycmF5KHB1YmxpY0tleSkgPT09IHNlbGVjdGVkQmFzZTY0RW5jb2RlZEFkZHJlc3MpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBhY2NvdW50c1swXTtcbiAgICAgICAgfSksIFwiZlwiKTtcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfd2FsbGV0LCB3YWxsZXQsIFwiZlwiKTtcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfd2FsbGV0LCBcImZcIikuZmVhdHVyZXNbU3RhbmRhcmRFdmVudHNdLm9uKCdjaGFuZ2UnLCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9oYW5kbGVDaGFuZ2VFdmVudCwgXCJmXCIpKTtcbiAgICAgICAgdGhpcy5uYW1lID0gX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfd2FsbGV0LCBcImZcIikubmFtZTtcbiAgICAgICAgdGhpcy5pY29uID0gX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfd2FsbGV0LCBcImZcIikuaWNvbjtcbiAgICAgICAgdGhpcy51cmwgPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl93YWxsZXQsIFwiZlwiKS51cmw7XG4gICAgICAgIC8vIFRPRE86IGV2YWx1YXRlIGlmIHRoaXMgbG9naWMgc2hvdWxkIGJlIGtlcHQgLSBpdCBzZWVtcyB0byBjcmVhdGUgYSBuYXN0eSBidWcgd2hlcmUgXG4gICAgICAgIC8vICB0aGUgd2FsbGV0IHRyaWVzIHRvIGF1dG8gY29ubmVjdCBvbiBwYWdlIGxvYWQgYW5kIGdldHMgYmxvY2tlZCBieSB0aGUgcG9wdXAgYmxvY2tlclxuICAgICAgICAvLyBpZiAodGhpcy4jcmVhZHlTdGF0ZSAhPT0gV2FsbGV0UmVhZHlTdGF0ZS5VbnN1cHBvcnRlZCkge1xuICAgICAgICAvLyAgICAgY29uZmlnLmF1dGhvcml6YXRpb25SZXN1bHRDYWNoZS5nZXQoKS50aGVuKChhdXRob3JpemF0aW9uUmVzdWx0KSA9PiB7XG4gICAgICAgIC8vICAgICAgICAgaWYgKGF1dGhvcml6YXRpb25SZXN1bHQpIHtcbiAgICAgICAgLy8gICAgICAgICAgICAgLy8gSGF2aW5nIGEgcHJpb3IgYXV0aG9yaXphdGlvbiByZXN1bHQgaXMsIHJpZ2h0IG5vdywgdGhlIGJlc3RcbiAgICAgICAgLy8gICAgICAgICAgICAgLy8gaW5kaWNhdGlvbiB0aGF0IGEgbW9iaWxlIHdhbGxldCBpcyBpbnN0YWxsZWQuIFRoZXJlIGlzIG5vIEFQSVxuICAgICAgICAvLyAgICAgICAgICAgICAvLyB3ZSBjYW4gdXNlIHRvIHRlc3QgZm9yIHdoZXRoZXIgdGhlIGFzc29jaWF0aW9uIFVSSSBpcyBzdXBwb3J0ZWQuXG4gICAgICAgIC8vICAgICAgICAgICAgIHRoaXMuI2RlY2xhcmVXYWxsZXRBc0luc3RhbGxlZCgpO1xuICAgICAgICAvLyAgICAgICAgIH1cbiAgICAgICAgLy8gICAgIH0pO1xuICAgICAgICAvLyB9XG4gICAgfVxuICAgIGdldCBwdWJsaWNLZXkoKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgaWYgKCFfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9wdWJsaWNLZXksIFwiZlwiKSAmJiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9zZWxlY3RlZEFjY291bnQsIFwiZlwiKSkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9wdWJsaWNLZXksIG5ldyBQdWJsaWNLZXkoX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfc2VsZWN0ZWRBY2NvdW50LCBcImZcIikucHVibGljS2V5KSwgXCJmXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgV2FsbGV0UHVibGljS2V5RXJyb3IoKGUgaW5zdGFuY2VvZiBFcnJvciAmJiAoZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlLm1lc3NhZ2UpKSB8fCAnVW5rbm93biBlcnJvcicsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAoX2EgPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9wdWJsaWNLZXksIFwiZlwiKSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbnVsbDtcbiAgICB9XG4gICAgZ2V0IGNvbm5lY3RlZCgpIHtcbiAgICAgICAgcmV0dXJuIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0Jhc2VTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyX3dhbGxldCwgXCJmXCIpLmNvbm5lY3RlZDtcbiAgICB9XG4gICAgZ2V0IGNvbm5lY3RpbmcoKSB7XG4gICAgICAgIHJldHVybiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9jb25uZWN0aW5nLCBcImZcIik7XG4gICAgfVxuICAgIGdldCByZWFkeVN0YXRlKCkge1xuICAgICAgICByZXR1cm4gX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfcmVhZHlTdGF0ZSwgXCJmXCIpO1xuICAgIH1cbiAgICAvKiogQGRlcHJlY2F0ZWQgVXNlIGBhdXRvQ29ubmVjdCgpYCBpbnN0ZWFkLiAqL1xuICAgIGF1dG9Db25uZWN0X0RPX05PVF9VU0VfT1JfWU9VX1dJTExfQkVfRklSRUQoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICByZXR1cm4geWllbGQgdGhpcy5hdXRvQ29ubmVjdCgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgYXV0b0Nvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9pbnN0YW5jZXMsIFwibVwiLCBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfY29ubmVjdCkuY2FsbCh0aGlzLCB0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9pbnN0YW5jZXMsIFwibVwiLCBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfY29ubmVjdCkuY2FsbCh0aGlzKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKiBAZGVwcmVjYXRlZCBVc2UgYGNvbm5lY3QoKWAgb3IgYGF1dG9Db25uZWN0KClgIGluc3RlYWQuICovXG4gICAgcGVyZm9ybUF1dGhvcml6YXRpb24oc2lnbkluUGF5bG9hZCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjYWNoZWRBdXRob3JpemF0aW9uUmVzdWx0ID0geWllbGQgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfd2FsbGV0LCBcImZcIikuY2FjaGVkQXV0aG9yaXphdGlvblJlc3VsdDtcbiAgICAgICAgICAgICAgICBpZiAoY2FjaGVkQXV0aG9yaXphdGlvblJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl93YWxsZXQsIFwiZlwiKS5mZWF0dXJlc1tTdGFuZGFyZENvbm5lY3RdLmNvbm5lY3QoeyBzaWxlbnQ6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYWNoZWRBdXRob3JpemF0aW9uUmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2lnbkluUGF5bG9hZCkge1xuICAgICAgICAgICAgICAgICAgICB5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl93YWxsZXQsIFwiZlwiKS5mZWF0dXJlc1tTb2xhbmFTaWduSW5dLnNpZ25JbihzaWduSW5QYXlsb2FkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl93YWxsZXQsIFwiZlwiKS5mZWF0dXJlc1tTdGFuZGFyZENvbm5lY3RdLmNvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBhdXRob3JpemF0aW9uUmVzdWx0ID0geWllbGQgeWllbGQgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfd2FsbGV0LCBcImZcIikuY2FjaGVkQXV0aG9yaXphdGlvblJlc3VsdDtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXV0aG9yaXphdGlvblJlc3VsdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFdhbGxldENvbm5lY3Rpb25FcnJvcigoZSBpbnN0YW5jZW9mIEVycm9yICYmIGUubWVzc2FnZSkgfHwgJ1Vua25vd24gZXJyb3InLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGRpc2Nvbm5lY3QoKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAvLyByZXR1cm4gYXdhaXQgdGhpcy4jcnVuV2l0aEd1YXJkKHRoaXMuI3dhbGxldC5mZWF0dXJlc1tTdGFuZGFyZERpc2Nvbm5lY3RdLmRpc2Nvbm5lY3QpO1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0Jhc2VTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyX2luc3RhbmNlcywgXCJtXCIsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9ydW5XaXRoR3VhcmQpLmNhbGwodGhpcywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQodGhpcywgX0Jhc2VTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyX2Nvbm5lY3RpbmcsIGZhbHNlLCBcImZcIik7XG4gICAgICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCh0aGlzLCBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfcHVibGljS2V5LCB1bmRlZmluZWQsIFwiZlwiKTtcbiAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9zZWxlY3RlZEFjY291bnQsIHVuZGVmaW5lZCwgXCJmXCIpO1xuICAgICAgICAgICAgICAgIHlpZWxkIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0Jhc2VTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyX3dhbGxldCwgXCJmXCIpLmZlYXR1cmVzW1N0YW5kYXJkRGlzY29ubmVjdF0uZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCgnZGlzY29ubmVjdCcpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2lnbkluKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfaW5zdGFuY2VzLCBcIm1cIiwgX0Jhc2VTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyX3J1bldpdGhHdWFyZCkuY2FsbCh0aGlzLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgICAgIGlmIChfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9yZWFkeVN0YXRlLCBcImZcIikgIT09IFdhbGxldFJlYWR5U3RhdGUuSW5zdGFsbGVkICYmIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0Jhc2VTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyX3JlYWR5U3RhdGUsIFwiZlwiKSAhPT0gV2FsbGV0UmVhZHlTdGF0ZS5Mb2FkYWJsZSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgV2FsbGV0Tm90UmVhZHlFcnJvcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9jb25uZWN0aW5nLCB0cnVlLCBcImZcIik7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0cHV0cyA9IHlpZWxkIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0Jhc2VTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyX3dhbGxldCwgXCJmXCIpLmZlYXR1cmVzW1NvbGFuYVNpZ25Jbl0uc2lnbkluKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgaW5wdXQpLCB7IGRvbWFpbjogKF9hID0gaW5wdXQgPT09IG51bGwgfHwgaW5wdXQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGlucHV0LmRvbWFpbikgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogd2luZG93LmxvY2F0aW9uLmhvc3QgfSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAob3V0cHV0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gb3V0cHV0c1swXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlNpZ24gaW4gZmFpbGVkLCBubyBzaWduIGluIHJlc3VsdCByZXR1cm5lZCBieSB3YWxsZXRcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFdhbGxldENvbm5lY3Rpb25FcnJvcigoZSBpbnN0YW5jZW9mIEVycm9yICYmIGUubWVzc2FnZSkgfHwgJ1Vua25vd24gZXJyb3InLCBlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQodGhpcywgX0Jhc2VTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyX2Nvbm5lY3RpbmcsIGZhbHNlLCBcImZcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2lnbk1lc3NhZ2UobWVzc2FnZSkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0Jhc2VTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyX2luc3RhbmNlcywgXCJtXCIsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9ydW5XaXRoR3VhcmQpLmNhbGwodGhpcywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjY291bnQgPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9pbnN0YW5jZXMsIFwibVwiLCBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfYXNzZXJ0SXNBdXRob3JpemVkKS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dHMgPSB5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl93YWxsZXQsIFwiZlwiKS5mZWF0dXJlc1tTb2xhbmFTaWduTWVzc2FnZV0uc2lnbk1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgYWNjb3VudCwgbWVzc2FnZTogbWVzc2FnZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG91dHB1dHNbMF0uc2lnbmF0dXJlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFdhbGxldFNpZ25NZXNzYWdlRXJyb3IoZXJyb3IgPT09IG51bGwgfHwgZXJyb3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGVycm9yLm1lc3NhZ2UsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZW5kVHJhbnNhY3Rpb24odHJhbnNhY3Rpb24sIGNvbm5lY3Rpb24sIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9pbnN0YW5jZXMsIFwibVwiLCBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfcnVuV2l0aEd1YXJkKS5jYWxsKHRoaXMsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBhY2NvdW50ID0gX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfaW5zdGFuY2VzLCBcIm1cIiwgX0Jhc2VTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyX2Fzc2VydElzQXV0aG9yaXplZCkuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBnZXRUYXJnZXRDb21taXRtZW50KCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRhcmdldENvbW1pdG1lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGNvbm5lY3Rpb24uY29tbWl0bWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NvbmZpcm1lZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZmluYWxpemVkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdwcm9jZXNzZWQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRDb21taXRtZW50ID0gY29ubmVjdGlvbi5jb21taXRtZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRDb21taXRtZW50ID0gJ2ZpbmFsaXplZCc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0UHJlZmxpZ2h0Q29tbWl0bWVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnByZWZsaWdodENvbW1pdG1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdjb25maXJtZWQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2ZpbmFsaXplZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncHJvY2Vzc2VkJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0UHJlZmxpZ2h0Q29tbWl0bWVudCA9IG9wdGlvbnMucHJlZmxpZ2h0Q29tbWl0bWVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSB1bmRlZmluZWQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldFByZWZsaWdodENvbW1pdG1lbnQgPSB0YXJnZXRDb21taXRtZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRQcmVmbGlnaHRDb21taXRtZW50ID0gJ2ZpbmFsaXplZCc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmVmbGlnaHRDb21taXRtZW50U2NvcmUgPSB0YXJnZXRQcmVmbGlnaHRDb21taXRtZW50ID09PSAnZmluYWxpemVkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gMlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogdGFyZ2V0UHJlZmxpZ2h0Q29tbWl0bWVudCA9PT0gJ2NvbmZpcm1lZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAxXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldENvbW1pdG1lbnRTY29yZSA9IHRhcmdldENvbW1pdG1lbnQgPT09ICdmaW5hbGl6ZWQnID8gMiA6IHRhcmdldENvbW1pdG1lbnQgPT09ICdjb25maXJtZWQnID8gMSA6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJlZmxpZ2h0Q29tbWl0bWVudFNjb3JlIDwgdGFyZ2V0Q29tbWl0bWVudFNjb3JlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyB0YXJnZXRQcmVmbGlnaHRDb21taXRtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiB0YXJnZXRDb21taXRtZW50O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChTb2xhbmFTaWduQW5kU2VuZFRyYW5zYWN0aW9uIGluIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0Jhc2VTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyX3dhbGxldCwgXCJmXCIpLmZlYXR1cmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGFpbiA9IGNoYWluT3JDbHVzdGVyVG9DaGFpbklkKF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0Jhc2VTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyX3dhbGxldCwgXCJmXCIpLmN1cnJlbnRBdXRob3JpemF0aW9uLmNoYWluKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IFtzaWduYXR1cmVdID0gKHlpZWxkIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0Jhc2VTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyX3dhbGxldCwgXCJmXCIpLmZlYXR1cmVzW1NvbGFuYVNpZ25BbmRTZW5kVHJhbnNhY3Rpb25dLnNpZ25BbmRTZW5kVHJhbnNhY3Rpb24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjY291bnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb246IHRyYW5zYWN0aW9uLnNlcmlhbGl6ZSgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoYWluOiBjaGFpbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBvcHRpb25zID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBza2lwUHJlZmxpZ2h0OiBvcHRpb25zLnNraXBQcmVmbGlnaHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFJldHJpZXM6IG9wdGlvbnMubWF4UmV0cmllc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKS5tYXAoKChvdXRwdXQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnJvbVVpbnQ4QXJyYXkob3V0cHV0LnNpZ25hdHVyZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2lnbmF0dXJlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgW3NpZ25lZFRyYW5zYWN0aW9uXSA9IHlpZWxkIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0Jhc2VTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyX2luc3RhbmNlcywgXCJtXCIsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9wZXJmb3JtU2lnblRyYW5zYWN0aW9ucykuY2FsbCh0aGlzLCBbdHJhbnNhY3Rpb25dKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc1ZlcnNpb25lZFRyYW5zYWN0aW9uKHNpZ25lZFRyYW5zYWN0aW9uKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB5aWVsZCBjb25uZWN0aW9uLnNlbmRUcmFuc2FjdGlvbihzaWduZWRUcmFuc2FjdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzZXJpYWxpemVkVHJhbnNhY3Rpb24gPSBzaWduZWRUcmFuc2FjdGlvbi5zZXJpYWxpemUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geWllbGQgY29ubmVjdGlvbi5zZW5kUmF3VHJhbnNhY3Rpb24oc2VyaWFsaXplZFRyYW5zYWN0aW9uLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMpLCB7IHByZWZsaWdodENvbW1pdG1lbnQ6IGdldFRhcmdldENvbW1pdG1lbnQoKSB9KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBXYWxsZXRTZW5kVHJhbnNhY3Rpb25FcnJvcihlcnJvciA9PT0gbnVsbCB8fCBlcnJvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXJyb3IubWVzc2FnZSwgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNpZ25UcmFuc2FjdGlvbih0cmFuc2FjdGlvbikge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgcmV0dXJuIHlpZWxkIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0Jhc2VTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyX2luc3RhbmNlcywgXCJtXCIsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9ydW5XaXRoR3VhcmQpLmNhbGwodGhpcywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IFtzaWduZWRUcmFuc2FjdGlvbl0gPSB5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9pbnN0YW5jZXMsIFwibVwiLCBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfcGVyZm9ybVNpZ25UcmFuc2FjdGlvbnMpLmNhbGwodGhpcywgW3RyYW5zYWN0aW9uXSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNpZ25lZFRyYW5zYWN0aW9uO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2lnbkFsbFRyYW5zYWN0aW9ucyh0cmFuc2FjdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9pbnN0YW5jZXMsIFwibVwiLCBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfcnVuV2l0aEd1YXJkKS5jYWxsKHRoaXMsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaWduZWRUcmFuc2FjdGlvbnMgPSB5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9pbnN0YW5jZXMsIFwibVwiLCBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfcGVyZm9ybVNpZ25UcmFuc2FjdGlvbnMpLmNhbGwodGhpcywgdHJhbnNhY3Rpb25zKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2lnbmVkVHJhbnNhY3Rpb25zO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5fQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfd2FsbGV0ID0gbmV3IFdlYWtNYXAoKSwgX0Jhc2VTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyX2Nvbm5lY3RpbmcgPSBuZXcgV2Vha01hcCgpLCBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfcmVhZHlTdGF0ZSA9IG5ldyBXZWFrTWFwKCksIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9hY2NvdW50U2VsZWN0b3IgPSBuZXcgV2Vha01hcCgpLCBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfc2VsZWN0ZWRBY2NvdW50ID0gbmV3IFdlYWtNYXAoKSwgX0Jhc2VTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyX3B1YmxpY0tleSA9IG5ldyBXZWFrTWFwKCksIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9oYW5kbGVDaGFuZ2VFdmVudCA9IG5ldyBXZWFrTWFwKCksIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9pbnN0YW5jZXMgPSBuZXcgV2Vha1NldCgpLCBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfY29ubmVjdCA9IGZ1bmN0aW9uIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9jb25uZWN0KGF1dG9Db25uZWN0ID0gZmFsc2UpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICBpZiAodGhpcy5jb25uZWN0aW5nIHx8IHRoaXMuY29ubmVjdGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHlpZWxkIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0Jhc2VTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyX2luc3RhbmNlcywgXCJtXCIsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9ydW5XaXRoR3VhcmQpLmNhbGwodGhpcywgKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgaWYgKF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0Jhc2VTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyX3JlYWR5U3RhdGUsIFwiZlwiKSAhPT0gV2FsbGV0UmVhZHlTdGF0ZS5JbnN0YWxsZWQgJiYgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfcmVhZHlTdGF0ZSwgXCJmXCIpICE9PSBXYWxsZXRSZWFkeVN0YXRlLkxvYWRhYmxlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFdhbGxldE5vdFJlYWR5RXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQodGhpcywgX0Jhc2VTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyX2Nvbm5lY3RpbmcsIHRydWUsIFwiZlwiKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgeWllbGQgX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfd2FsbGV0LCBcImZcIikuZmVhdHVyZXNbU3RhbmRhcmRDb25uZWN0XS5jb25uZWN0KHsgc2lsZW50OiBhdXRvQ29ubmVjdCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFdhbGxldENvbm5lY3Rpb25FcnJvcigoZSBpbnN0YW5jZW9mIEVycm9yICYmIGUubWVzc2FnZSkgfHwgJ1Vua25vd24gZXJyb3InLCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQodGhpcywgX0Jhc2VTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyX2Nvbm5lY3RpbmcsIGZhbHNlLCBcImZcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICB9KTtcbn0sIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9kZWNsYXJlV2FsbGV0QXNJbnN0YWxsZWQgPSBmdW5jdGlvbiBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfZGVjbGFyZVdhbGxldEFzSW5zdGFsbGVkKCkge1xuICAgIGlmIChfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9yZWFkeVN0YXRlLCBcImZcIikgIT09IFdhbGxldFJlYWR5U3RhdGUuSW5zdGFsbGVkKSB7XG4gICAgICAgIHRoaXMuZW1pdCgncmVhZHlTdGF0ZUNoYW5nZScsIChfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9yZWFkeVN0YXRlLCBXYWxsZXRSZWFkeVN0YXRlLkluc3RhbGxlZCwgXCJmXCIpKSk7XG4gICAgfVxufSwgX0Jhc2VTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyX2Fzc2VydElzQXV0aG9yaXplZCA9IGZ1bmN0aW9uIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9hc3NlcnRJc0F1dGhvcml6ZWQoKSB7XG4gICAgaWYgKCFfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KHRoaXMsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl93YWxsZXQsIFwiZlwiKS5pc0F1dGhvcml6ZWQgfHwgIV9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0Jhc2VTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyX3NlbGVjdGVkQWNjb3VudCwgXCJmXCIpKVxuICAgICAgICB0aHJvdyBuZXcgV2FsbGV0Tm90Q29ubmVjdGVkRXJyb3IoKTtcbiAgICByZXR1cm4gX19jbGFzc1ByaXZhdGVGaWVsZEdldCh0aGlzLCBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfc2VsZWN0ZWRBY2NvdW50LCBcImZcIik7XG59LCBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfcGVyZm9ybVNpZ25UcmFuc2FjdGlvbnMgPSBmdW5jdGlvbiBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfcGVyZm9ybVNpZ25UcmFuc2FjdGlvbnModHJhbnNhY3Rpb25zKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgY29uc3QgYWNjb3VudCA9IF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0Jhc2VTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyX2luc3RhbmNlcywgXCJtXCIsIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9hc3NlcnRJc0F1dGhvcml6ZWQpLmNhbGwodGhpcyk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoU29sYW5hU2lnblRyYW5zYWN0aW9uIGluIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0Jhc2VTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyX3dhbGxldCwgXCJmXCIpLmZlYXR1cmVzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX0Jhc2VTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyX3dhbGxldCwgXCJmXCIpLmZlYXR1cmVzW1NvbGFuYVNpZ25UcmFuc2FjdGlvbl0uc2lnblRyYW5zYWN0aW9uKC4uLnRyYW5zYWN0aW9ucy5tYXAoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7IGFjY291bnQsIHRyYW5zYWN0aW9uOiB2YWx1ZS5zZXJpYWxpemUoKSB9O1xuICAgICAgICAgICAgICAgIH0pKS50aGVuKChvdXRwdXRzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvdXRwdXRzLm1hcCgob3V0cHV0KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBieXRlQXJyYXkgPSBvdXRwdXQuc2lnbmVkVHJhbnNhY3Rpb247XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBudW1TaWduYXR1cmVzID0gYnl0ZUFycmF5WzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZU9mZnNldCA9IG51bVNpZ25hdHVyZXMgKiBTSUdOQVRVUkVfTEVOR1RIX0lOX0JZVEVTICsgMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZlcnNpb24gPSBWZXJzaW9uZWRNZXNzYWdlLmRlc2VyaWFsaXplTWVzc2FnZVZlcnNpb24oYnl0ZUFycmF5LnNsaWNlKG1lc3NhZ2VPZmZzZXQsIGJ5dGVBcnJheS5sZW5ndGgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2ZXJzaW9uID09PSAnbGVnYWN5Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBUcmFuc2FjdGlvbi5mcm9tKGJ5dGVBcnJheSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gVmVyc2lvbmVkVHJhbnNhY3Rpb24uZGVzZXJpYWxpemUoYnl0ZUFycmF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nvbm5lY3RlZCB3YWxsZXQgZG9lcyBub3Qgc3VwcG9ydCBzaWduaW5nIHRyYW5zYWN0aW9ucycpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFdhbGxldFNpZ25UcmFuc2FjdGlvbkVycm9yKGVycm9yID09PSBudWxsIHx8IGVycm9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlcnJvci5tZXNzYWdlLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICB9KTtcbn0sIF9CYXNlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcl9ydW5XaXRoR3VhcmQgPSBmdW5jdGlvbiBfQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJfcnVuV2l0aEd1YXJkKGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHJldHVybiB5aWVsZCBjYWxsYmFjaygpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICB0aGlzLmVtaXQoJ2Vycm9yJywgZSk7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuY2xhc3MgTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyIGV4dGVuZHMgQmFzZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IGNoYWluID0gY2hhaW5PckNsdXN0ZXJUb0NoYWluSWQoKF9hID0gY29uZmlnLmNoYWluKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBjb25maWcuY2x1c3Rlcik7XG4gICAgICAgIHN1cGVyKG5ldyBMb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXQoe1xuICAgICAgICAgICAgYXBwSWRlbnRpdHk6IGNvbmZpZy5hcHBJZGVudGl0eSxcbiAgICAgICAgICAgIGF1dGhvcml6YXRpb25DYWNoZToge1xuICAgICAgICAgICAgICAgIHNldDogY29uZmlnLmF1dGhvcml6YXRpb25SZXN1bHRDYWNoZS5zZXQsXG4gICAgICAgICAgICAgICAgZ2V0OiAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB5aWVsZCBjb25maWcuYXV0aG9yaXphdGlvblJlc3VsdENhY2hlLmdldCgpO1xuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGNsZWFyOiBjb25maWcuYXV0aG9yaXphdGlvblJlc3VsdENhY2hlLmNsZWFyLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNoYWluczogW2NoYWluXSxcbiAgICAgICAgICAgIGNoYWluU2VsZWN0b3I6IGNyZWF0ZURlZmF1bHRDaGFpblNlbGVjdG9yKCksXG4gICAgICAgICAgICBvbldhbGxldE5vdEZvdW5kOiAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgY29uZmlnLm9uV2FsbGV0Tm90Rm91bmQodGhpcyk7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfSksIHtcbiAgICAgICAgICAgIGFkZHJlc3NTZWxlY3RvcjogY29uZmlnLmFkZHJlc3NTZWxlY3RvcixcbiAgICAgICAgICAgIGNoYWluOiBjaGFpbixcbiAgICAgICAgfSk7XG4gICAgfVxufVxuY2xhc3MgUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlciBleHRlbmRzIEJhc2VTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgY29uc3QgY2hhaW4gPSBjaGFpbk9yQ2x1c3RlclRvQ2hhaW5JZChjb25maWcuY2hhaW4pO1xuICAgICAgICBzdXBlcihuZXcgUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldCh7XG4gICAgICAgICAgICBhcHBJZGVudGl0eTogY29uZmlnLmFwcElkZW50aXR5LFxuICAgICAgICAgICAgYXV0aG9yaXphdGlvbkNhY2hlOiB7XG4gICAgICAgICAgICAgICAgc2V0OiBjb25maWcuYXV0aG9yaXphdGlvblJlc3VsdENhY2hlLnNldCxcbiAgICAgICAgICAgICAgICBnZXQ6ICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHlpZWxkIGNvbmZpZy5hdXRob3JpemF0aW9uUmVzdWx0Q2FjaGUuZ2V0KCk7XG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgY2xlYXI6IGNvbmZpZy5hdXRob3JpemF0aW9uUmVzdWx0Q2FjaGUuY2xlYXIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2hhaW5zOiBbY2hhaW5dLFxuICAgICAgICAgICAgY2hhaW5TZWxlY3RvcjogY3JlYXRlRGVmYXVsdENoYWluU2VsZWN0b3IoKSxcbiAgICAgICAgICAgIHJlbW90ZUhvc3RBdXRob3JpdHk6IGNvbmZpZy5yZW1vdGVIb3N0QXV0aG9yaXR5LFxuICAgICAgICAgICAgb25XYWxsZXROb3RGb3VuZDogKCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGNvbmZpZy5vbldhbGxldE5vdEZvdW5kKHRoaXMpO1xuICAgICAgICAgICAgfSksXG4gICAgICAgIH0pLCB7XG4gICAgICAgICAgICBhZGRyZXNzU2VsZWN0b3I6IGNvbmZpZy5hZGRyZXNzU2VsZWN0b3IsXG4gICAgICAgICAgICBjaGFpbjogY2hhaW4sXG4gICAgICAgIH0pO1xuICAgIH1cbn1cbmNsYXNzIFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXIgZXh0ZW5kcyBMb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXIge1xufVxuXG5mdW5jdGlvbiBjcmVhdGVEZWZhdWx0QWRkcmVzc1NlbGVjdG9yKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHNlbGVjdChhZGRyZXNzZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGFkZHJlc3Nlc1swXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZURlZmF1bHRBdXRob3JpemF0aW9uUmVzdWx0Q2FjaGUoKSB7XG4gICAgcmV0dXJuIGNyZWF0ZURlZmF1bHRBdXRob3JpemF0aW9uQ2FjaGUoKTtcbn1cblxuZnVuY3Rpb24gZGVmYXVsdFdhbGxldE5vdEZvdW5kSGFuZGxlcihtb2JpbGVXYWxsZXRBZGFwdGVyKSB7XG4gICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRFcnJvck1vZGFsV2FsbGV0Tm90Rm91bmRIYW5kbGVyKCk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBjcmVhdGVEZWZhdWx0V2FsbGV0Tm90Rm91bmRIYW5kbGVyKCkge1xuICAgIHJldHVybiBkZWZhdWx0V2FsbGV0Tm90Rm91bmRIYW5kbGVyO1xufVxuXG5leHBvcnQgeyBMb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXIsIFJlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXIsIFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXIsIFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJSZW1vdGVXYWxsZXROYW1lLCBTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0TmFtZSwgY3JlYXRlRGVmYXVsdEFkZHJlc3NTZWxlY3RvciwgY3JlYXRlRGVmYXVsdEF1dGhvcml6YXRpb25SZXN1bHRDYWNoZSwgY3JlYXRlRGVmYXVsdFdhbGxldE5vdEZvdW5kSGFuZGxlciB9O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@solana-mobile+wallet-adapter-mobile@2.2.5_@solana+web3.js@1.98.4_bufferutil@4.0.9_type_5416218e448667e34cd068afdaf6f68f/node_modules/@solana-mobile/wallet-adapter-mobile/lib/esm/index.js\n");

/***/ })

};
;