"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@solana-mobile+wallet-standard-mobile@0.4.3_@solana+wallet-adapter-base@0.9.27_@solana+_2ad14e9b2dc4e821dfae321f0eb6a4a9";
exports.ids = ["vendor-chunks/@solana-mobile+wallet-standard-mobile@0.4.3_@solana+wallet-adapter-base@0.9.27_@solana+_2ad14e9b2dc4e821dfae321f0eb6a4a9"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@solana-mobile+wallet-standard-mobile@0.4.3_@solana+wallet-adapter-base@0.9.27_@solana+_2ad14e9b2dc4e821dfae321f0eb6a4a9/node_modules/@solana-mobile/wallet-standard-mobile/lib/esm/index.js":
/*!*************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@solana-mobile+wallet-standard-mobile@0.4.3_@solana+wallet-adapter-base@0.9.27_@solana+_2ad14e9b2dc4e821dfae321f0eb6a4a9/node_modules/@solana-mobile/wallet-standard-mobile/lib/esm/index.js ***!
  \*************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LocalSolanaMobileWalletAdapterWallet: () => (/* binding */ LocalSolanaMobileWalletAdapterWallet),\n/* harmony export */   RemoteSolanaMobileWalletAdapterWallet: () => (/* binding */ RemoteSolanaMobileWalletAdapterWallet),\n/* harmony export */   SolanaMobileWalletAdapterRemoteWalletName: () => (/* binding */ SolanaMobileWalletAdapterRemoteWalletName),\n/* harmony export */   SolanaMobileWalletAdapterWalletName: () => (/* binding */ SolanaMobileWalletAdapterWalletName),\n/* harmony export */   createDefaultAuthorizationCache: () => (/* binding */ createDefaultAuthorizationCache),\n/* harmony export */   createDefaultChainSelector: () => (/* binding */ createDefaultChainSelector),\n/* harmony export */   createDefaultWalletNotFoundHandler: () => (/* binding */ createDefaultWalletNotFoundHandler),\n/* harmony export */   defaultErrorModalWalletNotFoundHandler: () => (/* binding */ defaultErrorModalWalletNotFoundHandler),\n/* harmony export */   registerMwa: () => (/* binding */ registerMwa)\n/* harmony export */ });\n/* harmony import */ var _solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @solana/wallet-standard-features */ \"(ssr)/./node_modules/.pnpm/@solana+wallet-standard-features@1.3.0/node_modules/@solana/wallet-standard-features/lib/esm/signAndSendTransaction.js\");\n/* harmony import */ var _solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @solana/wallet-standard-features */ \"(ssr)/./node_modules/.pnpm/@solana+wallet-standard-features@1.3.0/node_modules/@solana/wallet-standard-features/lib/esm/signTransaction.js\");\n/* harmony import */ var _solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @solana/wallet-standard-features */ \"(ssr)/./node_modules/.pnpm/@solana+wallet-standard-features@1.3.0/node_modules/@solana/wallet-standard-features/lib/esm/signMessage.js\");\n/* harmony import */ var _solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @solana/wallet-standard-features */ \"(ssr)/./node_modules/.pnpm/@solana+wallet-standard-features@1.3.0/node_modules/@solana/wallet-standard-features/lib/esm/signIn.js\");\n/* harmony import */ var qrcode__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! qrcode */ \"(ssr)/./node_modules/.pnpm/qrcode@1.5.4/node_modules/qrcode/lib/index.js\");\n/* harmony import */ var _solana_mobile_mobile_wallet_adapter_protocol__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @solana-mobile/mobile-wallet-adapter-protocol */ \"(ssr)/./node_modules/.pnpm/@solana-mobile+mobile-wallet-adapter-protocol@2.2.5_@solana+wallet-adapter-base@0.9.27__d8ff7a9cc6437b4a4e3116d7b3468f3e/node_modules/@solana-mobile/mobile-wallet-adapter-protocol/lib/esm/index.js\");\n/* harmony import */ var _wallet_standard_features__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @wallet-standard/features */ \"(ssr)/./node_modules/.pnpm/@wallet-standard+features@1.1.0/node_modules/@wallet-standard/features/lib/esm/connect.js\");\n/* harmony import */ var _wallet_standard_features__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @wallet-standard/features */ \"(ssr)/./node_modules/.pnpm/@wallet-standard+features@1.1.0/node_modules/@wallet-standard/features/lib/esm/disconnect.js\");\n/* harmony import */ var _wallet_standard_features__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @wallet-standard/features */ \"(ssr)/./node_modules/.pnpm/@wallet-standard+features@1.1.0/node_modules/@wallet-standard/features/lib/esm/events.js\");\n/* harmony import */ var bs58__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! bs58 */ \"(ssr)/./node_modules/.pnpm/bs58@5.0.0/node_modules/bs58/index.js\");\n/* harmony import */ var _solana_wallet_standard_chains__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @solana/wallet-standard-chains */ \"(ssr)/./node_modules/.pnpm/@solana+wallet-standard-chains@1.1.1/node_modules/@solana/wallet-standard-chains/lib/esm/index.js\");\n\n\n\n\n\n\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __classPrivateFieldGet$1(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nfunction __classPrivateFieldSet$1(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\n\nvar _EmbeddedModal_instances, _EmbeddedModal_root, _EmbeddedModal_eventListeners, _EmbeddedModal_listenersAttached, _EmbeddedModal_injectHTML, _EmbeddedModal_attachEventListeners, _EmbeddedModal_removeEventListeners, _EmbeddedModal_handleKeyDown;\nconst modalHtml = `\n<div class=\"mobile-wallet-adapter-embedded-modal-container\" role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"modal-title\">\n    <div data-modal-close style=\"position: absolute; width: 100%; height: 100%;\"></div>\n\t<div class=\"mobile-wallet-adapter-embedded-modal-card\">\n\t\t<div>\n\t\t\t<button data-modal-close class=\"mobile-wallet-adapter-embedded-modal-close\">\n\t\t\t\t<svg width=\"14\" height=\"14\">\n\t\t\t\t\t<path d=\"M 6.7125,8.3036995 1.9082,13.108199 c -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 C 0.1056,12.896899 0,12.631699 0,12.312499 c 0,-0.3192 0.1056,-0.5844 0.3167,-0.7958 L 5.1212,6.7124995 0.3167,1.9082 C 0.1056,1.6969 0,1.4317 0,1.1125 0,0.7933 0.1056,0.5281 0.3167,0.3167 0.5281,0.1056 0.7933,0 1.1125,0 1.4317,0 1.6969,0.1056 1.9082,0.3167 L 6.7125,5.1212 11.5167,0.3167 C 11.7281,0.1056 11.9933,0 12.3125,0 c 0.3192,0 0.5844,0.1056 0.7957,0.3167 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 L 8.3037001,6.7124995 13.1082,11.516699 c 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 z\" />\n\t\t\t\t</svg>\n\t\t\t</button>\n\t\t</div>\n\t\t<div class=\"mobile-wallet-adapter-embedded-modal-content\"></div>\n\t</div>\n</div>\n`;\nconst css$2 = `\n.mobile-wallet-adapter-embedded-modal-container {\n    display: flex; /* Use flexbox to center content */\n    justify-content: center; /* Center horizontally */\n    align-items: center; /* Center vertically */\n    position: fixed; /* Stay in place */\n    z-index: 1; /* Sit on top */\n    left: 0;\n    top: 0;\n    width: 100%; /* Full width */\n    height: 100%; /* Full height */\n    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */\n    overflow-y: auto; /* enable scrolling */\n}\n\n.mobile-wallet-adapter-embedded-modal-card {\n    display: flex;\n    flex-direction: column;\n    margin: auto 20px;\n    max-width: 780px;\n    padding: 20px;\n    border-radius: 24px;\n    background: #ffffff;\n    font-family: \"Inter Tight\", \"PT Sans\", Calibri, sans-serif;\n    transform: translateY(-200%);\n    animation: slide-in 0.5s forwards;\n}\n\n@keyframes slide-in {\n    100% { transform: translateY(0%); }\n}\n\n.mobile-wallet-adapter-embedded-modal-close {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 32px;\n    height: 32px;\n    cursor: pointer;\n    background: #e4e9e9;\n    border: none;\n    border-radius: 50%;\n}\n\n.mobile-wallet-adapter-embedded-modal-close:focus-visible {\n    outline-color: red;\n}\n\n.mobile-wallet-adapter-embedded-modal-close svg {\n    fill: #546266;\n    transition: fill 200ms ease 0s;\n}\n\n.mobile-wallet-adapter-embedded-modal-close:hover svg {\n    fill: #fff;\n}\n`;\nconst fonts = `\n<link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n<link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n<link href=\"https://fonts.googleapis.com/css2?family=Inter+Tight:ital,wght@0,100..900;1,100..900&display=swap\" rel=\"stylesheet\">\n`;\nclass EmbeddedModal {\n    constructor() {\n        _EmbeddedModal_instances.add(this);\n        _EmbeddedModal_root.set(this, null);\n        _EmbeddedModal_eventListeners.set(this, {});\n        _EmbeddedModal_listenersAttached.set(this, false);\n        this.dom = null;\n        this.open = () => {\n            console.debug('Modal open');\n            __classPrivateFieldGet$1(this, _EmbeddedModal_instances, \"m\", _EmbeddedModal_attachEventListeners).call(this);\n            if (__classPrivateFieldGet$1(this, _EmbeddedModal_root, \"f\")) {\n                __classPrivateFieldGet$1(this, _EmbeddedModal_root, \"f\").style.display = 'flex';\n            }\n        };\n        this.close = (event = undefined) => {\n            var _a;\n            console.debug('Modal close');\n            __classPrivateFieldGet$1(this, _EmbeddedModal_instances, \"m\", _EmbeddedModal_removeEventListeners).call(this);\n            if (__classPrivateFieldGet$1(this, _EmbeddedModal_root, \"f\")) {\n                __classPrivateFieldGet$1(this, _EmbeddedModal_root, \"f\").style.display = 'none';\n            }\n            (_a = __classPrivateFieldGet$1(this, _EmbeddedModal_eventListeners, \"f\")['close']) === null || _a === void 0 ? void 0 : _a.forEach((listener) => listener(event));\n        };\n        _EmbeddedModal_handleKeyDown.set(this, (event) => {\n            if (event.key === 'Escape')\n                this.close(event);\n        });\n        // Bind methods to ensure `this` context is correct\n        this.init = this.init.bind(this);\n        __classPrivateFieldSet$1(this, _EmbeddedModal_root, document.getElementById('mobile-wallet-adapter-embedded-root-ui'), \"f\");\n    }\n    init() {\n        return __awaiter(this, void 0, void 0, function* () {\n            console.log('Injecting modal');\n            __classPrivateFieldGet$1(this, _EmbeddedModal_instances, \"m\", _EmbeddedModal_injectHTML).call(this);\n        });\n    }\n    addEventListener(event, listener) {\n        var _a;\n        ((_a = __classPrivateFieldGet$1(this, _EmbeddedModal_eventListeners, \"f\")[event]) === null || _a === void 0 ? void 0 : _a.push(listener)) || (__classPrivateFieldGet$1(this, _EmbeddedModal_eventListeners, \"f\")[event] = [listener]);\n        return () => this.removeEventListener(event, listener);\n    }\n    removeEventListener(event, listener) {\n        var _a;\n        __classPrivateFieldGet$1(this, _EmbeddedModal_eventListeners, \"f\")[event] = (_a = __classPrivateFieldGet$1(this, _EmbeddedModal_eventListeners, \"f\")[event]) === null || _a === void 0 ? void 0 : _a.filter((existingListener) => listener !== existingListener);\n    }\n}\n_EmbeddedModal_root = new WeakMap(), _EmbeddedModal_eventListeners = new WeakMap(), _EmbeddedModal_listenersAttached = new WeakMap(), _EmbeddedModal_handleKeyDown = new WeakMap(), _EmbeddedModal_instances = new WeakSet(), _EmbeddedModal_injectHTML = function _EmbeddedModal_injectHTML() {\n    // Check if the HTML has already been injected\n    if (document.getElementById('mobile-wallet-adapter-embedded-root-ui')) {\n        if (!__classPrivateFieldGet$1(this, _EmbeddedModal_root, \"f\"))\n            __classPrivateFieldSet$1(this, _EmbeddedModal_root, document.getElementById('mobile-wallet-adapter-embedded-root-ui'), \"f\");\n        return;\n    }\n    // Create a container for the modal\n    __classPrivateFieldSet$1(this, _EmbeddedModal_root, document.createElement('div'), \"f\");\n    __classPrivateFieldGet$1(this, _EmbeddedModal_root, \"f\").id = 'mobile-wallet-adapter-embedded-root-ui';\n    __classPrivateFieldGet$1(this, _EmbeddedModal_root, \"f\").innerHTML = modalHtml;\n    __classPrivateFieldGet$1(this, _EmbeddedModal_root, \"f\").style.display = 'none';\n    // Add modal content\n    const content = __classPrivateFieldGet$1(this, _EmbeddedModal_root, \"f\").querySelector('.mobile-wallet-adapter-embedded-modal-content');\n    if (content)\n        content.innerHTML = this.contentHtml;\n    // Apply styles\n    const styles = document.createElement('style');\n    styles.id = 'mobile-wallet-adapter-embedded-modal-styles';\n    styles.textContent = css$2 + this.contentStyles;\n    // Create a shadow DOM to encapsulate the modal\n    const host = document.createElement('div');\n    host.innerHTML = fonts;\n    this.dom = host.attachShadow({ mode: 'closed' });\n    this.dom.appendChild(styles);\n    this.dom.appendChild(__classPrivateFieldGet$1(this, _EmbeddedModal_root, \"f\"));\n    // Append the shadow DOM host to the body\n    document.body.appendChild(host);\n}, _EmbeddedModal_attachEventListeners = function _EmbeddedModal_attachEventListeners() {\n    if (!__classPrivateFieldGet$1(this, _EmbeddedModal_root, \"f\") || __classPrivateFieldGet$1(this, _EmbeddedModal_listenersAttached, \"f\"))\n        return;\n    const closers = [...__classPrivateFieldGet$1(this, _EmbeddedModal_root, \"f\").querySelectorAll('[data-modal-close]')];\n    closers.forEach(closer => closer === null || closer === void 0 ? void 0 : closer.addEventListener('click', this.close));\n    window.addEventListener('load', this.close);\n    document.addEventListener('keydown', __classPrivateFieldGet$1(this, _EmbeddedModal_handleKeyDown, \"f\"));\n    __classPrivateFieldSet$1(this, _EmbeddedModal_listenersAttached, true, \"f\");\n}, _EmbeddedModal_removeEventListeners = function _EmbeddedModal_removeEventListeners() {\n    if (!__classPrivateFieldGet$1(this, _EmbeddedModal_listenersAttached, \"f\"))\n        return;\n    window.removeEventListener('load', this.close);\n    document.removeEventListener('keydown', __classPrivateFieldGet$1(this, _EmbeddedModal_handleKeyDown, \"f\"));\n    if (!__classPrivateFieldGet$1(this, _EmbeddedModal_root, \"f\"))\n        return;\n    const closers = [...__classPrivateFieldGet$1(this, _EmbeddedModal_root, \"f\").querySelectorAll('[data-modal-close]')];\n    closers.forEach(closer => closer === null || closer === void 0 ? void 0 : closer.removeEventListener('click', this.close));\n    __classPrivateFieldSet$1(this, _EmbeddedModal_listenersAttached, false, \"f\");\n};\n\nclass RemoteConnectionModal extends EmbeddedModal {\n    constructor() {\n        super(...arguments);\n        this.contentStyles = css$1;\n        this.contentHtml = QRCodeHtml;\n    }\n    initWithQR(qrCode) {\n        const _super = Object.create(null, {\n            init: { get: () => super.init }\n        });\n        return __awaiter(this, void 0, void 0, function* () {\n            _super.init.call(this);\n            this.populateQRCode(qrCode);\n        });\n    }\n    populateQRCode(qrUrl) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const qrcodeContainer = (_a = this.dom) === null || _a === void 0 ? void 0 : _a.getElementById('mobile-wallet-adapter-embedded-modal-qr-code-container');\n            if (qrcodeContainer) {\n                const qrCodeElement = yield qrcode__WEBPACK_IMPORTED_MODULE_0__.toCanvas(qrUrl, { width: 200, margin: 0 });\n                if (qrcodeContainer.firstElementChild !== null) {\n                    qrcodeContainer.replaceChild(qrCodeElement, qrcodeContainer.firstElementChild);\n                }\n                else\n                    qrcodeContainer.appendChild(qrCodeElement);\n            }\n            else {\n                console.error('QRCode Container not found');\n            }\n        });\n    }\n}\nconst QRCodeHtml = `\n<div class=\"mobile-wallet-adapter-embedded-modal-qr-content\">\n    <div>\n        <svg class=\"mobile-wallet-adapter-embedded-modal-icon\" width=\"100%\" height=\"100%\">\n            <circle r=\"52\" cx=\"53\" cy=\"53\" fill=\"#99b3be\" stroke=\"#000000\" stroke-width=\"2\"/>\n            <path d=\"m 53,82.7305 c -3.3116,0 -6.1361,-1.169 -8.4735,-3.507 -2.338,-2.338 -3.507,-5.1625 -3.507,-8.4735 0,-3.3116 1.169,-6.1364 3.507,-8.4744 2.3374,-2.338 5.1619,-3.507 8.4735,-3.507 3.3116,0 6.1361,1.169 8.4735,3.507 2.338,2.338 3.507,5.1628 3.507,8.4744 0,3.311 -1.169,6.1355 -3.507,8.4735 -2.3374,2.338 -5.1619,3.507 -8.4735,3.507 z m 0.007,-5.25 c 1.8532,0 3.437,-0.6598 4.7512,-1.9793 1.3149,-1.3195 1.9723,-2.9058 1.9723,-4.7591 0,-1.8526 -0.6598,-3.4364 -1.9793,-4.7512 -1.3195,-1.3149 -2.9055,-1.9723 -4.7582,-1.9723 -1.8533,0 -3.437,0.6598 -4.7513,1.9793 -1.3148,1.3195 -1.9722,2.9058 -1.9722,4.7591 0,1.8527 0.6597,3.4364 1.9792,4.7512 1.3195,1.3149 2.9056,1.9723 4.7583,1.9723 z m -28,-33.5729 -3.85,-3.6347 c 4.1195,-4.025 8.8792,-7.1984 14.2791,-9.52 5.4005,-2.3223 11.2551,-3.4834 17.5639,-3.4834 6.3087,0 12.1634,1.1611 17.5639,3.4834 5.3999,2.3216 10.1596,5.495 14.2791,9.52 l -3.85,3.6347 C 77.2999,40.358 73.0684,37.5726 68.2985,35.5514 63.5292,33.5301 58.4296,32.5195 53,32.5195 c -5.4297,0 -10.5292,1.0106 -15.2985,3.0319 -4.7699,2.0212 -9.0014,4.8066 -12.6945,8.3562 z m 44.625,10.8771 c -2.2709,-2.1046 -4.7962,-3.7167 -7.5758,-4.8361 -2.7795,-1.12 -5.7983,-1.68 -9.0562,-1.68 -3.2579,0 -6.2621,0.56 -9.0125,1.68 -2.7504,1.1194 -5.2903,2.7315 -7.6195,4.8361 L 32.5189,51.15 c 2.8355,-2.6028 5.9777,-4.6086 9.4263,-6.0174 3.4481,-1.4087 7.133,-2.1131 11.0548,-2.1131 3.9217,0 7.5979,0.7044 11.0285,2.1131 3.43,1.4088 6.5631,3.4146 9.3992,6.0174 z\"/>\n        </svg>\n        <div class=\"mobile-wallet-adapter-embedded-modal-title\">Remote Mobile Wallet Adapter</div>\n    </div>\n    <div>\n        <div>\n            <h4 class=\"mobile-wallet-adapter-embedded-modal-qr-label\">\n                Open your wallet and scan this code\n            </h4>\n        </div>\n        <div id=\"mobile-wallet-adapter-embedded-modal-qr-code-container\" class=\"mobile-wallet-adapter-embedded-modal-qr-code-container\"></div>\n    </div>\n</div>\n<div class=\"mobile-wallet-adapter-embedded-modal-divider\"><hr></div>\n<div class=\"mobile-wallet-adapter-embedded-modal-footer\">\n    <div class=\"mobile-wallet-adapter-embedded-modal-subtitle\">\n        Follow the instructions on your device. When you're finished, this screen will update.\n    </div>\n    <div class=\"mobile-wallet-adapter-embedded-modal-progress-badge\">\n        <div>\n            <div class=\"spinner\">\n                <div class=\"leftWrapper\">\n                    <div class=\"left\">\n                        <div class=\"circle\"></div>\n                    </div>\n                </div>\n                <div class=\"rightWrapper\">\n                    <div class=\"right\">\n                        <div class=\"circle\"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div>Waiting for scan</div>\n    </div>\n</div>\n`;\nconst css$1 = `\n.mobile-wallet-adapter-embedded-modal-qr-content {\n    display: flex; \n    margin-top: 10px;\n    padding: 10px;\n}\n\n.mobile-wallet-adapter-embedded-modal-qr-content > div:first-child {\n    display: flex;\n    flex-direction: column;\n    flex: 2;\n    margin-top: auto;\n    margin-right: 30px;\n}\n\n.mobile-wallet-adapter-embedded-modal-qr-content > div:nth-child(2) {\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n    margin-left: auto;\n}\n\n.mobile-wallet-adapter-embedded-modal-footer {\n    display: flex;\n    padding: 10px;\n}\n\n.mobile-wallet-adapter-embedded-modal-icon {}\n\n.mobile-wallet-adapter-embedded-modal-title {\n    color: #000000;\n    font-size: 2.5em;\n    font-weight: 600;\n}\n\n.mobile-wallet-adapter-embedded-modal-qr-label {\n    text-align: right;\n    color: #000000;\n}\n\n.mobile-wallet-adapter-embedded-modal-qr-code-container {\n    margin-left: auto;\n}\n\n.mobile-wallet-adapter-embedded-modal-divider {\n    margin-top: 20px;\n    padding-left: 10px;\n    padding-right: 10px;\n}\n\n.mobile-wallet-adapter-embedded-modal-divider hr {\n    border-top: 1px solid #D9DEDE;\n}\n\n.mobile-wallet-adapter-embedded-modal-subtitle {\n    margin: auto;\n    margin-right: 60px;\n    padding: 20px;\n    color: #6E8286;\n}\n\n.mobile-wallet-adapter-embedded-modal-progress-badge {\n    display: flex;\n    background: #F7F8F8;\n    height: 56px;\n    min-width: 200px;\n    margin: auto;\n    padding-left: 20px;\n    padding-right: 20px;\n    border-radius: 18px;\n    color: #A8B6B8;\n    align-items: center;\n}\n\n.mobile-wallet-adapter-embedded-modal-progress-badge > div:first-child {\n    margin-left: auto;\n    margin-right: 20px;\n}\n\n.mobile-wallet-adapter-embedded-modal-progress-badge > div:nth-child(2) {\n    margin-right: auto;\n}\n\n/* Smaller screens */\n@media all and (max-width: 600px) {\n    .mobile-wallet-adapter-embedded-modal-card {\n        text-align: center;\n    }\n    .mobile-wallet-adapter-embedded-modal-qr-content {\n        flex-direction: column;\n    }\n    .mobile-wallet-adapter-embedded-modal-qr-content > div:first-child {\n        margin: auto;\n    }\n    .mobile-wallet-adapter-embedded-modal-qr-content > div:nth-child(2) {\n        margin: auto;\n        flex: 2 auto;\n    }\n    .mobile-wallet-adapter-embedded-modal-footer {\n        flex-direction: column;\n    }\n    .mobile-wallet-adapter-embedded-modal-icon {\n        display: none;\n    }\n    .mobile-wallet-adapter-embedded-modal-title {\n        font-size: 1.5em;\n    }\n    .mobile-wallet-adapter-embedded-modal-subtitle {\n        margin-right: unset;\n    }\n    .mobile-wallet-adapter-embedded-modal-qr-label {\n        text-align: center;\n    }\n    .mobile-wallet-adapter-embedded-modal-qr-code-container {\n        margin: auto;\n    }\n}\n\n/* Spinner */\n@keyframes spinLeft {\n    0% {\n        transform: rotate(20deg);\n    }\n    50% {\n        transform: rotate(160deg);\n    }\n    100% {\n        transform: rotate(20deg);\n    }\n}\n@keyframes spinRight {\n    0% {\n        transform: rotate(160deg);\n    }\n    50% {\n        transform: rotate(20deg);\n    }\n    100% {\n        transform: rotate(160deg);\n    }\n}\n@keyframes spin {\n    0% {\n        transform: rotate(0deg);\n    }\n    100% {\n        transform: rotate(2520deg);\n    }\n}\n\n.spinner {\n    position: relative;\n    width: 1.5em;\n    height: 1.5em;\n    margin: auto;\n    animation: spin 10s linear infinite;\n}\n.spinner::before {\n    content: \"\";\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n}\n.right, .rightWrapper, .left, .leftWrapper {\n    position: absolute;\n    top: 0;\n    overflow: hidden;\n    width: .75em;\n    height: 1.5em;\n}\n.left, .leftWrapper {\n    left: 0;\n}\n.right {\n    left: -12px;\n}\n.rightWrapper {\n    right: 0;\n}\n.circle {\n    border: .125em solid #A8B6B8;\n    width: 1.25em; /* 1.5em - 2*0.125em border */\n    height: 1.25em; /* 1.5em - 2*0.125em border */\n    border-radius: 0.75em; /* 0.5*1.5em spinner size 8 */\n}\n.left {\n    transform-origin: 100% 50%;\n    animation: spinLeft 2.5s cubic-bezier(.2,0,.8,1) infinite;\n}\n.right {\n    transform-origin: 100% 50%;\n    animation: spinRight 2.5s cubic-bezier(.2,0,.8,1) infinite;\n}\n`;\n\nconst icon = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDIuNUgxN0MxNy44Mjg0IDIuNSAxOC41IDMuMTcxNTcgMTguNSA0VjIwQzE4LjUgMjAuODI4NCAxNy44Mjg0IDIxLjUgMTcgMjEuNUg3QzYuMTcxNTcgMjEuNSA1LjUgMjAuODI4NCA1LjUgMjBWNEM1LjUgMy4xNzE1NyA2LjE3MTU3IDIuNSA3IDIuNVpNMyA0QzMgMS43OTA4NiA0Ljc5MDg2IDAgNyAwSDE3QzE5LjIwOTEgMCAyMSAxLjc5MDg2IDIxIDRWMjBDMjEgMjIuMjA5MSAxOS4yMDkxIDI0IDE3IDI0SDdDNC43OTA4NiAyNCAzIDIyLjIwOTEgMyAyMFY0Wk0xMSA0LjYxNTM4QzEwLjQ0NzcgNC42MTUzOCAxMCA1LjA2MzEgMTAgNS42MTUzOFY2LjM4NDYyQzEwIDYuOTM2OSAxMC40NDc3IDcuMzg0NjIgMTEgNy4zODQ2MkgxM0MxMy41NTIzIDcuMzg0NjIgMTQgNi45MzY5IDE0IDYuMzg0NjJWNS42MTUzOEMxNCA1LjA2MzEgMTMuNTUyMyA0LjYxNTM4IDEzIDQuNjE1MzhIMTFaIiBmaWxsPSIjRENCOEZGIi8+Cjwvc3ZnPgo=';\n\nfunction fromUint8Array(byteArray) {\n    return window.btoa(String.fromCharCode.call(null, ...byteArray));\n}\nfunction toUint8Array(base64EncodedByteArray) {\n    return new Uint8Array(window\n        .atob(base64EncodedByteArray)\n        .split('')\n        .map((c) => c.charCodeAt(0)));\n}\n\nvar _LocalSolanaMobileWalletAdapterWallet_instances, _LocalSolanaMobileWalletAdapterWallet_listeners, _LocalSolanaMobileWalletAdapterWallet_version, _LocalSolanaMobileWalletAdapterWallet_name, _LocalSolanaMobileWalletAdapterWallet_url, _LocalSolanaMobileWalletAdapterWallet_icon, _LocalSolanaMobileWalletAdapterWallet_appIdentity, _LocalSolanaMobileWalletAdapterWallet_authorization, _LocalSolanaMobileWalletAdapterWallet_authorizationCache, _LocalSolanaMobileWalletAdapterWallet_connecting, _LocalSolanaMobileWalletAdapterWallet_connectionGeneration, _LocalSolanaMobileWalletAdapterWallet_chains, _LocalSolanaMobileWalletAdapterWallet_chainSelector, _LocalSolanaMobileWalletAdapterWallet_optionalFeatures, _LocalSolanaMobileWalletAdapterWallet_onWalletNotFound, _LocalSolanaMobileWalletAdapterWallet_on, _LocalSolanaMobileWalletAdapterWallet_emit, _LocalSolanaMobileWalletAdapterWallet_off, _LocalSolanaMobileWalletAdapterWallet_connect, _LocalSolanaMobileWalletAdapterWallet_performAuthorization, _LocalSolanaMobileWalletAdapterWallet_handleAuthorizationResult, _LocalSolanaMobileWalletAdapterWallet_handleWalletCapabilitiesResult, _LocalSolanaMobileWalletAdapterWallet_performReauthorization, _LocalSolanaMobileWalletAdapterWallet_disconnect, _LocalSolanaMobileWalletAdapterWallet_transact, _LocalSolanaMobileWalletAdapterWallet_assertIsAuthorized, _LocalSolanaMobileWalletAdapterWallet_accountsToWalletStandardAccounts, _LocalSolanaMobileWalletAdapterWallet_performSignTransactions, _LocalSolanaMobileWalletAdapterWallet_performSignAndSendTransaction, _LocalSolanaMobileWalletAdapterWallet_signAndSendTransaction, _LocalSolanaMobileWalletAdapterWallet_signTransaction, _LocalSolanaMobileWalletAdapterWallet_signMessage, _LocalSolanaMobileWalletAdapterWallet_signIn, _LocalSolanaMobileWalletAdapterWallet_performSignIn, _RemoteSolanaMobileWalletAdapterWallet_instances, _RemoteSolanaMobileWalletAdapterWallet_listeners, _RemoteSolanaMobileWalletAdapterWallet_version, _RemoteSolanaMobileWalletAdapterWallet_name, _RemoteSolanaMobileWalletAdapterWallet_url, _RemoteSolanaMobileWalletAdapterWallet_icon, _RemoteSolanaMobileWalletAdapterWallet_appIdentity, _RemoteSolanaMobileWalletAdapterWallet_authorization, _RemoteSolanaMobileWalletAdapterWallet_authorizationCache, _RemoteSolanaMobileWalletAdapterWallet_connecting, _RemoteSolanaMobileWalletAdapterWallet_connectionGeneration, _RemoteSolanaMobileWalletAdapterWallet_chains, _RemoteSolanaMobileWalletAdapterWallet_chainSelector, _RemoteSolanaMobileWalletAdapterWallet_optionalFeatures, _RemoteSolanaMobileWalletAdapterWallet_onWalletNotFound, _RemoteSolanaMobileWalletAdapterWallet_hostAuthority, _RemoteSolanaMobileWalletAdapterWallet_session, _RemoteSolanaMobileWalletAdapterWallet_on, _RemoteSolanaMobileWalletAdapterWallet_emit, _RemoteSolanaMobileWalletAdapterWallet_off, _RemoteSolanaMobileWalletAdapterWallet_connect, _RemoteSolanaMobileWalletAdapterWallet_performAuthorization, _RemoteSolanaMobileWalletAdapterWallet_handleAuthorizationResult, _RemoteSolanaMobileWalletAdapterWallet_handleWalletCapabilitiesResult, _RemoteSolanaMobileWalletAdapterWallet_performReauthorization, _RemoteSolanaMobileWalletAdapterWallet_disconnect, _RemoteSolanaMobileWalletAdapterWallet_transact, _RemoteSolanaMobileWalletAdapterWallet_assertIsAuthorized, _RemoteSolanaMobileWalletAdapterWallet_accountsToWalletStandardAccounts, _RemoteSolanaMobileWalletAdapterWallet_performSignTransactions, _RemoteSolanaMobileWalletAdapterWallet_performSignAndSendTransaction, _RemoteSolanaMobileWalletAdapterWallet_signAndSendTransaction, _RemoteSolanaMobileWalletAdapterWallet_signTransaction, _RemoteSolanaMobileWalletAdapterWallet_signMessage, _RemoteSolanaMobileWalletAdapterWallet_signIn, _RemoteSolanaMobileWalletAdapterWallet_performSignIn;\nconst SolanaMobileWalletAdapterWalletName = 'Mobile Wallet Adapter';\nconst SolanaMobileWalletAdapterRemoteWalletName = 'Remote Mobile Wallet Adapter';\nconst SIGNATURE_LENGTH_IN_BYTES = 64;\nconst DEFAULT_FEATURES = [_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_3__.SolanaSignAndSendTransaction, _solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_4__.SolanaSignTransaction, _solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_5__.SolanaSignMessage, _solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_6__.SolanaSignIn];\nclass LocalSolanaMobileWalletAdapterWallet {\n    constructor(config) {\n        _LocalSolanaMobileWalletAdapterWallet_instances.add(this);\n        _LocalSolanaMobileWalletAdapterWallet_listeners.set(this, {});\n        _LocalSolanaMobileWalletAdapterWallet_version.set(this, '1.0.0'); // wallet-standard version\n        _LocalSolanaMobileWalletAdapterWallet_name.set(this, SolanaMobileWalletAdapterWalletName);\n        _LocalSolanaMobileWalletAdapterWallet_url.set(this, 'https://solanamobile.com/wallets');\n        _LocalSolanaMobileWalletAdapterWallet_icon.set(this, icon);\n        _LocalSolanaMobileWalletAdapterWallet_appIdentity.set(this, void 0);\n        _LocalSolanaMobileWalletAdapterWallet_authorization.set(this, void 0);\n        _LocalSolanaMobileWalletAdapterWallet_authorizationCache.set(this, void 0);\n        _LocalSolanaMobileWalletAdapterWallet_connecting.set(this, false);\n        /**\n         * Every time the connection is recycled in some way (eg. `disconnect()` is called)\n         * increment this and use it to make sure that `transact` calls from the previous\n         * 'generation' don't continue to do work and throw exceptions.\n         */\n        _LocalSolanaMobileWalletAdapterWallet_connectionGeneration.set(this, 0);\n        _LocalSolanaMobileWalletAdapterWallet_chains.set(this, []);\n        _LocalSolanaMobileWalletAdapterWallet_chainSelector.set(this, void 0);\n        _LocalSolanaMobileWalletAdapterWallet_optionalFeatures.set(this, void 0);\n        _LocalSolanaMobileWalletAdapterWallet_onWalletNotFound.set(this, void 0);\n        _LocalSolanaMobileWalletAdapterWallet_on.set(this, (event, listener) => {\n            var _a;\n            ((_a = __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_listeners, \"f\")[event]) === null || _a === void 0 ? void 0 : _a.push(listener)) || (__classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_listeners, \"f\")[event] = [listener]);\n            return () => __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_instances, \"m\", _LocalSolanaMobileWalletAdapterWallet_off).call(this, event, listener);\n        });\n        _LocalSolanaMobileWalletAdapterWallet_connect.set(this, ({ silent } = {}) => __awaiter(this, void 0, void 0, function* () {\n            if (__classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_connecting, \"f\") || this.connected) {\n                return { accounts: this.accounts };\n            }\n            __classPrivateFieldSet$1(this, _LocalSolanaMobileWalletAdapterWallet_connecting, true, \"f\");\n            try {\n                if (silent) {\n                    const cachedAuthorization = yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorizationCache, \"f\").get();\n                    if (cachedAuthorization) {\n                        yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_handleWalletCapabilitiesResult, \"f\").call(this, cachedAuthorization.capabilities);\n                        yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_handleAuthorizationResult, \"f\").call(this, cachedAuthorization);\n                    }\n                    else {\n                        return { accounts: this.accounts };\n                    }\n                }\n                else {\n                    yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_performAuthorization, \"f\").call(this);\n                }\n            }\n            catch (e) {\n                throw new Error((e instanceof Error && e.message) || 'Unknown error');\n            }\n            finally {\n                __classPrivateFieldSet$1(this, _LocalSolanaMobileWalletAdapterWallet_connecting, false, \"f\");\n            }\n            return { accounts: this.accounts };\n        }));\n        _LocalSolanaMobileWalletAdapterWallet_performAuthorization.set(this, (signInPayload) => __awaiter(this, void 0, void 0, function* () {\n            try {\n                const cachedAuthorizationResult = yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorizationCache, \"f\").get();\n                if (cachedAuthorizationResult) {\n                    // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n                    __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_handleAuthorizationResult, \"f\").call(this, cachedAuthorizationResult);\n                    return cachedAuthorizationResult;\n                }\n                const selectedChain = yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_chainSelector, \"f\").select(__classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_chains, \"f\"));\n                return yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_transact, \"f\").call(this, (wallet) => __awaiter(this, void 0, void 0, function* () {\n                    const [capabilities, mwaAuthorizationResult] = yield Promise.all([\n                        wallet.getCapabilities(),\n                        wallet.authorize({\n                            chain: selectedChain,\n                            identity: __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_appIdentity, \"f\"),\n                            sign_in_payload: signInPayload,\n                        })\n                    ]);\n                    const accounts = __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_accountsToWalletStandardAccounts, \"f\").call(this, mwaAuthorizationResult.accounts);\n                    const authorization = Object.assign(Object.assign({}, mwaAuthorizationResult), { accounts, chain: selectedChain, capabilities: capabilities });\n                    // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n                    Promise.all([\n                        __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_handleWalletCapabilitiesResult, \"f\").call(this, capabilities),\n                        __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorizationCache, \"f\").set(authorization),\n                        __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_handleAuthorizationResult, \"f\").call(this, authorization),\n                    ]);\n                    return authorization;\n                }));\n            }\n            catch (e) {\n                throw new Error((e instanceof Error && e.message) || 'Unknown error');\n            }\n        }));\n        _LocalSolanaMobileWalletAdapterWallet_handleAuthorizationResult.set(this, (authorization) => __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            const didPublicKeysChange = \n            // Case 1: We started from having no authorization.\n            __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorization, \"f\") == null ||\n                // Case 2: The number of authorized accounts changed.\n                ((_a = __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorization, \"f\")) === null || _a === void 0 ? void 0 : _a.accounts.length) !== authorization.accounts.length ||\n                // Case 3: The new list of addresses isn't exactly the same as the old list, in the same order.\n                __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorization, \"f\").accounts.some((account, ii) => account.address !== authorization.accounts[ii].address);\n            __classPrivateFieldSet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorization, authorization, \"f\");\n            if (didPublicKeysChange) {\n                __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_instances, \"m\", _LocalSolanaMobileWalletAdapterWallet_emit).call(this, 'change', { accounts: this.accounts });\n            }\n        }));\n        _LocalSolanaMobileWalletAdapterWallet_handleWalletCapabilitiesResult.set(this, (capabilities) => __awaiter(this, void 0, void 0, function* () {\n            // TODO: investigate why using SolanaSignTransactions constant breaks treeshaking\n            const supportsSignTransaction = capabilities.features.includes('solana:signTransactions'); //SolanaSignTransactions);\n            const supportsSignAndSendTransaction = capabilities.supports_sign_and_send_transactions;\n            const didCapabilitiesChange = _solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_3__.SolanaSignAndSendTransaction in this.features !== supportsSignAndSendTransaction ||\n                _solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_4__.SolanaSignTransaction in this.features !== supportsSignTransaction;\n            __classPrivateFieldSet$1(this, _LocalSolanaMobileWalletAdapterWallet_optionalFeatures, Object.assign(Object.assign({}, ((supportsSignAndSendTransaction || (!supportsSignAndSendTransaction && !supportsSignTransaction)) && {\n                [_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_3__.SolanaSignAndSendTransaction]: {\n                    version: '1.0.0',\n                    supportedTransactionVersions: ['legacy', 0],\n                    signAndSendTransaction: __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_signAndSendTransaction, \"f\"),\n                },\n            })), (supportsSignTransaction && {\n                [_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_4__.SolanaSignTransaction]: {\n                    version: '1.0.0',\n                    supportedTransactionVersions: ['legacy', 0],\n                    signTransaction: __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_signTransaction, \"f\"),\n                },\n            })), \"f\");\n            if (didCapabilitiesChange) {\n                __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_instances, \"m\", _LocalSolanaMobileWalletAdapterWallet_emit).call(this, 'change', { features: this.features });\n            }\n        }));\n        _LocalSolanaMobileWalletAdapterWallet_performReauthorization.set(this, (wallet, authToken, chain) => __awaiter(this, void 0, void 0, function* () {\n            var _b, _c;\n            try {\n                const [capabilities, mwaAuthorizationResult] = yield Promise.all([\n                    (_c = (_b = __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorization, \"f\")) === null || _b === void 0 ? void 0 : _b.capabilities) !== null && _c !== void 0 ? _c : yield wallet.getCapabilities(),\n                    wallet.authorize({\n                        auth_token: authToken,\n                        identity: __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_appIdentity, \"f\"),\n                        chain: chain\n                    })\n                ]);\n                const accounts = __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_accountsToWalletStandardAccounts, \"f\").call(this, mwaAuthorizationResult.accounts);\n                const authorization = Object.assign(Object.assign({}, mwaAuthorizationResult), { accounts: accounts, chain: chain, capabilities: capabilities });\n                // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n                Promise.all([\n                    __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorizationCache, \"f\").set(authorization),\n                    __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_handleAuthorizationResult, \"f\").call(this, authorization),\n                ]);\n            }\n            catch (e) {\n                __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_disconnect, \"f\").call(this);\n                throw new Error((e instanceof Error && e.message) || 'Unknown error');\n            }\n        }));\n        _LocalSolanaMobileWalletAdapterWallet_disconnect.set(this, () => __awaiter(this, void 0, void 0, function* () {\n            var _d;\n            __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorizationCache, \"f\").clear(); // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n            __classPrivateFieldSet$1(this, _LocalSolanaMobileWalletAdapterWallet_connecting, false, \"f\");\n            __classPrivateFieldSet$1(this, _LocalSolanaMobileWalletAdapterWallet_connectionGeneration, (_d = __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_connectionGeneration, \"f\"), _d++, _d), \"f\");\n            __classPrivateFieldSet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorization, undefined, \"f\");\n            __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_instances, \"m\", _LocalSolanaMobileWalletAdapterWallet_emit).call(this, 'change', { accounts: this.accounts });\n        }));\n        _LocalSolanaMobileWalletAdapterWallet_transact.set(this, (callback) => __awaiter(this, void 0, void 0, function* () {\n            var _e;\n            const walletUriBase = (_e = __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorization, \"f\")) === null || _e === void 0 ? void 0 : _e.wallet_uri_base;\n            const config = walletUriBase ? { baseUri: walletUriBase } : undefined;\n            const currentConnectionGeneration = __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_connectionGeneration, \"f\");\n            try {\n                return yield (0,_solana_mobile_mobile_wallet_adapter_protocol__WEBPACK_IMPORTED_MODULE_1__.transact)(callback, config);\n            }\n            catch (e) {\n                if (__classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_connectionGeneration, \"f\") !== currentConnectionGeneration) {\n                    yield new Promise(() => { }); // Never resolve.\n                }\n                if (e instanceof Error &&\n                    e.name === 'SolanaMobileWalletAdapterError' &&\n                    e.code === 'ERROR_WALLET_NOT_FOUND') {\n                    yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_onWalletNotFound, \"f\").call(this, this);\n                }\n                throw e;\n            }\n        }));\n        _LocalSolanaMobileWalletAdapterWallet_assertIsAuthorized.set(this, () => {\n            if (!__classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorization, \"f\"))\n                throw new Error('Wallet not connected');\n            return { authToken: __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorization, \"f\").auth_token, chain: __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorization, \"f\").chain };\n        });\n        _LocalSolanaMobileWalletAdapterWallet_accountsToWalletStandardAccounts.set(this, (accounts) => {\n            return accounts.map((account) => {\n                var _a, _b;\n                const publicKey = toUint8Array(account.address);\n                return {\n                    address: bs58__WEBPACK_IMPORTED_MODULE_2__.encode(publicKey),\n                    publicKey,\n                    label: account.label,\n                    icon: account.icon,\n                    chains: (_a = account.chains) !== null && _a !== void 0 ? _a : __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_chains, \"f\"),\n                    // TODO: get supported features from getCapabilities API \n                    features: (_b = account.features) !== null && _b !== void 0 ? _b : DEFAULT_FEATURES\n                };\n            });\n        });\n        _LocalSolanaMobileWalletAdapterWallet_performSignTransactions.set(this, (transactions) => __awaiter(this, void 0, void 0, function* () {\n            const { authToken, chain } = __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_assertIsAuthorized, \"f\").call(this);\n            try {\n                const base64Transactions = transactions.map((tx) => { return fromUint8Array(tx); });\n                return yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_transact, \"f\").call(this, (wallet) => __awaiter(this, void 0, void 0, function* () {\n                    yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_performReauthorization, \"f\").call(this, wallet, authToken, chain);\n                    const signedTransactions = (yield wallet.signTransactions({\n                        payloads: base64Transactions,\n                    })).signed_payloads.map(toUint8Array);\n                    return signedTransactions;\n                }));\n            }\n            catch (e) {\n                throw new Error((e instanceof Error && e.message) || 'Unknown error');\n            }\n        }));\n        _LocalSolanaMobileWalletAdapterWallet_performSignAndSendTransaction.set(this, (transaction, options) => __awaiter(this, void 0, void 0, function* () {\n            const { authToken, chain } = __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_assertIsAuthorized, \"f\").call(this);\n            try {\n                return yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_transact, \"f\").call(this, (wallet) => __awaiter(this, void 0, void 0, function* () {\n                    const [capabilities, _1] = yield Promise.all([\n                        wallet.getCapabilities(),\n                        __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_performReauthorization, \"f\").call(this, wallet, authToken, chain)\n                    ]);\n                    if (capabilities.supports_sign_and_send_transactions) {\n                        const base64Transaction = fromUint8Array(transaction);\n                        const signatures = (yield wallet.signAndSendTransactions(Object.assign(Object.assign({}, options), { payloads: [base64Transaction] }))).signatures.map(toUint8Array);\n                        return signatures[0];\n                    }\n                    else {\n                        throw new Error('connected wallet does not support signAndSendTransaction');\n                    }\n                }));\n            }\n            catch (e) {\n                throw new Error((e instanceof Error && e.message) || 'Unknown error');\n            }\n        }));\n        _LocalSolanaMobileWalletAdapterWallet_signAndSendTransaction.set(this, (...inputs) => __awaiter(this, void 0, void 0, function* () {\n            const outputs = [];\n            for (const input of inputs) {\n                const signature = yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_performSignAndSendTransaction, \"f\").call(this, input.transaction, input.options);\n                outputs.push({ signature });\n            }\n            return outputs;\n        }));\n        _LocalSolanaMobileWalletAdapterWallet_signTransaction.set(this, (...inputs) => __awaiter(this, void 0, void 0, function* () {\n            return (yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_performSignTransactions, \"f\").call(this, inputs.map(({ transaction }) => transaction)))\n                .map((signedTransaction) => {\n                return { signedTransaction };\n            });\n        }));\n        _LocalSolanaMobileWalletAdapterWallet_signMessage.set(this, (...inputs) => __awaiter(this, void 0, void 0, function* () {\n            const { authToken, chain } = __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_assertIsAuthorized, \"f\").call(this);\n            const addresses = inputs.map(({ account }) => fromUint8Array(account.publicKey));\n            const messages = inputs.map(({ message }) => fromUint8Array(message));\n            try {\n                return yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_transact, \"f\").call(this, (wallet) => __awaiter(this, void 0, void 0, function* () {\n                    yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_performReauthorization, \"f\").call(this, wallet, authToken, chain);\n                    const signedMessages = (yield wallet.signMessages({\n                        addresses: addresses,\n                        payloads: messages,\n                    })).signed_payloads.map(toUint8Array);\n                    return signedMessages.map((signedMessage) => {\n                        return { signedMessage: signedMessage, signature: signedMessage.slice(-SIGNATURE_LENGTH_IN_BYTES) };\n                    });\n                }));\n            }\n            catch (e) {\n                throw new Error((e instanceof Error && e.message) || 'Unknown error');\n            }\n        }));\n        _LocalSolanaMobileWalletAdapterWallet_signIn.set(this, (...inputs) => __awaiter(this, void 0, void 0, function* () {\n            const outputs = [];\n            if (inputs.length > 1) {\n                for (const input of inputs) {\n                    outputs.push(yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_performSignIn, \"f\").call(this, input));\n                }\n            }\n            else {\n                return [yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_performSignIn, \"f\").call(this, inputs[0])];\n            }\n            return outputs;\n        }));\n        _LocalSolanaMobileWalletAdapterWallet_performSignIn.set(this, (input) => __awaiter(this, void 0, void 0, function* () {\n            var _f, _g, _h;\n            __classPrivateFieldSet$1(this, _LocalSolanaMobileWalletAdapterWallet_connecting, true, \"f\");\n            try {\n                const authorizationResult = yield __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_performAuthorization, \"f\").call(this, Object.assign(Object.assign({}, input), { domain: (_f = input === null || input === void 0 ? void 0 : input.domain) !== null && _f !== void 0 ? _f : window.location.host }));\n                if (!authorizationResult.sign_in_result) {\n                    throw new Error(\"Sign in failed, no sign in result returned by wallet\");\n                }\n                const signedInAddress = authorizationResult.sign_in_result.address;\n                const signedInAccount = authorizationResult.accounts.find(acc => acc.address == signedInAddress);\n                return {\n                    account: Object.assign(Object.assign({}, signedInAccount !== null && signedInAccount !== void 0 ? signedInAccount : {\n                        address: bs58__WEBPACK_IMPORTED_MODULE_2__.encode(toUint8Array(signedInAddress))\n                    }), { publicKey: toUint8Array(signedInAddress), chains: (_g = signedInAccount === null || signedInAccount === void 0 ? void 0 : signedInAccount.chains) !== null && _g !== void 0 ? _g : __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_chains, \"f\"), features: (_h = signedInAccount === null || signedInAccount === void 0 ? void 0 : signedInAccount.features) !== null && _h !== void 0 ? _h : authorizationResult.capabilities.features }),\n                    signedMessage: toUint8Array(authorizationResult.sign_in_result.signed_message),\n                    signature: toUint8Array(authorizationResult.sign_in_result.signature)\n                };\n            }\n            catch (e) {\n                throw new Error((e instanceof Error && e.message) || 'Unknown error');\n            }\n            finally {\n                __classPrivateFieldSet$1(this, _LocalSolanaMobileWalletAdapterWallet_connecting, false, \"f\");\n            }\n        }));\n        __classPrivateFieldSet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorizationCache, config.authorizationCache, \"f\");\n        __classPrivateFieldSet$1(this, _LocalSolanaMobileWalletAdapterWallet_appIdentity, config.appIdentity, \"f\");\n        __classPrivateFieldSet$1(this, _LocalSolanaMobileWalletAdapterWallet_chains, config.chains, \"f\");\n        __classPrivateFieldSet$1(this, _LocalSolanaMobileWalletAdapterWallet_chainSelector, config.chainSelector, \"f\");\n        __classPrivateFieldSet$1(this, _LocalSolanaMobileWalletAdapterWallet_onWalletNotFound, config.onWalletNotFound, \"f\");\n        __classPrivateFieldSet$1(this, _LocalSolanaMobileWalletAdapterWallet_optionalFeatures, {\n            // In MWA 1.0, signAndSend is optional and signTransaction is mandatory. Whereas in MWA 2.0+,\n            // signAndSend is mandatory and signTransaction is optional (and soft deprecated). As of mid\n            // 2025, all MWA wallets support both signAndSendTransaction and signTransaction so its safe\n            // assume both are supported here. The features will be updated based on the actual connected \n            // wallets capabilities during connection regardless, so this is safe. \n            [_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_3__.SolanaSignAndSendTransaction]: {\n                version: '1.0.0',\n                supportedTransactionVersions: ['legacy', 0],\n                signAndSendTransaction: __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_signAndSendTransaction, \"f\"),\n            },\n            [_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_4__.SolanaSignTransaction]: {\n                version: '1.0.0',\n                supportedTransactionVersions: ['legacy', 0],\n                signTransaction: __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_signTransaction, \"f\"),\n            },\n        }, \"f\");\n    }\n    get version() {\n        return __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_version, \"f\");\n    }\n    get name() {\n        return __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_name, \"f\");\n    }\n    get url() {\n        return __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_url, \"f\");\n    }\n    get icon() {\n        return __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_icon, \"f\");\n    }\n    get chains() {\n        return __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_chains, \"f\");\n    }\n    get features() {\n        return Object.assign({ [_wallet_standard_features__WEBPACK_IMPORTED_MODULE_7__.StandardConnect]: {\n                version: '1.0.0',\n                connect: __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_connect, \"f\"),\n            }, [_wallet_standard_features__WEBPACK_IMPORTED_MODULE_8__.StandardDisconnect]: {\n                version: '1.0.0',\n                disconnect: __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_disconnect, \"f\"),\n            }, [_wallet_standard_features__WEBPACK_IMPORTED_MODULE_9__.StandardEvents]: {\n                version: '1.0.0',\n                on: __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_on, \"f\"),\n            }, [_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_5__.SolanaSignMessage]: {\n                version: '1.0.0',\n                signMessage: __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_signMessage, \"f\"),\n            }, [_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_6__.SolanaSignIn]: {\n                version: '1.0.0',\n                signIn: __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_signIn, \"f\"),\n            } }, __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_optionalFeatures, \"f\"));\n    }\n    get accounts() {\n        var _a, _b;\n        return (_b = (_a = __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorization, \"f\")) === null || _a === void 0 ? void 0 : _a.accounts) !== null && _b !== void 0 ? _b : [];\n    }\n    get connected() {\n        return !!__classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorization, \"f\");\n    }\n    get isAuthorized() {\n        return !!__classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorization, \"f\");\n    }\n    get currentAuthorization() {\n        return __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorization, \"f\");\n    }\n    get cachedAuthorizationResult() {\n        return __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_authorizationCache, \"f\").get();\n    }\n}\n_LocalSolanaMobileWalletAdapterWallet_listeners = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_version = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_name = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_url = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_icon = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_appIdentity = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_authorization = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_authorizationCache = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_connecting = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_connectionGeneration = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_chains = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_chainSelector = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_optionalFeatures = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_onWalletNotFound = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_on = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_connect = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_performAuthorization = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_handleAuthorizationResult = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_handleWalletCapabilitiesResult = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_performReauthorization = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_disconnect = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_transact = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_assertIsAuthorized = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_accountsToWalletStandardAccounts = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_performSignTransactions = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_performSignAndSendTransaction = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_signAndSendTransaction = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_signTransaction = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_signMessage = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_signIn = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_performSignIn = new WeakMap(), _LocalSolanaMobileWalletAdapterWallet_instances = new WeakSet(), _LocalSolanaMobileWalletAdapterWallet_emit = function _LocalSolanaMobileWalletAdapterWallet_emit(event, ...args) {\n    var _a;\n    // eslint-disable-next-line prefer-spread\n    (_a = __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_listeners, \"f\")[event]) === null || _a === void 0 ? void 0 : _a.forEach((listener) => listener.apply(null, args));\n}, _LocalSolanaMobileWalletAdapterWallet_off = function _LocalSolanaMobileWalletAdapterWallet_off(event, listener) {\n    var _a;\n    __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_listeners, \"f\")[event] = (_a = __classPrivateFieldGet$1(this, _LocalSolanaMobileWalletAdapterWallet_listeners, \"f\")[event]) === null || _a === void 0 ? void 0 : _a.filter((existingListener) => listener !== existingListener);\n};\nclass RemoteSolanaMobileWalletAdapterWallet {\n    constructor(config) {\n        _RemoteSolanaMobileWalletAdapterWallet_instances.add(this);\n        _RemoteSolanaMobileWalletAdapterWallet_listeners.set(this, {});\n        _RemoteSolanaMobileWalletAdapterWallet_version.set(this, '1.0.0'); // wallet-standard version\n        _RemoteSolanaMobileWalletAdapterWallet_name.set(this, SolanaMobileWalletAdapterRemoteWalletName);\n        _RemoteSolanaMobileWalletAdapterWallet_url.set(this, 'https://solanamobile.com/wallets');\n        _RemoteSolanaMobileWalletAdapterWallet_icon.set(this, icon);\n        _RemoteSolanaMobileWalletAdapterWallet_appIdentity.set(this, void 0);\n        _RemoteSolanaMobileWalletAdapterWallet_authorization.set(this, void 0);\n        _RemoteSolanaMobileWalletAdapterWallet_authorizationCache.set(this, void 0);\n        _RemoteSolanaMobileWalletAdapterWallet_connecting.set(this, false);\n        /**\n         * Every time the connection is recycled in some way (eg. `disconnect()` is called)\n         * increment this and use it to make sure that `transact` calls from the previous\n         * 'generation' don't continue to do work and throw exceptions.\n         */\n        _RemoteSolanaMobileWalletAdapterWallet_connectionGeneration.set(this, 0);\n        _RemoteSolanaMobileWalletAdapterWallet_chains.set(this, []);\n        _RemoteSolanaMobileWalletAdapterWallet_chainSelector.set(this, void 0);\n        _RemoteSolanaMobileWalletAdapterWallet_optionalFeatures.set(this, void 0);\n        _RemoteSolanaMobileWalletAdapterWallet_onWalletNotFound.set(this, void 0);\n        _RemoteSolanaMobileWalletAdapterWallet_hostAuthority.set(this, void 0);\n        _RemoteSolanaMobileWalletAdapterWallet_session.set(this, void 0);\n        _RemoteSolanaMobileWalletAdapterWallet_on.set(this, (event, listener) => {\n            var _a;\n            ((_a = __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_listeners, \"f\")[event]) === null || _a === void 0 ? void 0 : _a.push(listener)) || (__classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_listeners, \"f\")[event] = [listener]);\n            return () => __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_instances, \"m\", _RemoteSolanaMobileWalletAdapterWallet_off).call(this, event, listener);\n        });\n        _RemoteSolanaMobileWalletAdapterWallet_connect.set(this, ({ silent } = {}) => __awaiter(this, void 0, void 0, function* () {\n            if (__classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_connecting, \"f\") || this.connected) {\n                return { accounts: this.accounts };\n            }\n            __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_connecting, true, \"f\");\n            try {\n                yield __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_performAuthorization, \"f\").call(this);\n            }\n            catch (e) {\n                throw new Error((e instanceof Error && e.message) || 'Unknown error');\n            }\n            finally {\n                __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_connecting, false, \"f\");\n            }\n            return { accounts: this.accounts };\n        }));\n        _RemoteSolanaMobileWalletAdapterWallet_performAuthorization.set(this, (signInPayload) => __awaiter(this, void 0, void 0, function* () {\n            try {\n                const cachedAuthorizationResult = yield __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorizationCache, \"f\").get();\n                if (cachedAuthorizationResult) {\n                    // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n                    __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_handleAuthorizationResult, \"f\").call(this, cachedAuthorizationResult);\n                    return cachedAuthorizationResult;\n                }\n                if (__classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_session, \"f\"))\n                    __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_session, undefined, \"f\");\n                const selectedChain = yield __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_chainSelector, \"f\").select(__classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_chains, \"f\"));\n                return yield __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_transact, \"f\").call(this, (wallet) => __awaiter(this, void 0, void 0, function* () {\n                    const [capabilities, mwaAuthorizationResult] = yield Promise.all([\n                        wallet.getCapabilities(),\n                        wallet.authorize({\n                            chain: selectedChain,\n                            identity: __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_appIdentity, \"f\"),\n                            sign_in_payload: signInPayload,\n                        })\n                    ]);\n                    const accounts = __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_accountsToWalletStandardAccounts, \"f\").call(this, mwaAuthorizationResult.accounts);\n                    const authorizationResult = Object.assign(Object.assign({}, mwaAuthorizationResult), { accounts, chain: selectedChain, capabilities: capabilities });\n                    // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n                    Promise.all([\n                        __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_handleWalletCapabilitiesResult, \"f\").call(this, capabilities),\n                        __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorizationCache, \"f\").set(authorizationResult),\n                        __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_handleAuthorizationResult, \"f\").call(this, authorizationResult),\n                    ]);\n                    return authorizationResult;\n                }));\n            }\n            catch (e) {\n                throw new Error((e instanceof Error && e.message) || 'Unknown error');\n            }\n        }));\n        _RemoteSolanaMobileWalletAdapterWallet_handleAuthorizationResult.set(this, (authorization) => __awaiter(this, void 0, void 0, function* () {\n            var _a;\n            const didPublicKeysChange = \n            // Case 1: We started from having no authorization.\n            __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorization, \"f\") == null ||\n                // Case 2: The number of authorized accounts changed.\n                ((_a = __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorization, \"f\")) === null || _a === void 0 ? void 0 : _a.accounts.length) !== authorization.accounts.length ||\n                // Case 3: The new list of addresses isn't exactly the same as the old list, in the same order.\n                __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorization, \"f\").accounts.some((account, ii) => account.address !== authorization.accounts[ii].address);\n            __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorization, authorization, \"f\");\n            if (didPublicKeysChange) {\n                __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_instances, \"m\", _RemoteSolanaMobileWalletAdapterWallet_emit).call(this, 'change', { accounts: this.accounts });\n            }\n        }));\n        _RemoteSolanaMobileWalletAdapterWallet_handleWalletCapabilitiesResult.set(this, (capabilities) => __awaiter(this, void 0, void 0, function* () {\n            // TODO: investigate why using SolanaSignTransactions constant breaks treeshaking\n            const supportsSignTransaction = capabilities.features.includes('solana:signTransactions'); //SolanaSignTransactions);\n            const supportsSignAndSendTransaction = capabilities.supports_sign_and_send_transactions ||\n                capabilities.features.includes('solana:signAndSendTransaction');\n            const didCapabilitiesChange = _solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_3__.SolanaSignAndSendTransaction in this.features !== supportsSignAndSendTransaction ||\n                _solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_4__.SolanaSignTransaction in this.features !== supportsSignTransaction;\n            __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_optionalFeatures, Object.assign(Object.assign({}, (supportsSignAndSendTransaction && {\n                [_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_3__.SolanaSignAndSendTransaction]: {\n                    version: '1.0.0',\n                    supportedTransactionVersions: capabilities.supported_transaction_versions,\n                    signAndSendTransaction: __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_signAndSendTransaction, \"f\"),\n                },\n            })), (supportsSignTransaction && {\n                [_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_4__.SolanaSignTransaction]: {\n                    version: '1.0.0',\n                    supportedTransactionVersions: capabilities.supported_transaction_versions,\n                    signTransaction: __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_signTransaction, \"f\"),\n                },\n            })), \"f\");\n            if (didCapabilitiesChange) {\n                __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_instances, \"m\", _RemoteSolanaMobileWalletAdapterWallet_emit).call(this, 'change', { features: this.features });\n            }\n        }));\n        _RemoteSolanaMobileWalletAdapterWallet_performReauthorization.set(this, (wallet, authToken, chain) => __awaiter(this, void 0, void 0, function* () {\n            var _b, _c;\n            try {\n                const [capabilities, mwaAuthorizationResult] = yield Promise.all([\n                    (_c = (_b = __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorization, \"f\")) === null || _b === void 0 ? void 0 : _b.capabilities) !== null && _c !== void 0 ? _c : yield wallet.getCapabilities(),\n                    wallet.authorize({\n                        auth_token: authToken,\n                        identity: __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_appIdentity, \"f\"),\n                        chain: chain\n                    })\n                ]);\n                const accounts = __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_accountsToWalletStandardAccounts, \"f\").call(this, mwaAuthorizationResult.accounts);\n                const authorization = Object.assign(Object.assign({}, mwaAuthorizationResult), { accounts: accounts, chain: chain, capabilities: capabilities });\n                // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n                Promise.all([\n                    __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorizationCache, \"f\").set(authorization),\n                    __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_handleAuthorizationResult, \"f\").call(this, authorization),\n                ]);\n            }\n            catch (e) {\n                __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_disconnect, \"f\").call(this);\n                throw new Error((e instanceof Error && e.message) || 'Unknown error');\n            }\n        }));\n        _RemoteSolanaMobileWalletAdapterWallet_disconnect.set(this, () => __awaiter(this, void 0, void 0, function* () {\n            var _d;\n            var _e;\n            (_d = __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_session, \"f\")) === null || _d === void 0 ? void 0 : _d.close();\n            __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorizationCache, \"f\").clear(); // TODO: Evaluate whether there's any threat to not `awaiting` this expression\n            __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_connecting, false, \"f\");\n            __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_connectionGeneration, (_e = __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_connectionGeneration, \"f\"), _e++, _e), \"f\");\n            __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorization, undefined, \"f\");\n            __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_session, undefined, \"f\");\n            __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_instances, \"m\", _RemoteSolanaMobileWalletAdapterWallet_emit).call(this, 'change', { accounts: this.accounts });\n        }));\n        _RemoteSolanaMobileWalletAdapterWallet_transact.set(this, (callback) => __awaiter(this, void 0, void 0, function* () {\n            var _f;\n            const walletUriBase = (_f = __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorization, \"f\")) === null || _f === void 0 ? void 0 : _f.wallet_uri_base;\n            const baseConfig = walletUriBase ? { baseUri: walletUriBase } : undefined;\n            const remoteConfig = Object.assign(Object.assign({}, baseConfig), { remoteHostAuthority: __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_hostAuthority, \"f\") });\n            const currentConnectionGeneration = __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_connectionGeneration, \"f\");\n            const modal = new RemoteConnectionModal();\n            if (__classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_session, \"f\")) {\n                return callback(__classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_session, \"f\").wallet);\n            }\n            try {\n                const { associationUrl, close, wallet } = yield (0,_solana_mobile_mobile_wallet_adapter_protocol__WEBPACK_IMPORTED_MODULE_1__.startRemoteScenario)(remoteConfig);\n                const removeCloseListener = modal.addEventListener('close', (event) => {\n                    if (event)\n                        close();\n                });\n                modal.initWithQR(associationUrl.toString());\n                modal.open();\n                __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_session, { close, wallet: yield wallet }, \"f\");\n                removeCloseListener();\n                modal.close();\n                return yield callback(__classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_session, \"f\").wallet);\n            }\n            catch (e) {\n                modal.close();\n                if (__classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_connectionGeneration, \"f\") !== currentConnectionGeneration) {\n                    yield new Promise(() => { }); // Never resolve.\n                }\n                if (e instanceof Error &&\n                    e.name === 'SolanaMobileWalletAdapterError' &&\n                    e.code === 'ERROR_WALLET_NOT_FOUND') {\n                    yield __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_onWalletNotFound, \"f\").call(this, this);\n                }\n                throw e;\n            }\n        }));\n        _RemoteSolanaMobileWalletAdapterWallet_assertIsAuthorized.set(this, () => {\n            if (!__classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorization, \"f\"))\n                throw new Error('Wallet not connected');\n            return { authToken: __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorization, \"f\").auth_token, chain: __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorization, \"f\").chain };\n        });\n        _RemoteSolanaMobileWalletAdapterWallet_accountsToWalletStandardAccounts.set(this, (accounts) => {\n            return accounts.map((account) => {\n                var _a, _b;\n                const publicKey = toUint8Array(account.address);\n                return {\n                    address: bs58__WEBPACK_IMPORTED_MODULE_2__.encode(publicKey),\n                    publicKey,\n                    label: account.label,\n                    icon: account.icon,\n                    chains: (_a = account.chains) !== null && _a !== void 0 ? _a : __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_chains, \"f\"),\n                    // TODO: get supported features from getCapabilities API \n                    features: (_b = account.features) !== null && _b !== void 0 ? _b : DEFAULT_FEATURES\n                };\n            });\n        });\n        _RemoteSolanaMobileWalletAdapterWallet_performSignTransactions.set(this, (transactions) => __awaiter(this, void 0, void 0, function* () {\n            const { authToken, chain } = __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_assertIsAuthorized, \"f\").call(this);\n            try {\n                return yield __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_transact, \"f\").call(this, (wallet) => __awaiter(this, void 0, void 0, function* () {\n                    yield __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_performReauthorization, \"f\").call(this, wallet, authToken, chain);\n                    const signedTransactions = (yield wallet.signTransactions({\n                        payloads: transactions.map(fromUint8Array),\n                    })).signed_payloads.map(toUint8Array);\n                    return signedTransactions;\n                }));\n            }\n            catch (e) {\n                throw new Error((e instanceof Error && e.message) || 'Unknown error');\n            }\n        }));\n        _RemoteSolanaMobileWalletAdapterWallet_performSignAndSendTransaction.set(this, (transaction, options) => __awaiter(this, void 0, void 0, function* () {\n            const { authToken, chain } = __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_assertIsAuthorized, \"f\").call(this);\n            try {\n                return yield __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_transact, \"f\").call(this, (wallet) => __awaiter(this, void 0, void 0, function* () {\n                    const [capabilities, _1] = yield Promise.all([\n                        wallet.getCapabilities(),\n                        __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_performReauthorization, \"f\").call(this, wallet, authToken, chain)\n                    ]);\n                    if (capabilities.supports_sign_and_send_transactions) {\n                        const signatures = (yield wallet.signAndSendTransactions(Object.assign(Object.assign({}, options), { payloads: [fromUint8Array(transaction)] }))).signatures.map(toUint8Array);\n                        return signatures[0];\n                    }\n                    else {\n                        throw new Error('connected wallet does not support signAndSendTransaction');\n                    }\n                }));\n            }\n            catch (e) {\n                throw new Error((e instanceof Error && e.message) || 'Unknown error');\n            }\n        }));\n        _RemoteSolanaMobileWalletAdapterWallet_signAndSendTransaction.set(this, (...inputs) => __awaiter(this, void 0, void 0, function* () {\n            const outputs = [];\n            for (const input of inputs) {\n                const signature = (yield __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_performSignAndSendTransaction, \"f\").call(this, input.transaction, input.options));\n                outputs.push({ signature });\n            }\n            return outputs;\n        }));\n        _RemoteSolanaMobileWalletAdapterWallet_signTransaction.set(this, (...inputs) => __awaiter(this, void 0, void 0, function* () {\n            return (yield __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_performSignTransactions, \"f\").call(this, inputs.map(({ transaction }) => transaction)))\n                .map((signedTransaction) => {\n                return { signedTransaction };\n            });\n        }));\n        _RemoteSolanaMobileWalletAdapterWallet_signMessage.set(this, (...inputs) => __awaiter(this, void 0, void 0, function* () {\n            const { authToken, chain } = __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_assertIsAuthorized, \"f\").call(this);\n            const addresses = inputs.map(({ account }) => fromUint8Array(account.publicKey));\n            const messages = inputs.map(({ message }) => fromUint8Array(message));\n            try {\n                return yield __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_transact, \"f\").call(this, (wallet) => __awaiter(this, void 0, void 0, function* () {\n                    yield __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_performReauthorization, \"f\").call(this, wallet, authToken, chain);\n                    const signedMessages = (yield wallet.signMessages({\n                        addresses: addresses,\n                        payloads: messages,\n                    })).signed_payloads.map(toUint8Array);\n                    return signedMessages.map((signedMessage) => {\n                        return { signedMessage: signedMessage, signature: signedMessage.slice(-SIGNATURE_LENGTH_IN_BYTES) };\n                    });\n                }));\n            }\n            catch (e) {\n                throw new Error((e instanceof Error && e.message) || 'Unknown error');\n            }\n        }));\n        _RemoteSolanaMobileWalletAdapterWallet_signIn.set(this, (...inputs) => __awaiter(this, void 0, void 0, function* () {\n            const outputs = [];\n            if (inputs.length > 1) {\n                for (const input of inputs) {\n                    outputs.push(yield __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_performSignIn, \"f\").call(this, input));\n                }\n            }\n            else {\n                return [yield __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_performSignIn, \"f\").call(this, inputs[0])];\n            }\n            return outputs;\n        }));\n        _RemoteSolanaMobileWalletAdapterWallet_performSignIn.set(this, (input) => __awaiter(this, void 0, void 0, function* () {\n            var _g, _h, _j;\n            __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_connecting, true, \"f\");\n            try {\n                const authorizationResult = yield __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_performAuthorization, \"f\").call(this, Object.assign(Object.assign({}, input), { domain: (_g = input === null || input === void 0 ? void 0 : input.domain) !== null && _g !== void 0 ? _g : window.location.host }));\n                if (!authorizationResult.sign_in_result) {\n                    throw new Error(\"Sign in failed, no sign in result returned by wallet\");\n                }\n                const signedInAddress = authorizationResult.sign_in_result.address;\n                const signedInAccount = authorizationResult.accounts.find(acc => acc.address == signedInAddress);\n                return {\n                    account: Object.assign(Object.assign({}, signedInAccount !== null && signedInAccount !== void 0 ? signedInAccount : {\n                        address: bs58__WEBPACK_IMPORTED_MODULE_2__.encode(toUint8Array(signedInAddress))\n                    }), { publicKey: toUint8Array(signedInAddress), chains: (_h = signedInAccount === null || signedInAccount === void 0 ? void 0 : signedInAccount.chains) !== null && _h !== void 0 ? _h : __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_chains, \"f\"), features: (_j = signedInAccount === null || signedInAccount === void 0 ? void 0 : signedInAccount.features) !== null && _j !== void 0 ? _j : authorizationResult.capabilities.features }),\n                    signedMessage: toUint8Array(authorizationResult.sign_in_result.signed_message),\n                    signature: toUint8Array(authorizationResult.sign_in_result.signature)\n                };\n            }\n            catch (e) {\n                throw new Error((e instanceof Error && e.message) || 'Unknown error');\n            }\n            finally {\n                __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_connecting, false, \"f\");\n            }\n        }));\n        __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorizationCache, config.authorizationCache, \"f\");\n        __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_appIdentity, config.appIdentity, \"f\");\n        __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_chains, config.chains, \"f\");\n        __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_chainSelector, config.chainSelector, \"f\");\n        __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_hostAuthority, config.remoteHostAuthority, \"f\");\n        __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_onWalletNotFound, config.onWalletNotFound, \"f\");\n        __classPrivateFieldSet$1(this, _RemoteSolanaMobileWalletAdapterWallet_optionalFeatures, {\n            // In MWA 1.0, signAndSend is optional and signTransaction is mandatory. Whereas in MWA 2.0+,\n            // signAndSend is mandatory and signTransaction is optional (and soft deprecated). As of mid\n            // 2025, all MWA wallets support both signAndSendTransaction and signTransaction so its safe\n            // assume both are supported here. The features will be updated based on the actual connected \n            // wallets capabilities during connection regardless, so this is safe. \n            [_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_3__.SolanaSignAndSendTransaction]: {\n                version: '1.0.0',\n                supportedTransactionVersions: ['legacy', 0],\n                signAndSendTransaction: __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_signAndSendTransaction, \"f\"),\n            },\n            [_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_4__.SolanaSignTransaction]: {\n                version: '1.0.0',\n                supportedTransactionVersions: ['legacy', 0],\n                signTransaction: __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_signTransaction, \"f\"),\n            },\n        }, \"f\");\n    }\n    get version() {\n        return __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_version, \"f\");\n    }\n    get name() {\n        return __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_name, \"f\");\n    }\n    get url() {\n        return __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_url, \"f\");\n    }\n    get icon() {\n        return __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_icon, \"f\");\n    }\n    get chains() {\n        return __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_chains, \"f\");\n    }\n    get features() {\n        return Object.assign({ [_wallet_standard_features__WEBPACK_IMPORTED_MODULE_7__.StandardConnect]: {\n                version: '1.0.0',\n                connect: __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_connect, \"f\"),\n            }, [_wallet_standard_features__WEBPACK_IMPORTED_MODULE_8__.StandardDisconnect]: {\n                version: '1.0.0',\n                disconnect: __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_disconnect, \"f\"),\n            }, [_wallet_standard_features__WEBPACK_IMPORTED_MODULE_9__.StandardEvents]: {\n                version: '1.0.0',\n                on: __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_on, \"f\"),\n            }, [_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_5__.SolanaSignMessage]: {\n                version: '1.0.0',\n                signMessage: __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_signMessage, \"f\"),\n            }, [_solana_wallet_standard_features__WEBPACK_IMPORTED_MODULE_6__.SolanaSignIn]: {\n                version: '1.0.0',\n                signIn: __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_signIn, \"f\"),\n            } }, __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_optionalFeatures, \"f\"));\n    }\n    get accounts() {\n        var _a, _b;\n        return (_b = (_a = __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorization, \"f\")) === null || _a === void 0 ? void 0 : _a.accounts) !== null && _b !== void 0 ? _b : [];\n    }\n    get connected() {\n        return !!__classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_session, \"f\") && !!__classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorization, \"f\");\n    }\n    get isAuthorized() {\n        return !!__classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorization, \"f\");\n    }\n    get currentAuthorization() {\n        return __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorization, \"f\");\n    }\n    get cachedAuthorizationResult() {\n        return __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_authorizationCache, \"f\").get();\n    }\n}\n_RemoteSolanaMobileWalletAdapterWallet_listeners = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_version = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_name = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_url = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_icon = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_appIdentity = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_authorization = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_authorizationCache = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_connecting = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_connectionGeneration = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_chains = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_chainSelector = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_optionalFeatures = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_onWalletNotFound = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_hostAuthority = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_session = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_on = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_connect = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_performAuthorization = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_handleAuthorizationResult = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_handleWalletCapabilitiesResult = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_performReauthorization = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_disconnect = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_transact = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_assertIsAuthorized = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_accountsToWalletStandardAccounts = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_performSignTransactions = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_performSignAndSendTransaction = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_signAndSendTransaction = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_signTransaction = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_signMessage = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_signIn = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_performSignIn = new WeakMap(), _RemoteSolanaMobileWalletAdapterWallet_instances = new WeakSet(), _RemoteSolanaMobileWalletAdapterWallet_emit = function _RemoteSolanaMobileWalletAdapterWallet_emit(event, ...args) {\n    var _a;\n    // eslint-disable-next-line prefer-spread\n    (_a = __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_listeners, \"f\")[event]) === null || _a === void 0 ? void 0 : _a.forEach((listener) => listener.apply(null, args));\n}, _RemoteSolanaMobileWalletAdapterWallet_off = function _RemoteSolanaMobileWalletAdapterWallet_off(event, listener) {\n    var _a;\n    __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_listeners, \"f\")[event] = (_a = __classPrivateFieldGet$1(this, _RemoteSolanaMobileWalletAdapterWallet_listeners, \"f\")[event]) === null || _a === void 0 ? void 0 : _a.filter((existingListener) => listener !== existingListener);\n};\n\nvar __classPrivateFieldSet = ( false) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = ( false) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _RegisterWalletEvent_detail;\n/**\n * Register a {@link \"@wallet-standard/base\".Wallet} as a Standard Wallet with the app.\n *\n * This dispatches a {@link \"@wallet-standard/base\".WindowRegisterWalletEvent} to notify the app that the Wallet is\n * ready to be registered.\n *\n * This also adds a listener for {@link \"@wallet-standard/base\".WindowAppReadyEvent} to listen for a notification from\n * the app that the app is ready to register the Wallet.\n *\n * This combination of event dispatch and listener guarantees that the Wallet will be registered synchronously as soon\n * as the app is ready whether the Wallet loads before or after the app.\n *\n * @param wallet Wallet to register.\n *\n * @group Wallet\n */\nfunction registerWallet(wallet) {\n    const callback = ({ register }) => register(wallet);\n    try {\n        window.dispatchEvent(new RegisterWalletEvent(callback));\n    }\n    catch (error) {\n        console.error('wallet-standard:register-wallet event could not be dispatched\\n', error);\n    }\n    try {\n        window.addEventListener('wallet-standard:app-ready', ({ detail: api }) => callback(api));\n    }\n    catch (error) {\n        console.error('wallet-standard:app-ready event listener could not be added\\n', error);\n    }\n}\nclass RegisterWalletEvent extends Event {\n    constructor(callback) {\n        super('wallet-standard:register-wallet', {\n            bubbles: false,\n            cancelable: false,\n            composed: false,\n        });\n        _RegisterWalletEvent_detail.set(this, void 0);\n        __classPrivateFieldSet(this, _RegisterWalletEvent_detail, callback, \"f\");\n    }\n    get detail() {\n        return __classPrivateFieldGet(this, _RegisterWalletEvent_detail, \"f\");\n    }\n    get type() {\n        return 'wallet-standard:register-wallet';\n    }\n    /** @deprecated */\n    preventDefault() {\n        throw new Error('preventDefault cannot be called');\n    }\n    /** @deprecated */\n    stopImmediatePropagation() {\n        throw new Error('stopImmediatePropagation cannot be called');\n    }\n    /** @deprecated */\n    stopPropagation() {\n        throw new Error('stopPropagation cannot be called');\n    }\n}\n_RegisterWalletEvent_detail = new WeakMap();\n\n( false) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\n( false) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\n\nfunction getIsLocalAssociationSupported() {\n    return (typeof window !== 'undefined' &&\n        window.isSecureContext &&\n        typeof document !== 'undefined' &&\n        /android/i.test(navigator.userAgent));\n}\nfunction getIsRemoteAssociationSupported() {\n    return (typeof window !== 'undefined' &&\n        window.isSecureContext &&\n        typeof document !== 'undefined' &&\n        !/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\n}\n\nfunction registerMwa(config) {\n    if (typeof window === 'undefined') {\n        console.warn(`MWA not registered: no window object`);\n        return;\n    }\n    if (!window.isSecureContext) {\n        console.warn(`MWA not registered: secure context required (https)`);\n        return;\n    }\n    if (getIsLocalAssociationSupported()) {\n        registerWallet(new LocalSolanaMobileWalletAdapterWallet(config));\n    }\n    else if (getIsRemoteAssociationSupported() && config.remoteHostAuthority !== undefined) {\n        registerWallet(new RemoteSolanaMobileWalletAdapterWallet(Object.assign(Object.assign({}, config), { remoteHostAuthority: config.remoteHostAuthority })));\n    }\n    else ;\n}\n\nconst WALLET_NOT_FOUND_ERROR_MESSAGE = 'To use mobile wallet adapter, you must have a compatible mobile wallet application installed on your device.';\nconst BROWSER_NOT_SUPPORTED_ERROR_MESSAGE = 'This browser appears to be incompatible with mobile wallet adapter. Open this page in a compatible mobile browser app and try again.';\nclass ErrorModal extends EmbeddedModal {\n    constructor() {\n        super(...arguments);\n        this.contentStyles = css;\n        this.contentHtml = ErrorDialogHtml;\n    }\n    initWithError(error) {\n        super.init();\n        this.populateError(error);\n    }\n    populateError(error) {\n        var _a, _b;\n        const errorMessageElement = (_a = this.dom) === null || _a === void 0 ? void 0 : _a.getElementById('mobile-wallet-adapter-error-message');\n        const actionBtn = (_b = this.dom) === null || _b === void 0 ? void 0 : _b.getElementById('mobile-wallet-adapter-error-action');\n        if (errorMessageElement) {\n            if (error.name === 'SolanaMobileWalletAdapterError') {\n                switch (error.code) {\n                    case 'ERROR_WALLET_NOT_FOUND':\n                        errorMessageElement.innerHTML = WALLET_NOT_FOUND_ERROR_MESSAGE;\n                        if (actionBtn)\n                            actionBtn.addEventListener('click', () => {\n                                window.location.href = 'https://solanamobile.com/wallets';\n                            });\n                        return;\n                    case 'ERROR_BROWSER_NOT_SUPPORTED':\n                        errorMessageElement.innerHTML = BROWSER_NOT_SUPPORTED_ERROR_MESSAGE;\n                        if (actionBtn)\n                            actionBtn.style.display = 'none';\n                        return;\n                }\n            }\n            errorMessageElement.innerHTML = `An unexpected error occurred: ${error.message}`;\n        }\n        else {\n            console.log('Failed to locate error dialog element');\n        }\n    }\n}\nconst ErrorDialogHtml = `\n<svg class=\"mobile-wallet-adapter-embedded-modal-error-icon\" xmlns=\"http://www.w3.org/2000/svg\" height=\"50px\" viewBox=\"0 -960 960 960\" width=\"50px\" fill=\"#000000\"><path d=\"M 280,-80 Q 197,-80 138.5,-138.5 80,-197 80,-280 80,-363 138.5,-421.5 197,-480 280,-480 q 83,0 141.5,58.5 58.5,58.5 58.5,141.5 0,83 -58.5,141.5 Q 363,-80 280,-80 Z M 824,-120 568,-376 Q 556,-389 542.5,-402.5 529,-416 516,-428 q 38,-24 61,-64 23,-40 23,-88 0,-75 -52.5,-127.5 Q 495,-760 420,-760 345,-760 292.5,-707.5 240,-655 240,-580 q 0,6 0.5,11.5 0.5,5.5 1.5,11.5 -18,2 -39.5,8 -21.5,6 -38.5,14 -2,-11 -3,-22 -1,-11 -1,-23 0,-109 75.5,-184.5 Q 311,-840 420,-840 q 109,0 184.5,75.5 75.5,75.5 75.5,184.5 0,43 -13.5,81.5 Q 653,-460 629,-428 l 251,252 z m -615,-61 71,-71 70,71 29,-28 -71,-71 71,-71 -28,-28 -71,71 -71,-71 -28,28 71,71 -71,71 z\"/></svg>\n<div class=\"mobile-wallet-adapter-embedded-modal-title\">We can't find a wallet.</div>\n<div id=\"mobile-wallet-adapter-error-message\" class=\"mobile-wallet-adapter-embedded-modal-subtitle\"></div>\n<div>\n    <button data-error-action id=\"mobile-wallet-adapter-error-action\" class=\"mobile-wallet-adapter-embedded-modal-error-action\">\n        Find a wallet\n    </button>\n</div>\n`;\nconst css = `\n.mobile-wallet-adapter-embedded-modal-content {\n    text-align: center;\n}\n\n.mobile-wallet-adapter-embedded-modal-error-icon {\n    margin-top: 24px;\n}\n\n.mobile-wallet-adapter-embedded-modal-title {\n    margin: 18px 100px auto 100px;\n    color: #000000;\n    font-size: 2.75em;\n    font-weight: 600;\n}\n\n.mobile-wallet-adapter-embedded-modal-subtitle {\n    margin: 30px 60px 40px 60px;\n    color: #000000;\n    font-size: 1.25em;\n    font-weight: 400;\n}\n\n.mobile-wallet-adapter-embedded-modal-error-action {\n    display: block;\n    width: 100%;\n    height: 56px;\n    /*margin-top: 40px;*/\n    font-size: 1.25em;\n    /*line-height: 24px;*/\n    /*letter-spacing: -1%;*/\n    background: #000000;\n    color: #FFFFFF;\n    border-radius: 18px;\n}\n\n/* Smaller screens */\n@media all and (max-width: 600px) {\n    .mobile-wallet-adapter-embedded-modal-title {\n        font-size: 1.5em;\n        margin-right: 12px;\n        margin-left: 12px;\n    }\n    .mobile-wallet-adapter-embedded-modal-subtitle {\n        margin-right: 12px;\n        margin-left: 12px;\n    }\n}\n`;\n\nfunction defaultErrorModalWalletNotFoundHandler() {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (typeof window !== 'undefined') {\n            const userAgent = window.navigator.userAgent.toLowerCase();\n            const errorDialog = new ErrorModal();\n            if (userAgent.includes('wv')) { // Android WebView\n                // MWA is not supported in this browser so we inform the user\n                // errorDialog.initWithError(\n                //     new SolanaMobileWalletAdapterError(\n                //         SolanaMobileWalletAdapterErrorCode.ERROR_BROWSER_NOT_SUPPORTED, \n                //         ''\n                //     )\n                // );\n                // TODO: investigate why instantiating a new SolanaMobileWalletAdapterError here breaks treeshaking \n                errorDialog.initWithError({\n                    name: 'SolanaMobileWalletAdapterError',\n                    code: 'ERROR_BROWSER_NOT_SUPPORTED',\n                    message: ''\n                });\n            }\n            else { // Browser, user does not have a wallet installed.\n                // errorDialog.initWithError(\n                //     new SolanaMobileWalletAdapterError(\n                //         SolanaMobileWalletAdapterErrorCode.ERROR_WALLET_NOT_FOUND, \n                //         ''\n                //     )\n                // );\n                // TODO: investigate why instantiating a new SolanaMobileWalletAdapterError here breaks treeshaking \n                errorDialog.initWithError({\n                    name: 'SolanaMobileWalletAdapterError',\n                    code: 'ERROR_WALLET_NOT_FOUND',\n                    message: ''\n                });\n            }\n            errorDialog.open();\n        }\n    });\n}\nfunction createDefaultWalletNotFoundHandler() {\n    return () => __awaiter(this, void 0, void 0, function* () { defaultErrorModalWalletNotFoundHandler(); });\n}\n\nconst CACHE_KEY = 'SolanaMobileWalletAdapterDefaultAuthorizationCache';\nfunction createDefaultAuthorizationCache() {\n    let storage;\n    try {\n        storage = window.localStorage;\n        // eslint-disable-next-line no-empty\n    }\n    catch (_a) { }\n    return {\n        clear() {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (!storage) {\n                    return;\n                }\n                try {\n                    storage.removeItem(CACHE_KEY);\n                    // eslint-disable-next-line no-empty\n                }\n                catch (_a) { }\n            });\n        },\n        get() {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (!storage) {\n                    return;\n                }\n                try {\n                    const parsed = JSON.parse(storage.getItem(CACHE_KEY));\n                    if (parsed && parsed.accounts) {\n                        const parsedAccounts = parsed.accounts.map((account) => {\n                            return Object.assign(Object.assign({}, account), { publicKey: 'publicKey' in account\n                                    ? new Uint8Array(Object.values(account.publicKey)) // Rebuild publicKey for WalletAccount\n                                    : bs58__WEBPACK_IMPORTED_MODULE_2__.decode(account.address) });\n                        });\n                        return Object.assign(Object.assign({}, parsed), { accounts: parsedAccounts });\n                    }\n                    else\n                        return parsed || undefined;\n                    // eslint-disable-next-line no-empty\n                }\n                catch (_a) { }\n            });\n        },\n        set(authorization) {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (!storage) {\n                    return;\n                }\n                try {\n                    storage.setItem(CACHE_KEY, JSON.stringify(authorization));\n                    // eslint-disable-next-line no-empty\n                }\n                catch (_a) { }\n            });\n        },\n    };\n}\n\nfunction createDefaultChainSelector() {\n    return {\n        select(chains) {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (chains.length === 1) {\n                    return chains[0];\n                }\n                else if (chains.includes(_solana_wallet_standard_chains__WEBPACK_IMPORTED_MODULE_10__.SOLANA_MAINNET_CHAIN)) {\n                    return _solana_wallet_standard_chains__WEBPACK_IMPORTED_MODULE_10__.SOLANA_MAINNET_CHAIN;\n                }\n                else\n                    return chains[0];\n            });\n        },\n    };\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHNvbGFuYS1tb2JpbGUrd2FsbGV0LXN0YW5kYXJkLW1vYmlsZUAwLjQuM19Ac29sYW5hK3dhbGxldC1hZGFwdGVyLWJhc2VAMC45LjI3X0Bzb2xhbmErXzJhZDE0ZTliMmRjNGU4MjFkZmFlMzIxZjBlYjZhNGE5L25vZGVfbW9kdWxlcy9Ac29sYW5hLW1vYmlsZS93YWxsZXQtc3RhbmRhcmQtbW9iaWxlL2xpYi9lc20vaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBd0k7QUFDNUc7QUFDa0U7QUFDRTtBQUN0RTtBQUM0Qzs7QUFFdEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsK0RBQStELGlCQUFpQjtBQUM1RztBQUNBLG9DQUFvQyxNQUFNLCtCQUErQixZQUFZO0FBQ3JGLG1DQUFtQyxNQUFNLG1DQUFtQyxZQUFZO0FBQ3hGLGdDQUFnQztBQUNoQztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxhQUFhLGFBQWE7QUFDL0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQiw2QkFBNkI7QUFDN0IseUJBQXlCO0FBQ3pCLHFCQUFxQjtBQUNyQixnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixrQkFBa0I7QUFDbEIsdUNBQXVDO0FBQ3ZDLHNCQUFzQjtBQUN0Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzRkFBc0Y7QUFDdEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRDtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxnQkFBZ0I7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQjtBQUNwQixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0Qyw0Q0FBZSxVQUFVLHVCQUF1QjtBQUM1RjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CLG9CQUFvQjtBQUNwQiwyQkFBMkI7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUNBQWlDOztBQUVqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsMEZBQTRCLEVBQUUsbUZBQXFCLEVBQUUsK0VBQWlCLEVBQUUsMEVBQVk7QUFDOUc7QUFDQTtBQUNBO0FBQ0Esb0VBQW9FO0FBQ3BFLDBFQUEwRTtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsbUVBQW1FLFNBQVMsSUFBSTtBQUNoRjtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQztBQUNqQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQSx3RUFBd0UsNkJBQTZCLDREQUE0RDtBQUNqSztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0tBQXdLLHlCQUF5QjtBQUNqTTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsdUdBQXVHO0FBQ3ZHO0FBQ0EsMENBQTBDLDBGQUE0QjtBQUN0RSxnQkFBZ0IsbUZBQXFCO0FBQ3JDLGlJQUFpSTtBQUNqSSxpQkFBaUIsMEZBQTRCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsaUJBQWlCLG1GQUFxQjtBQUN0QztBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0Esd0tBQXdLLHlCQUF5QjtBQUNqTTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLG9FQUFvRSw2QkFBNkIsOERBQThEO0FBQy9KO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxtSEFBbUg7QUFDbkg7QUFDQTtBQUNBO0FBQ0Esb0tBQW9LLHlCQUF5QjtBQUM3TCxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLHlCQUF5QjtBQUN0RTtBQUNBO0FBQ0EsNkJBQTZCLHVGQUFRO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxHQUFHO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHdDQUFhO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBLG9CQUFvQixtQkFBbUI7QUFDdkM7QUFDQSxzRUFBc0UsNEJBQTRCO0FBQ2xHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0Esb0JBQW9CLG1CQUFtQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0dBQStHLGNBQWMsK0JBQStCO0FBQzVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsV0FBVztBQUMxQztBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0Esc0pBQXNKLGFBQWE7QUFDbks7QUFDQSx5QkFBeUI7QUFDekIsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBLG9CQUFvQixtQkFBbUI7QUFDdkMsNENBQTRDLFNBQVM7QUFDckQsMkNBQTJDLFNBQVM7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsaUNBQWlDO0FBQ2pDLHFCQUFxQjtBQUNyQixpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJMQUEyTCxZQUFZLGlJQUFpSTtBQUN4VTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyREFBMkQ7QUFDM0QsaUNBQWlDLHdDQUFhO0FBQzlDLHFCQUFxQixLQUFLLDhiQUE4YjtBQUN4ZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSwwRkFBNEI7QUFDekM7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLGFBQWEsbUZBQXFCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixDQUFDLHNFQUFlO0FBQy9DO0FBQ0E7QUFDQSxhQUFhLEdBQUcseUVBQWtCO0FBQ2xDO0FBQ0E7QUFDQSxhQUFhLEdBQUcscUVBQWM7QUFDOUI7QUFDQTtBQUNBLGFBQWEsR0FBRywrRUFBaUI7QUFDakM7QUFDQTtBQUNBLGFBQWEsR0FBRywwRUFBWTtBQUM1QjtBQUNBO0FBQ0EsZUFBZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRTtBQUNyRSwyRUFBMkU7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxvRUFBb0UsU0FBUyxJQUFJO0FBQ2pGO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EsOEVBQThFLDZCQUE2Qiw0REFBNEQ7QUFDdks7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBLQUEwSyx5QkFBeUI7QUFDbk07QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLHVHQUF1RztBQUN2RztBQUNBO0FBQ0EsMENBQTBDLDBGQUE0QjtBQUN0RSxnQkFBZ0IsbUZBQXFCO0FBQ3JDLGtJQUFrSTtBQUNsSSxpQkFBaUIsMEZBQTRCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2IsaUJBQWlCLG1GQUFxQjtBQUN0QztBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsYUFBYTtBQUNiO0FBQ0EsMEtBQTBLLHlCQUF5QjtBQUNuTTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBLG9FQUFvRSw2QkFBNkIsOERBQThEO0FBQy9KO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0hBQW9IO0FBQ3BIO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0tBQXNLLHlCQUF5QjtBQUMvTCxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsaURBQWlELHlCQUF5QjtBQUMxRSwrREFBK0QsaUJBQWlCLGdIQUFnSDtBQUNoTTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0NBQWdDLFFBQVEsa0dBQW1CO0FBQ25GO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsaUdBQWlHLDZCQUE2QjtBQUM5SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxHQUFHO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLHdDQUFhO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBLG9CQUFvQixtQkFBbUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLG9CQUFvQixtQkFBbUI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrR0FBK0csY0FBYyx5Q0FBeUM7QUFDdEs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixXQUFXO0FBQzFDO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSx1SkFBdUosYUFBYTtBQUNwSztBQUNBLHlCQUF5QjtBQUN6QixhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0Esb0JBQW9CLG1CQUFtQjtBQUN2Qyw0Q0FBNEMsU0FBUztBQUNyRCwyQ0FBMkMsU0FBUztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxpQ0FBaUM7QUFDakMscUJBQXFCO0FBQ3JCLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNExBQTRMLFlBQVksaUlBQWlJO0FBQ3pVO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRDtBQUMzRCxpQ0FBaUMsd0NBQWE7QUFDOUMscUJBQXFCLEtBQUssK2JBQStiO0FBQ3pkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsMEZBQTRCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixhQUFhLG1GQUFxQjtBQUNsQztBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsQ0FBQyxzRUFBZTtBQUMvQztBQUNBO0FBQ0EsYUFBYSxHQUFHLHlFQUFrQjtBQUNsQztBQUNBO0FBQ0EsYUFBYSxHQUFHLHFFQUFjO0FBQzlCO0FBQ0E7QUFDQSxhQUFhLEdBQUcsK0VBQWlCO0FBQ2pDO0FBQ0E7QUFDQSxhQUFhLEdBQUcsMEVBQVk7QUFDNUI7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7O0FBRUEsOEJBQThCLE1BQTZDO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsTUFBNkM7QUFDM0U7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxzQ0FBc0M7QUFDckQ7QUFDQSxzQkFBc0IseURBQXlEO0FBQy9FO0FBQ0E7QUFDQSxrQ0FBa0MsbURBQW1EO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLFVBQVU7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0UsYUFBYTtBQUM3RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQyxNQUE2QztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxNQUE2QztBQUM5QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrRkFBK0YsYUFBYSxpREFBaUQ7QUFDN0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkVBQTZFLGNBQWM7QUFDM0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBLHdCQUF3QjtBQUN4QiwwQkFBMEI7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLGdFQUFnRSwyQ0FBMkM7QUFDM0c7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxjQUFjO0FBQy9FO0FBQ0Esc0NBQXNDLHdDQUFhLG1CQUFtQjtBQUN0RSx5QkFBeUI7QUFDekIsNkRBQTZELGFBQWEsMEJBQTBCO0FBQ3BHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsaUZBQW9CO0FBQzdELDJCQUEyQixpRkFBb0I7QUFDL0M7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBOztBQUU2VCIsInNvdXJjZXMiOlsiL1VzZXJzL3N1a2FudGdob3NoL0NvZGUvU29sYW5hL2JldGZvbGlvL25vZGVfbW9kdWxlcy8ucG5wbS9Ac29sYW5hLW1vYmlsZSt3YWxsZXQtc3RhbmRhcmQtbW9iaWxlQDAuNC4zX0Bzb2xhbmErd2FsbGV0LWFkYXB0ZXItYmFzZUAwLjkuMjdfQHNvbGFuYStfMmFkMTRlOWIyZGM0ZTgyMWRmYWUzMjFmMGViNmE0YTkvbm9kZV9tb2R1bGVzL0Bzb2xhbmEtbW9iaWxlL3dhbGxldC1zdGFuZGFyZC1tb2JpbGUvbGliL2VzbS9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTb2xhbmFTaWduQW5kU2VuZFRyYW5zYWN0aW9uLCBTb2xhbmFTaWduVHJhbnNhY3Rpb24sIFNvbGFuYVNpZ25NZXNzYWdlLCBTb2xhbmFTaWduSW4gfSBmcm9tICdAc29sYW5hL3dhbGxldC1zdGFuZGFyZC1mZWF0dXJlcyc7XG5pbXBvcnQgUVJDb2RlIGZyb20gJ3FyY29kZSc7XG5pbXBvcnQgeyB0cmFuc2FjdCwgc3RhcnRSZW1vdGVTY2VuYXJpbyB9IGZyb20gJ0Bzb2xhbmEtbW9iaWxlL21vYmlsZS13YWxsZXQtYWRhcHRlci1wcm90b2NvbCc7XG5pbXBvcnQgeyBTdGFuZGFyZENvbm5lY3QsIFN0YW5kYXJkRGlzY29ubmVjdCwgU3RhbmRhcmRFdmVudHMgfSBmcm9tICdAd2FsbGV0LXN0YW5kYXJkL2ZlYXR1cmVzJztcbmltcG9ydCBiYXNlNTggZnJvbSAnYnM1OCc7XG5pbXBvcnQgeyBTT0xBTkFfTUFJTk5FVF9DSEFJTiB9IGZyb20gJ0Bzb2xhbmEvd2FsbGV0LXN0YW5kYXJkLWNoYWlucyc7XG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uXHJcblxyXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcclxucHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLlxyXG5cclxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxyXG5SRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFlcclxuQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULFxyXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cclxuTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1JcclxuT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUlxyXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG5cclxuZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cclxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHJlY2VpdmVyLCBzdGF0ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgcmVhZCBwcml2YXRlIG1lbWJlciBmcm9tIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4ga2luZCA9PT0gXCJtXCIgPyBmIDoga2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIpIDogZiA/IGYudmFsdWUgOiBzdGF0ZS5nZXQocmVjZWl2ZXIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0JDEocmVjZWl2ZXIsIHN0YXRlLCB2YWx1ZSwga2luZCwgZikge1xyXG4gICAgaWYgKGtpbmQgPT09IFwibVwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBtZXRob2QgaXMgbm90IHdyaXRhYmxlXCIpO1xyXG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgc2V0dGVyXCIpO1xyXG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiAoa2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIsIHZhbHVlKSA6IGYgPyBmLnZhbHVlID0gdmFsdWUgOiBzdGF0ZS5zZXQocmVjZWl2ZXIsIHZhbHVlKSksIHZhbHVlO1xyXG59XG5cbnZhciBfRW1iZWRkZWRNb2RhbF9pbnN0YW5jZXMsIF9FbWJlZGRlZE1vZGFsX3Jvb3QsIF9FbWJlZGRlZE1vZGFsX2V2ZW50TGlzdGVuZXJzLCBfRW1iZWRkZWRNb2RhbF9saXN0ZW5lcnNBdHRhY2hlZCwgX0VtYmVkZGVkTW9kYWxfaW5qZWN0SFRNTCwgX0VtYmVkZGVkTW9kYWxfYXR0YWNoRXZlbnRMaXN0ZW5lcnMsIF9FbWJlZGRlZE1vZGFsX3JlbW92ZUV2ZW50TGlzdGVuZXJzLCBfRW1iZWRkZWRNb2RhbF9oYW5kbGVLZXlEb3duO1xuY29uc3QgbW9kYWxIdG1sID0gYFxuPGRpdiBjbGFzcz1cIm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1jb250YWluZXJcIiByb2xlPVwiZGlhbG9nXCIgYXJpYS1tb2RhbD1cInRydWVcIiBhcmlhLWxhYmVsbGVkYnk9XCJtb2RhbC10aXRsZVwiPlxuICAgIDxkaXYgZGF0YS1tb2RhbC1jbG9zZSBzdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTtcIj48L2Rpdj5cblx0PGRpdiBjbGFzcz1cIm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1jYXJkXCI+XG5cdFx0PGRpdj5cblx0XHRcdDxidXR0b24gZGF0YS1tb2RhbC1jbG9zZSBjbGFzcz1cIm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1jbG9zZVwiPlxuXHRcdFx0XHQ8c3ZnIHdpZHRoPVwiMTRcIiBoZWlnaHQ9XCIxNFwiPlxuXHRcdFx0XHRcdDxwYXRoIGQ9XCJNIDYuNzEyNSw4LjMwMzY5OTUgMS45MDgyLDEzLjEwODE5OSBjIC0wLjIxMTMsMC4yMTEyIC0wLjQ3NjUsMC4zMTY4IC0wLjc5NTcsMC4zMTY4IC0wLjMxOTIsMCAtMC41ODQ0LC0wLjEwNTYgLTAuNzk1OCwtMC4zMTY4IEMgMC4xMDU2LDEyLjg5Njg5OSAwLDEyLjYzMTY5OSAwLDEyLjMxMjQ5OSBjIDAsLTAuMzE5MiAwLjEwNTYsLTAuNTg0NCAwLjMxNjcsLTAuNzk1OCBMIDUuMTIxMiw2LjcxMjQ5OTUgMC4zMTY3LDEuOTA4MiBDIDAuMTA1NiwxLjY5NjkgMCwxLjQzMTcgMCwxLjExMjUgMCwwLjc5MzMgMC4xMDU2LDAuNTI4MSAwLjMxNjcsMC4zMTY3IDAuNTI4MSwwLjEwNTYgMC43OTMzLDAgMS4xMTI1LDAgMS40MzE3LDAgMS42OTY5LDAuMTA1NiAxLjkwODIsMC4zMTY3IEwgNi43MTI1LDUuMTIxMiAxMS41MTY3LDAuMzE2NyBDIDExLjcyODEsMC4xMDU2IDExLjk5MzMsMCAxMi4zMTI1LDAgYyAwLjMxOTIsMCAwLjU4NDQsMC4xMDU2IDAuNzk1NywwLjMxNjcgMC4yMTEyLDAuMjExNCAwLjMxNjgsMC40NzY2IDAuMzE2OCwwLjc5NTggMCwwLjMxOTIgLTAuMTA1NiwwLjU4NDQgLTAuMzE2OCwwLjc5NTcgTCA4LjMwMzcwMDEsNi43MTI0OTk1IDEzLjEwODIsMTEuNTE2Njk5IGMgMC4yMTEyLDAuMjExNCAwLjMxNjgsMC40NzY2IDAuMzE2OCwwLjc5NTggMCwwLjMxOTIgLTAuMTA1NiwwLjU4NDQgLTAuMzE2OCwwLjc5NTcgLTAuMjExMywwLjIxMTIgLTAuNDc2NSwwLjMxNjggLTAuNzk1NywwLjMxNjggLTAuMzE5MiwwIC0wLjU4NDQsLTAuMTA1NiAtMC43OTU4LC0wLjMxNjggelwiIC8+XG5cdFx0XHRcdDwvc3ZnPlxuXHRcdFx0PC9idXR0b24+XG5cdFx0PC9kaXY+XG5cdFx0PGRpdiBjbGFzcz1cIm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1jb250ZW50XCI+PC9kaXY+XG5cdDwvZGl2PlxuPC9kaXY+XG5gO1xuY29uc3QgY3NzJDIgPSBgXG4ubW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLWNvbnRhaW5lciB7XG4gICAgZGlzcGxheTogZmxleDsgLyogVXNlIGZsZXhib3ggdG8gY2VudGVyIGNvbnRlbnQgKi9cbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgLyogQ2VudGVyIGhvcml6b250YWxseSAqL1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7IC8qIENlbnRlciB2ZXJ0aWNhbGx5ICovXG4gICAgcG9zaXRpb246IGZpeGVkOyAvKiBTdGF5IGluIHBsYWNlICovXG4gICAgei1pbmRleDogMTsgLyogU2l0IG9uIHRvcCAqL1xuICAgIGxlZnQ6IDA7XG4gICAgdG9wOiAwO1xuICAgIHdpZHRoOiAxMDAlOyAvKiBGdWxsIHdpZHRoICovXG4gICAgaGVpZ2h0OiAxMDAlOyAvKiBGdWxsIGhlaWdodCAqL1xuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwwLDAsMC40KTsgLyogQmxhY2sgdy8gb3BhY2l0eSAqL1xuICAgIG92ZXJmbG93LXk6IGF1dG87IC8qIGVuYWJsZSBzY3JvbGxpbmcgKi9cbn1cblxuLm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1jYXJkIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgbWFyZ2luOiBhdXRvIDIwcHg7XG4gICAgbWF4LXdpZHRoOiA3ODBweDtcbiAgICBwYWRkaW5nOiAyMHB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDI0cHg7XG4gICAgYmFja2dyb3VuZDogI2ZmZmZmZjtcbiAgICBmb250LWZhbWlseTogXCJJbnRlciBUaWdodFwiLCBcIlBUIFNhbnNcIiwgQ2FsaWJyaSwgc2Fucy1zZXJpZjtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTIwMCUpO1xuICAgIGFuaW1hdGlvbjogc2xpZGUtaW4gMC41cyBmb3J3YXJkcztcbn1cblxuQGtleWZyYW1lcyBzbGlkZS1pbiB7XG4gICAgMTAwJSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgwJSk7IH1cbn1cblxuLm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1jbG9zZSB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgIHdpZHRoOiAzMnB4O1xuICAgIGhlaWdodDogMzJweDtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgYmFja2dyb3VuZDogI2U0ZTllOTtcbiAgICBib3JkZXI6IG5vbmU7XG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xufVxuXG4ubW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLWNsb3NlOmZvY3VzLXZpc2libGUge1xuICAgIG91dGxpbmUtY29sb3I6IHJlZDtcbn1cblxuLm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1jbG9zZSBzdmcge1xuICAgIGZpbGw6ICM1NDYyNjY7XG4gICAgdHJhbnNpdGlvbjogZmlsbCAyMDBtcyBlYXNlIDBzO1xufVxuXG4ubW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLWNsb3NlOmhvdmVyIHN2ZyB7XG4gICAgZmlsbDogI2ZmZjtcbn1cbmA7XG5jb25zdCBmb250cyA9IGBcbjxsaW5rIHJlbD1cInByZWNvbm5lY3RcIiBocmVmPVwiaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbVwiPlxuPGxpbmsgcmVsPVwicHJlY29ubmVjdFwiIGhyZWY9XCJodHRwczovL2ZvbnRzLmdzdGF0aWMuY29tXCIgY3Jvc3NvcmlnaW4+XG48bGluayBocmVmPVwiaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1JbnRlcitUaWdodDppdGFsLHdnaHRAMCwxMDAuLjkwMDsxLDEwMC4uOTAwJmRpc3BsYXk9c3dhcFwiIHJlbD1cInN0eWxlc2hlZXRcIj5cbmA7XG5jbGFzcyBFbWJlZGRlZE1vZGFsIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgX0VtYmVkZGVkTW9kYWxfaW5zdGFuY2VzLmFkZCh0aGlzKTtcbiAgICAgICAgX0VtYmVkZGVkTW9kYWxfcm9vdC5zZXQodGhpcywgbnVsbCk7XG4gICAgICAgIF9FbWJlZGRlZE1vZGFsX2V2ZW50TGlzdGVuZXJzLnNldCh0aGlzLCB7fSk7XG4gICAgICAgIF9FbWJlZGRlZE1vZGFsX2xpc3RlbmVyc0F0dGFjaGVkLnNldCh0aGlzLCBmYWxzZSk7XG4gICAgICAgIHRoaXMuZG9tID0gbnVsbDtcbiAgICAgICAgdGhpcy5vcGVuID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygnTW9kYWwgb3BlbicpO1xuICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9FbWJlZGRlZE1vZGFsX2luc3RhbmNlcywgXCJtXCIsIF9FbWJlZGRlZE1vZGFsX2F0dGFjaEV2ZW50TGlzdGVuZXJzKS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgaWYgKF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfRW1iZWRkZWRNb2RhbF9yb290LCBcImZcIikpIHtcbiAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0VtYmVkZGVkTW9kYWxfcm9vdCwgXCJmXCIpLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuY2xvc2UgPSAoZXZlbnQgPSB1bmRlZmluZWQpID0+IHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ01vZGFsIGNsb3NlJyk7XG4gICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0VtYmVkZGVkTW9kYWxfaW5zdGFuY2VzLCBcIm1cIiwgX0VtYmVkZGVkTW9kYWxfcmVtb3ZlRXZlbnRMaXN0ZW5lcnMpLmNhbGwodGhpcyk7XG4gICAgICAgICAgICBpZiAoX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9FbWJlZGRlZE1vZGFsX3Jvb3QsIFwiZlwiKSkge1xuICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfRW1iZWRkZWRNb2RhbF9yb290LCBcImZcIikuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIChfYSA9IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfRW1iZWRkZWRNb2RhbF9ldmVudExpc3RlbmVycywgXCJmXCIpWydjbG9zZSddKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZm9yRWFjaCgobGlzdGVuZXIpID0+IGxpc3RlbmVyKGV2ZW50KSk7XG4gICAgICAgIH07XG4gICAgICAgIF9FbWJlZGRlZE1vZGFsX2hhbmRsZUtleURvd24uc2V0KHRoaXMsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VzY2FwZScpXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZShldmVudCk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBCaW5kIG1ldGhvZHMgdG8gZW5zdXJlIGB0aGlzYCBjb250ZXh0IGlzIGNvcnJlY3RcbiAgICAgICAgdGhpcy5pbml0ID0gdGhpcy5pbml0LmJpbmQodGhpcyk7XG4gICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQkMSh0aGlzLCBfRW1iZWRkZWRNb2RhbF9yb290LCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLXJvb3QtdWknKSwgXCJmXCIpO1xuICAgIH1cbiAgICBpbml0KCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0luamVjdGluZyBtb2RhbCcpO1xuICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9FbWJlZGRlZE1vZGFsX2luc3RhbmNlcywgXCJtXCIsIF9FbWJlZGRlZE1vZGFsX2luamVjdEhUTUwpLmNhbGwodGhpcyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBhZGRFdmVudExpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lcikge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgICgoX2EgPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0VtYmVkZGVkTW9kYWxfZXZlbnRMaXN0ZW5lcnMsIFwiZlwiKVtldmVudF0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wdXNoKGxpc3RlbmVyKSkgfHwgKF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfRW1iZWRkZWRNb2RhbF9ldmVudExpc3RlbmVycywgXCJmXCIpW2V2ZW50XSA9IFtsaXN0ZW5lcl0pO1xuICAgICAgICByZXR1cm4gKCkgPT4gdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBsaXN0ZW5lcik7XG4gICAgfVxuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGxpc3RlbmVyKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9FbWJlZGRlZE1vZGFsX2V2ZW50TGlzdGVuZXJzLCBcImZcIilbZXZlbnRdID0gKF9hID0gX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9FbWJlZGRlZE1vZGFsX2V2ZW50TGlzdGVuZXJzLCBcImZcIilbZXZlbnRdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZmlsdGVyKChleGlzdGluZ0xpc3RlbmVyKSA9PiBsaXN0ZW5lciAhPT0gZXhpc3RpbmdMaXN0ZW5lcik7XG4gICAgfVxufVxuX0VtYmVkZGVkTW9kYWxfcm9vdCA9IG5ldyBXZWFrTWFwKCksIF9FbWJlZGRlZE1vZGFsX2V2ZW50TGlzdGVuZXJzID0gbmV3IFdlYWtNYXAoKSwgX0VtYmVkZGVkTW9kYWxfbGlzdGVuZXJzQXR0YWNoZWQgPSBuZXcgV2Vha01hcCgpLCBfRW1iZWRkZWRNb2RhbF9oYW5kbGVLZXlEb3duID0gbmV3IFdlYWtNYXAoKSwgX0VtYmVkZGVkTW9kYWxfaW5zdGFuY2VzID0gbmV3IFdlYWtTZXQoKSwgX0VtYmVkZGVkTW9kYWxfaW5qZWN0SFRNTCA9IGZ1bmN0aW9uIF9FbWJlZGRlZE1vZGFsX2luamVjdEhUTUwoKSB7XG4gICAgLy8gQ2hlY2sgaWYgdGhlIEhUTUwgaGFzIGFscmVhZHkgYmVlbiBpbmplY3RlZFxuICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLXJvb3QtdWknKSkge1xuICAgICAgICBpZiAoIV9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfRW1iZWRkZWRNb2RhbF9yb290LCBcImZcIikpXG4gICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0JDEodGhpcywgX0VtYmVkZGVkTW9kYWxfcm9vdCwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1yb290LXVpJyksIFwiZlwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBDcmVhdGUgYSBjb250YWluZXIgZm9yIHRoZSBtb2RhbFxuICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQkMSh0aGlzLCBfRW1iZWRkZWRNb2RhbF9yb290LCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSwgXCJmXCIpO1xuICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfRW1iZWRkZWRNb2RhbF9yb290LCBcImZcIikuaWQgPSAnbW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLXJvb3QtdWknO1xuICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfRW1iZWRkZWRNb2RhbF9yb290LCBcImZcIikuaW5uZXJIVE1MID0gbW9kYWxIdG1sO1xuICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfRW1iZWRkZWRNb2RhbF9yb290LCBcImZcIikuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAvLyBBZGQgbW9kYWwgY29udGVudFxuICAgIGNvbnN0IGNvbnRlbnQgPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0VtYmVkZGVkTW9kYWxfcm9vdCwgXCJmXCIpLnF1ZXJ5U2VsZWN0b3IoJy5tb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtY29udGVudCcpO1xuICAgIGlmIChjb250ZW50KVxuICAgICAgICBjb250ZW50LmlubmVySFRNTCA9IHRoaXMuY29udGVudEh0bWw7XG4gICAgLy8gQXBwbHkgc3R5bGVzXG4gICAgY29uc3Qgc3R5bGVzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgICBzdHlsZXMuaWQgPSAnbW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLXN0eWxlcyc7XG4gICAgc3R5bGVzLnRleHRDb250ZW50ID0gY3NzJDIgKyB0aGlzLmNvbnRlbnRTdHlsZXM7XG4gICAgLy8gQ3JlYXRlIGEgc2hhZG93IERPTSB0byBlbmNhcHN1bGF0ZSB0aGUgbW9kYWxcbiAgICBjb25zdCBob3N0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgaG9zdC5pbm5lckhUTUwgPSBmb250cztcbiAgICB0aGlzLmRvbSA9IGhvc3QuYXR0YWNoU2hhZG93KHsgbW9kZTogJ2Nsb3NlZCcgfSk7XG4gICAgdGhpcy5kb20uYXBwZW5kQ2hpbGQoc3R5bGVzKTtcbiAgICB0aGlzLmRvbS5hcHBlbmRDaGlsZChfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0VtYmVkZGVkTW9kYWxfcm9vdCwgXCJmXCIpKTtcbiAgICAvLyBBcHBlbmQgdGhlIHNoYWRvdyBET00gaG9zdCB0byB0aGUgYm9keVxuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaG9zdCk7XG59LCBfRW1iZWRkZWRNb2RhbF9hdHRhY2hFdmVudExpc3RlbmVycyA9IGZ1bmN0aW9uIF9FbWJlZGRlZE1vZGFsX2F0dGFjaEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIGlmICghX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9FbWJlZGRlZE1vZGFsX3Jvb3QsIFwiZlwiKSB8fCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0VtYmVkZGVkTW9kYWxfbGlzdGVuZXJzQXR0YWNoZWQsIFwiZlwiKSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGNsb3NlcnMgPSBbLi4uX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9FbWJlZGRlZE1vZGFsX3Jvb3QsIFwiZlwiKS5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1tb2RhbC1jbG9zZV0nKV07XG4gICAgY2xvc2Vycy5mb3JFYWNoKGNsb3NlciA9PiBjbG9zZXIgPT09IG51bGwgfHwgY2xvc2VyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjbG9zZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlKSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCB0aGlzLmNsb3NlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9FbWJlZGRlZE1vZGFsX2hhbmRsZUtleURvd24sIFwiZlwiKSk7XG4gICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9FbWJlZGRlZE1vZGFsX2xpc3RlbmVyc0F0dGFjaGVkLCB0cnVlLCBcImZcIik7XG59LCBfRW1iZWRkZWRNb2RhbF9yZW1vdmVFdmVudExpc3RlbmVycyA9IGZ1bmN0aW9uIF9FbWJlZGRlZE1vZGFsX3JlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xuICAgIGlmICghX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9FbWJlZGRlZE1vZGFsX2xpc3RlbmVyc0F0dGFjaGVkLCBcImZcIikpXG4gICAgICAgIHJldHVybjtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZCcsIHRoaXMuY2xvc2UpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0VtYmVkZGVkTW9kYWxfaGFuZGxlS2V5RG93biwgXCJmXCIpKTtcbiAgICBpZiAoIV9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfRW1iZWRkZWRNb2RhbF9yb290LCBcImZcIikpXG4gICAgICAgIHJldHVybjtcbiAgICBjb25zdCBjbG9zZXJzID0gWy4uLl9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfRW1iZWRkZWRNb2RhbF9yb290LCBcImZcIikucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtbW9kYWwtY2xvc2VdJyldO1xuICAgIGNsb3NlcnMuZm9yRWFjaChjbG9zZXIgPT4gY2xvc2VyID09PSBudWxsIHx8IGNsb3NlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2xvc2VyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZSkpO1xuICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQkMSh0aGlzLCBfRW1iZWRkZWRNb2RhbF9saXN0ZW5lcnNBdHRhY2hlZCwgZmFsc2UsIFwiZlwiKTtcbn07XG5cbmNsYXNzIFJlbW90ZUNvbm5lY3Rpb25Nb2RhbCBleHRlbmRzIEVtYmVkZGVkTW9kYWwge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLmNvbnRlbnRTdHlsZXMgPSBjc3MkMTtcbiAgICAgICAgdGhpcy5jb250ZW50SHRtbCA9IFFSQ29kZUh0bWw7XG4gICAgfVxuICAgIGluaXRXaXRoUVIocXJDb2RlKSB7XG4gICAgICAgIGNvbnN0IF9zdXBlciA9IE9iamVjdC5jcmVhdGUobnVsbCwge1xuICAgICAgICAgICAgaW5pdDogeyBnZXQ6ICgpID0+IHN1cGVyLmluaXQgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIF9zdXBlci5pbml0LmNhbGwodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnBvcHVsYXRlUVJDb2RlKHFyQ29kZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwb3B1bGF0ZVFSQ29kZShxclVybCkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBxcmNvZGVDb250YWluZXIgPSAoX2EgPSB0aGlzLmRvbSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldEVsZW1lbnRCeUlkKCdtb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtcXItY29kZS1jb250YWluZXInKTtcbiAgICAgICAgICAgIGlmIChxcmNvZGVDb250YWluZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBxckNvZGVFbGVtZW50ID0geWllbGQgUVJDb2RlLnRvQ2FudmFzKHFyVXJsLCB7IHdpZHRoOiAyMDAsIG1hcmdpbjogMCB9KTtcbiAgICAgICAgICAgICAgICBpZiAocXJjb2RlQ29udGFpbmVyLmZpcnN0RWxlbWVudENoaWxkICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHFyY29kZUNvbnRhaW5lci5yZXBsYWNlQ2hpbGQocXJDb2RlRWxlbWVudCwgcXJjb2RlQ29udGFpbmVyLmZpcnN0RWxlbWVudENoaWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICBxcmNvZGVDb250YWluZXIuYXBwZW5kQ2hpbGQocXJDb2RlRWxlbWVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdRUkNvZGUgQ29udGFpbmVyIG5vdCBmb3VuZCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5jb25zdCBRUkNvZGVIdG1sID0gYFxuPGRpdiBjbGFzcz1cIm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1xci1jb250ZW50XCI+XG4gICAgPGRpdj5cbiAgICAgICAgPHN2ZyBjbGFzcz1cIm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1pY29uXCIgd2lkdGg9XCIxMDAlXCIgaGVpZ2h0PVwiMTAwJVwiPlxuICAgICAgICAgICAgPGNpcmNsZSByPVwiNTJcIiBjeD1cIjUzXCIgY3k9XCI1M1wiIGZpbGw9XCIjOTliM2JlXCIgc3Ryb2tlPVwiIzAwMDAwMFwiIHN0cm9rZS13aWR0aD1cIjJcIi8+XG4gICAgICAgICAgICA8cGF0aCBkPVwibSA1Myw4Mi43MzA1IGMgLTMuMzExNiwwIC02LjEzNjEsLTEuMTY5IC04LjQ3MzUsLTMuNTA3IC0yLjMzOCwtMi4zMzggLTMuNTA3LC01LjE2MjUgLTMuNTA3LC04LjQ3MzUgMCwtMy4zMTE2IDEuMTY5LC02LjEzNjQgMy41MDcsLTguNDc0NCAyLjMzNzQsLTIuMzM4IDUuMTYxOSwtMy41MDcgOC40NzM1LC0zLjUwNyAzLjMxMTYsMCA2LjEzNjEsMS4xNjkgOC40NzM1LDMuNTA3IDIuMzM4LDIuMzM4IDMuNTA3LDUuMTYyOCAzLjUwNyw4LjQ3NDQgMCwzLjMxMSAtMS4xNjksNi4xMzU1IC0zLjUwNyw4LjQ3MzUgLTIuMzM3NCwyLjMzOCAtNS4xNjE5LDMuNTA3IC04LjQ3MzUsMy41MDcgeiBtIDAuMDA3LC01LjI1IGMgMS44NTMyLDAgMy40MzcsLTAuNjU5OCA0Ljc1MTIsLTEuOTc5MyAxLjMxNDksLTEuMzE5NSAxLjk3MjMsLTIuOTA1OCAxLjk3MjMsLTQuNzU5MSAwLC0xLjg1MjYgLTAuNjU5OCwtMy40MzY0IC0xLjk3OTMsLTQuNzUxMiAtMS4zMTk1LC0xLjMxNDkgLTIuOTA1NSwtMS45NzIzIC00Ljc1ODIsLTEuOTcyMyAtMS44NTMzLDAgLTMuNDM3LDAuNjU5OCAtNC43NTEzLDEuOTc5MyAtMS4zMTQ4LDEuMzE5NSAtMS45NzIyLDIuOTA1OCAtMS45NzIyLDQuNzU5MSAwLDEuODUyNyAwLjY1OTcsMy40MzY0IDEuOTc5Miw0Ljc1MTIgMS4zMTk1LDEuMzE0OSAyLjkwNTYsMS45NzIzIDQuNzU4MywxLjk3MjMgeiBtIC0yOCwtMzMuNTcyOSAtMy44NSwtMy42MzQ3IGMgNC4xMTk1LC00LjAyNSA4Ljg3OTIsLTcuMTk4NCAxNC4yNzkxLC05LjUyIDUuNDAwNSwtMi4zMjIzIDExLjI1NTEsLTMuNDgzNCAxNy41NjM5LC0zLjQ4MzQgNi4zMDg3LDAgMTIuMTYzNCwxLjE2MTEgMTcuNTYzOSwzLjQ4MzQgNS4zOTk5LDIuMzIxNiAxMC4xNTk2LDUuNDk1IDE0LjI3OTEsOS41MiBsIC0zLjg1LDMuNjM0NyBDIDc3LjI5OTksNDAuMzU4IDczLjA2ODQsMzcuNTcyNiA2OC4yOTg1LDM1LjU1MTQgNjMuNTI5MiwzMy41MzAxIDU4LjQyOTYsMzIuNTE5NSA1MywzMi41MTk1IGMgLTUuNDI5NywwIC0xMC41MjkyLDEuMDEwNiAtMTUuMjk4NSwzLjAzMTkgLTQuNzY5OSwyLjAyMTIgLTkuMDAxNCw0LjgwNjYgLTEyLjY5NDUsOC4zNTYyIHogbSA0NC42MjUsMTAuODc3MSBjIC0yLjI3MDksLTIuMTA0NiAtNC43OTYyLC0zLjcxNjcgLTcuNTc1OCwtNC44MzYxIC0yLjc3OTUsLTEuMTIgLTUuNzk4MywtMS42OCAtOS4wNTYyLC0xLjY4IC0zLjI1NzksMCAtNi4yNjIxLDAuNTYgLTkuMDEyNSwxLjY4IC0yLjc1MDQsMS4xMTk0IC01LjI5MDMsMi43MzE1IC03LjYxOTUsNC44MzYxIEwgMzIuNTE4OSw1MS4xNSBjIDIuODM1NSwtMi42MDI4IDUuOTc3NywtNC42MDg2IDkuNDI2MywtNi4wMTc0IDMuNDQ4MSwtMS40MDg3IDcuMTMzLC0yLjExMzEgMTEuMDU0OCwtMi4xMTMxIDMuOTIxNywwIDcuNTk3OSwwLjcwNDQgMTEuMDI4NSwyLjExMzEgMy40MywxLjQwODggNi41NjMxLDMuNDE0NiA5LjM5OTIsNi4wMTc0IHpcIi8+XG4gICAgICAgIDwvc3ZnPlxuICAgICAgICA8ZGl2IGNsYXNzPVwibW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLXRpdGxlXCI+UmVtb3RlIE1vYmlsZSBXYWxsZXQgQWRhcHRlcjwvZGl2PlxuICAgIDwvZGl2PlxuICAgIDxkaXY+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8aDQgY2xhc3M9XCJtb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtcXItbGFiZWxcIj5cbiAgICAgICAgICAgICAgICBPcGVuIHlvdXIgd2FsbGV0IGFuZCBzY2FuIHRoaXMgY29kZVxuICAgICAgICAgICAgPC9oND5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgaWQ9XCJtb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtcXItY29kZS1jb250YWluZXJcIiBjbGFzcz1cIm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1xci1jb2RlLWNvbnRhaW5lclwiPjwvZGl2PlxuICAgIDwvZGl2PlxuPC9kaXY+XG48ZGl2IGNsYXNzPVwibW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLWRpdmlkZXJcIj48aHI+PC9kaXY+XG48ZGl2IGNsYXNzPVwibW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLWZvb3RlclwiPlxuICAgIDxkaXYgY2xhc3M9XCJtb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtc3VidGl0bGVcIj5cbiAgICAgICAgRm9sbG93IHRoZSBpbnN0cnVjdGlvbnMgb24geW91ciBkZXZpY2UuIFdoZW4geW91J3JlIGZpbmlzaGVkLCB0aGlzIHNjcmVlbiB3aWxsIHVwZGF0ZS5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwibW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLXByb2dyZXNzLWJhZGdlXCI+XG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3Bpbm5lclwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJsZWZ0V3JhcHBlclwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibGVmdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNpcmNsZVwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicmlnaHRXcmFwcGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyaWdodFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNpcmNsZVwiPjwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdj5XYWl0aW5nIGZvciBzY2FuPC9kaXY+XG4gICAgPC9kaXY+XG48L2Rpdj5cbmA7XG5jb25zdCBjc3MkMSA9IGBcbi5tb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtcXItY29udGVudCB7XG4gICAgZGlzcGxheTogZmxleDsgXG4gICAgbWFyZ2luLXRvcDogMTBweDtcbiAgICBwYWRkaW5nOiAxMHB4O1xufVxuXG4ubW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLXFyLWNvbnRlbnQgPiBkaXY6Zmlyc3QtY2hpbGQge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICBmbGV4OiAyO1xuICAgIG1hcmdpbi10b3A6IGF1dG87XG4gICAgbWFyZ2luLXJpZ2h0OiAzMHB4O1xufVxuXG4ubW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLXFyLWNvbnRlbnQgPiBkaXY6bnRoLWNoaWxkKDIpIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgZmxleDogMTtcbiAgICBtYXJnaW4tbGVmdDogYXV0bztcbn1cblxuLm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1mb290ZXIge1xuICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgcGFkZGluZzogMTBweDtcbn1cblxuLm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1pY29uIHt9XG5cbi5tb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtdGl0bGUge1xuICAgIGNvbG9yOiAjMDAwMDAwO1xuICAgIGZvbnQtc2l6ZTogMi41ZW07XG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcbn1cblxuLm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1xci1sYWJlbCB7XG4gICAgdGV4dC1hbGlnbjogcmlnaHQ7XG4gICAgY29sb3I6ICMwMDAwMDA7XG59XG5cbi5tb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtcXItY29kZS1jb250YWluZXIge1xuICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xufVxuXG4ubW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLWRpdmlkZXIge1xuICAgIG1hcmdpbi10b3A6IDIwcHg7XG4gICAgcGFkZGluZy1sZWZ0OiAxMHB4O1xuICAgIHBhZGRpbmctcmlnaHQ6IDEwcHg7XG59XG5cbi5tb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtZGl2aWRlciBociB7XG4gICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNEOURFREU7XG59XG5cbi5tb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtc3VidGl0bGUge1xuICAgIG1hcmdpbjogYXV0bztcbiAgICBtYXJnaW4tcmlnaHQ6IDYwcHg7XG4gICAgcGFkZGluZzogMjBweDtcbiAgICBjb2xvcjogIzZFODI4Njtcbn1cblxuLm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1wcm9ncmVzcy1iYWRnZSB7XG4gICAgZGlzcGxheTogZmxleDtcbiAgICBiYWNrZ3JvdW5kOiAjRjdGOEY4O1xuICAgIGhlaWdodDogNTZweDtcbiAgICBtaW4td2lkdGg6IDIwMHB4O1xuICAgIG1hcmdpbjogYXV0bztcbiAgICBwYWRkaW5nLWxlZnQ6IDIwcHg7XG4gICAgcGFkZGluZy1yaWdodDogMjBweDtcbiAgICBib3JkZXItcmFkaXVzOiAxOHB4O1xuICAgIGNvbG9yOiAjQThCNkI4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG59XG5cbi5tb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtcHJvZ3Jlc3MtYmFkZ2UgPiBkaXY6Zmlyc3QtY2hpbGQge1xuICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICAgIG1hcmdpbi1yaWdodDogMjBweDtcbn1cblxuLm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1wcm9ncmVzcy1iYWRnZSA+IGRpdjpudGgtY2hpbGQoMikge1xuICAgIG1hcmdpbi1yaWdodDogYXV0bztcbn1cblxuLyogU21hbGxlciBzY3JlZW5zICovXG5AbWVkaWEgYWxsIGFuZCAobWF4LXdpZHRoOiA2MDBweCkge1xuICAgIC5tb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtY2FyZCB7XG4gICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICB9XG4gICAgLm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1xci1jb250ZW50IHtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICB9XG4gICAgLm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1xci1jb250ZW50ID4gZGl2OmZpcnN0LWNoaWxkIHtcbiAgICAgICAgbWFyZ2luOiBhdXRvO1xuICAgIH1cbiAgICAubW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLXFyLWNvbnRlbnQgPiBkaXY6bnRoLWNoaWxkKDIpIHtcbiAgICAgICAgbWFyZ2luOiBhdXRvO1xuICAgICAgICBmbGV4OiAyIGF1dG87XG4gICAgfVxuICAgIC5tb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtZm9vdGVyIHtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICB9XG4gICAgLm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1pY29uIHtcbiAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICB9XG4gICAgLm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC10aXRsZSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMS41ZW07XG4gICAgfVxuICAgIC5tb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtc3VidGl0bGUge1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IHVuc2V0O1xuICAgIH1cbiAgICAubW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLXFyLWxhYmVsIHtcbiAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIH1cbiAgICAubW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLXFyLWNvZGUtY29udGFpbmVyIHtcbiAgICAgICAgbWFyZ2luOiBhdXRvO1xuICAgIH1cbn1cblxuLyogU3Bpbm5lciAqL1xuQGtleWZyYW1lcyBzcGluTGVmdCB7XG4gICAgMCUge1xuICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgyMGRlZyk7XG4gICAgfVxuICAgIDUwJSB7XG4gICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDE2MGRlZyk7XG4gICAgfVxuICAgIDEwMCUge1xuICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgyMGRlZyk7XG4gICAgfVxufVxuQGtleWZyYW1lcyBzcGluUmlnaHQge1xuICAgIDAlIHtcbiAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMTYwZGVnKTtcbiAgICB9XG4gICAgNTAlIHtcbiAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMjBkZWcpO1xuICAgIH1cbiAgICAxMDAlIHtcbiAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMTYwZGVnKTtcbiAgICB9XG59XG5Aa2V5ZnJhbWVzIHNwaW4ge1xuICAgIDAlIHtcbiAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7XG4gICAgfVxuICAgIDEwMCUge1xuICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgyNTIwZGVnKTtcbiAgICB9XG59XG5cbi5zcGlubmVyIHtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgd2lkdGg6IDEuNWVtO1xuICAgIGhlaWdodDogMS41ZW07XG4gICAgbWFyZ2luOiBhdXRvO1xuICAgIGFuaW1hdGlvbjogc3BpbiAxMHMgbGluZWFyIGluZmluaXRlO1xufVxuLnNwaW5uZXI6OmJlZm9yZSB7XG4gICAgY29udGVudDogXCJcIjtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICAgIGJvdHRvbTogMDtcbiAgICBsZWZ0OiAwO1xuICAgIHJpZ2h0OiAwO1xufVxuLnJpZ2h0LCAucmlnaHRXcmFwcGVyLCAubGVmdCwgLmxlZnRXcmFwcGVyIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgd2lkdGg6IC43NWVtO1xuICAgIGhlaWdodDogMS41ZW07XG59XG4ubGVmdCwgLmxlZnRXcmFwcGVyIHtcbiAgICBsZWZ0OiAwO1xufVxuLnJpZ2h0IHtcbiAgICBsZWZ0OiAtMTJweDtcbn1cbi5yaWdodFdyYXBwZXIge1xuICAgIHJpZ2h0OiAwO1xufVxuLmNpcmNsZSB7XG4gICAgYm9yZGVyOiAuMTI1ZW0gc29saWQgI0E4QjZCODtcbiAgICB3aWR0aDogMS4yNWVtOyAvKiAxLjVlbSAtIDIqMC4xMjVlbSBib3JkZXIgKi9cbiAgICBoZWlnaHQ6IDEuMjVlbTsgLyogMS41ZW0gLSAyKjAuMTI1ZW0gYm9yZGVyICovXG4gICAgYm9yZGVyLXJhZGl1czogMC43NWVtOyAvKiAwLjUqMS41ZW0gc3Bpbm5lciBzaXplIDggKi9cbn1cbi5sZWZ0IHtcbiAgICB0cmFuc2Zvcm0tb3JpZ2luOiAxMDAlIDUwJTtcbiAgICBhbmltYXRpb246IHNwaW5MZWZ0IDIuNXMgY3ViaWMtYmV6aWVyKC4yLDAsLjgsMSkgaW5maW5pdGU7XG59XG4ucmlnaHQge1xuICAgIHRyYW5zZm9ybS1vcmlnaW46IDEwMCUgNTAlO1xuICAgIGFuaW1hdGlvbjogc3BpblJpZ2h0IDIuNXMgY3ViaWMtYmV6aWVyKC4yLDAsLjgsMSkgaW5maW5pdGU7XG59XG5gO1xuXG5jb25zdCBpY29uID0gJ2RhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjNhV1IwYUQwaU1qUWlJR2hsYVdkb2REMGlNalFpSUhacFpYZENiM2c5SWpBZ01DQXlOQ0F5TkNJZ1ptbHNiRDBpYm05dVpTSWdlRzFzYm5NOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6SXdNREF2YzNabklqNEtQSEJoZEdnZ1ptbHNiQzF5ZFd4bFBTSmxkbVZ1YjJSa0lpQmpiR2x3TFhKMWJHVTlJbVYyWlc1dlpHUWlJR1E5SWswM0lESXVOVWd4TjBNeE55NDRNamcwSURJdU5TQXhPQzQxSURNdU1UY3hOVGNnTVRndU5TQTBWakl3UXpFNExqVWdNakF1T0RJNE5DQXhOeTQ0TWpnMElESXhMalVnTVRjZ01qRXVOVWczUXpZdU1UY3hOVGNnTWpFdU5TQTFMalVnTWpBdU9ESTROQ0ExTGpVZ01qQldORU0xTGpVZ015NHhOekUxTnlBMkxqRTNNVFUzSURJdU5TQTNJREl1TlZwTk15QTBRek1nTVM0M09UQTROaUEwTGpjNU1EZzJJREFnTnlBd1NERTNRekU1TGpJd09URWdNQ0F5TVNBeExqYzVNRGcySURJeElEUldNakJETWpFZ01qSXVNakE1TVNBeE9TNHlNRGt4SURJMElERTNJREkwU0RkRE5DNDNPVEE0TmlBeU5DQXpJREl5TGpJd09URWdNeUF5TUZZMFdrMHhNU0EwTGpZeE5UTTRRekV3TGpRME56Y2dOQzQyTVRVek9DQXhNQ0ExTGpBMk16RWdNVEFnTlM0Mk1UVXpPRlkyTGpNNE5EWXlRekV3SURZdU9UTTJPU0F4TUM0ME5EYzNJRGN1TXpnME5qSWdNVEVnTnk0ek9EUTJNa2d4TTBNeE15NDFOVEl6SURjdU16ZzBOaklnTVRRZ05pNDVNelk1SURFMElEWXVNemcwTmpKV05TNDJNVFV6T0VNeE5DQTFMakEyTXpFZ01UTXVOVFV5TXlBMExqWXhOVE00SURFeklEUXVOakUxTXpoSU1URmFJaUJtYVd4c1BTSWpSRU5DT0VaR0lpOCtDand2YzNablBnbz0nO1xuXG5mdW5jdGlvbiBmcm9tVWludDhBcnJheShieXRlQXJyYXkpIHtcbiAgICByZXR1cm4gd2luZG93LmJ0b2EoU3RyaW5nLmZyb21DaGFyQ29kZS5jYWxsKG51bGwsIC4uLmJ5dGVBcnJheSkpO1xufVxuZnVuY3Rpb24gdG9VaW50OEFycmF5KGJhc2U2NEVuY29kZWRCeXRlQXJyYXkpIHtcbiAgICByZXR1cm4gbmV3IFVpbnQ4QXJyYXkod2luZG93XG4gICAgICAgIC5hdG9iKGJhc2U2NEVuY29kZWRCeXRlQXJyYXkpXG4gICAgICAgIC5zcGxpdCgnJylcbiAgICAgICAgLm1hcCgoYykgPT4gYy5jaGFyQ29kZUF0KDApKSk7XG59XG5cbnZhciBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2luc3RhbmNlcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9saXN0ZW5lcnMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfdmVyc2lvbiwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9uYW1lLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3VybCwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9pY29uLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2FwcElkZW50aXR5LCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb24sIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbkNhY2hlLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Nvbm5lY3RpbmcsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY29ubmVjdGlvbkdlbmVyYXRpb24sIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY2hhaW5zLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2NoYWluU2VsZWN0b3IsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfb3B0aW9uYWxGZWF0dXJlcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9vbldhbGxldE5vdEZvdW5kLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X29uLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2VtaXQsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfb2ZmLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Nvbm5lY3QsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfcGVyZm9ybUF1dGhvcml6YXRpb24sIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfaGFuZGxlQXV0aG9yaXphdGlvblJlc3VsdCwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9oYW5kbGVXYWxsZXRDYXBhYmlsaXRpZXNSZXN1bHQsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfcGVyZm9ybVJlYXV0aG9yaXphdGlvbiwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9kaXNjb25uZWN0LCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3RyYW5zYWN0LCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Fzc2VydElzQXV0aG9yaXplZCwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hY2NvdW50c1RvV2FsbGV0U3RhbmRhcmRBY2NvdW50cywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtU2lnblRyYW5zYWN0aW9ucywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtU2lnbkFuZFNlbmRUcmFuc2FjdGlvbiwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9zaWduQW5kU2VuZFRyYW5zYWN0aW9uLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3NpZ25UcmFuc2FjdGlvbiwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9zaWduTWVzc2FnZSwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9zaWduSW4sIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfcGVyZm9ybVNpZ25JbiwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfaW5zdGFuY2VzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9saXN0ZW5lcnMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3ZlcnNpb24sIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X25hbWUsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3VybCwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfaWNvbiwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXBwSWRlbnRpdHksIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb24sIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb25DYWNoZSwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY29ubmVjdGluZywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY29ubmVjdGlvbkdlbmVyYXRpb24sIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2NoYWlucywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY2hhaW5TZWxlY3RvciwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfb3B0aW9uYWxGZWF0dXJlcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfb25XYWxsZXROb3RGb3VuZCwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfaG9zdEF1dGhvcml0eSwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2Vzc2lvbiwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfb24sIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2VtaXQsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X29mZiwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY29ubmVjdCwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfcGVyZm9ybUF1dGhvcml6YXRpb24sIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2hhbmRsZUF1dGhvcml6YXRpb25SZXN1bHQsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2hhbmRsZVdhbGxldENhcGFiaWxpdGllc1Jlc3VsdCwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfcGVyZm9ybVJlYXV0aG9yaXphdGlvbiwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfZGlzY29ubmVjdCwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfdHJhbnNhY3QsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Fzc2VydElzQXV0aG9yaXplZCwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYWNjb3VudHNUb1dhbGxldFN0YW5kYXJkQWNjb3VudHMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1TaWduVHJhbnNhY3Rpb25zLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtU2lnbkFuZFNlbmRUcmFuc2FjdGlvbiwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2lnbkFuZFNlbmRUcmFuc2FjdGlvbiwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2lnblRyYW5zYWN0aW9uLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9zaWduTWVzc2FnZSwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2lnbkluLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtU2lnbkluO1xuY29uc3QgU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldE5hbWUgPSAnTW9iaWxlIFdhbGxldCBBZGFwdGVyJztcbmNvbnN0IFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJSZW1vdGVXYWxsZXROYW1lID0gJ1JlbW90ZSBNb2JpbGUgV2FsbGV0IEFkYXB0ZXInO1xuY29uc3QgU0lHTkFUVVJFX0xFTkdUSF9JTl9CWVRFUyA9IDY0O1xuY29uc3QgREVGQVVMVF9GRUFUVVJFUyA9IFtTb2xhbmFTaWduQW5kU2VuZFRyYW5zYWN0aW9uLCBTb2xhbmFTaWduVHJhbnNhY3Rpb24sIFNvbGFuYVNpZ25NZXNzYWdlLCBTb2xhbmFTaWduSW5dO1xuY2xhc3MgTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0IHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9pbnN0YW5jZXMuYWRkKHRoaXMpO1xuICAgICAgICBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2xpc3RlbmVycy5zZXQodGhpcywge30pO1xuICAgICAgICBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3ZlcnNpb24uc2V0KHRoaXMsICcxLjAuMCcpOyAvLyB3YWxsZXQtc3RhbmRhcmQgdmVyc2lvblxuICAgICAgICBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X25hbWUuc2V0KHRoaXMsIFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXROYW1lKTtcbiAgICAgICAgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF91cmwuc2V0KHRoaXMsICdodHRwczovL3NvbGFuYW1vYmlsZS5jb20vd2FsbGV0cycpO1xuICAgICAgICBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2ljb24uc2V0KHRoaXMsIGljb24pO1xuICAgICAgICBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2FwcElkZW50aXR5LnNldCh0aGlzLCB2b2lkIDApO1xuICAgICAgICBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb24uc2V0KHRoaXMsIHZvaWQgMCk7XG4gICAgICAgIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbkNhY2hlLnNldCh0aGlzLCB2b2lkIDApO1xuICAgICAgICBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Nvbm5lY3Rpbmcuc2V0KHRoaXMsIGZhbHNlKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV2ZXJ5IHRpbWUgdGhlIGNvbm5lY3Rpb24gaXMgcmVjeWNsZWQgaW4gc29tZSB3YXkgKGVnLiBgZGlzY29ubmVjdCgpYCBpcyBjYWxsZWQpXG4gICAgICAgICAqIGluY3JlbWVudCB0aGlzIGFuZCB1c2UgaXQgdG8gbWFrZSBzdXJlIHRoYXQgYHRyYW5zYWN0YCBjYWxscyBmcm9tIHRoZSBwcmV2aW91c1xuICAgICAgICAgKiAnZ2VuZXJhdGlvbicgZG9uJ3QgY29udGludWUgdG8gZG8gd29yayBhbmQgdGhyb3cgZXhjZXB0aW9ucy5cbiAgICAgICAgICovXG4gICAgICAgIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY29ubmVjdGlvbkdlbmVyYXRpb24uc2V0KHRoaXMsIDApO1xuICAgICAgICBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2NoYWlucy5zZXQodGhpcywgW10pO1xuICAgICAgICBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2NoYWluU2VsZWN0b3Iuc2V0KHRoaXMsIHZvaWQgMCk7XG4gICAgICAgIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfb3B0aW9uYWxGZWF0dXJlcy5zZXQodGhpcywgdm9pZCAwKTtcbiAgICAgICAgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9vbldhbGxldE5vdEZvdW5kLnNldCh0aGlzLCB2b2lkIDApO1xuICAgICAgICBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X29uLnNldCh0aGlzLCAoZXZlbnQsIGxpc3RlbmVyKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAoKF9hID0gX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfbGlzdGVuZXJzLCBcImZcIilbZXZlbnRdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucHVzaChsaXN0ZW5lcikpIHx8IChfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9saXN0ZW5lcnMsIFwiZlwiKVtldmVudF0gPSBbbGlzdGVuZXJdKTtcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9pbnN0YW5jZXMsIFwibVwiLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X29mZikuY2FsbCh0aGlzLCBldmVudCwgbGlzdGVuZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jb25uZWN0LnNldCh0aGlzLCAoeyBzaWxlbnQgfSA9IHt9KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBpZiAoX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY29ubmVjdGluZywgXCJmXCIpIHx8IHRoaXMuY29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgYWNjb3VudHM6IHRoaXMuYWNjb3VudHMgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Nvbm5lY3RpbmcsIHRydWUsIFwiZlwiKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKHNpbGVudCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWNoZWRBdXRob3JpemF0aW9uID0geWllbGQgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbkNhY2hlLCBcImZcIikuZ2V0KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjYWNoZWRBdXRob3JpemF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9oYW5kbGVXYWxsZXRDYXBhYmlsaXRpZXNSZXN1bHQsIFwiZlwiKS5jYWxsKHRoaXMsIGNhY2hlZEF1dGhvcml6YXRpb24uY2FwYWJpbGl0aWVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHlpZWxkIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2hhbmRsZUF1dGhvcml6YXRpb25SZXN1bHQsIFwiZlwiKS5jYWxsKHRoaXMsIGNhY2hlZEF1dGhvcml6YXRpb24pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgYWNjb3VudHM6IHRoaXMuYWNjb3VudHMgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfcGVyZm9ybUF1dGhvcml6YXRpb24sIFwiZlwiKS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKChlIGluc3RhbmNlb2YgRXJyb3IgJiYgZS5tZXNzYWdlKSB8fCAnVW5rbm93biBlcnJvcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY29ubmVjdGluZywgZmFsc2UsIFwiZlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IGFjY291bnRzOiB0aGlzLmFjY291bnRzIH07XG4gICAgICAgIH0pKTtcbiAgICAgICAgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtQXV0aG9yaXphdGlvbi5zZXQodGhpcywgKHNpZ25JblBheWxvYWQpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FjaGVkQXV0aG9yaXphdGlvblJlc3VsdCA9IHlpZWxkIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb25DYWNoZSwgXCJmXCIpLmdldCgpO1xuICAgICAgICAgICAgICAgIGlmIChjYWNoZWRBdXRob3JpemF0aW9uUmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IEV2YWx1YXRlIHdoZXRoZXIgdGhlcmUncyBhbnkgdGhyZWF0IHRvIG5vdCBgYXdhaXRpbmdgIHRoaXMgZXhwcmVzc2lvblxuICAgICAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9oYW5kbGVBdXRob3JpemF0aW9uUmVzdWx0LCBcImZcIikuY2FsbCh0aGlzLCBjYWNoZWRBdXRob3JpemF0aW9uUmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlZEF1dGhvcml6YXRpb25SZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkQ2hhaW4gPSB5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jaGFpblNlbGVjdG9yLCBcImZcIikuc2VsZWN0KF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2NoYWlucywgXCJmXCIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geWllbGQgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfdHJhbnNhY3QsIFwiZlwiKS5jYWxsKHRoaXMsICh3YWxsZXQpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgW2NhcGFiaWxpdGllcywgbXdhQXV0aG9yaXphdGlvblJlc3VsdF0gPSB5aWVsZCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgICAgICAgICB3YWxsZXQuZ2V0Q2FwYWJpbGl0aWVzKCksXG4gICAgICAgICAgICAgICAgICAgICAgICB3YWxsZXQuYXV0aG9yaXplKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGFpbjogc2VsZWN0ZWRDaGFpbixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZGVudGl0eTogX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXBwSWRlbnRpdHksIFwiZlwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWduX2luX3BheWxvYWQ6IHNpZ25JblBheWxvYWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWNjb3VudHMgPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hY2NvdW50c1RvV2FsbGV0U3RhbmRhcmRBY2NvdW50cywgXCJmXCIpLmNhbGwodGhpcywgbXdhQXV0aG9yaXphdGlvblJlc3VsdC5hY2NvdW50cyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGF1dGhvcml6YXRpb24gPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG13YUF1dGhvcml6YXRpb25SZXN1bHQpLCB7IGFjY291bnRzLCBjaGFpbjogc2VsZWN0ZWRDaGFpbiwgY2FwYWJpbGl0aWVzOiBjYXBhYmlsaXRpZXMgfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IEV2YWx1YXRlIHdoZXRoZXIgdGhlcmUncyBhbnkgdGhyZWF0IHRvIG5vdCBgYXdhaXRpbmdgIHRoaXMgZXhwcmVzc2lvblxuICAgICAgICAgICAgICAgICAgICBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9oYW5kbGVXYWxsZXRDYXBhYmlsaXRpZXNSZXN1bHQsIFwiZlwiKS5jYWxsKHRoaXMsIGNhcGFiaWxpdGllcyksXG4gICAgICAgICAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uQ2FjaGUsIFwiZlwiKS5zZXQoYXV0aG9yaXphdGlvbiksXG4gICAgICAgICAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9oYW5kbGVBdXRob3JpemF0aW9uUmVzdWx0LCBcImZcIikuY2FsbCh0aGlzLCBhdXRob3JpemF0aW9uKSxcbiAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhdXRob3JpemF0aW9uO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKChlIGluc3RhbmNlb2YgRXJyb3IgJiYgZS5tZXNzYWdlKSB8fCAnVW5rbm93biBlcnJvcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfaGFuZGxlQXV0aG9yaXphdGlvblJlc3VsdC5zZXQodGhpcywgKGF1dGhvcml6YXRpb24pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfYTtcbiAgICAgICAgICAgIGNvbnN0IGRpZFB1YmxpY0tleXNDaGFuZ2UgPSBcbiAgICAgICAgICAgIC8vIENhc2UgMTogV2Ugc3RhcnRlZCBmcm9tIGhhdmluZyBubyBhdXRob3JpemF0aW9uLlxuICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbiwgXCJmXCIpID09IG51bGwgfHxcbiAgICAgICAgICAgICAgICAvLyBDYXNlIDI6IFRoZSBudW1iZXIgb2YgYXV0aG9yaXplZCBhY2NvdW50cyBjaGFuZ2VkLlxuICAgICAgICAgICAgICAgICgoX2EgPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uLCBcImZcIikpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5hY2NvdW50cy5sZW5ndGgpICE9PSBhdXRob3JpemF0aW9uLmFjY291bnRzLmxlbmd0aCB8fFxuICAgICAgICAgICAgICAgIC8vIENhc2UgMzogVGhlIG5ldyBsaXN0IG9mIGFkZHJlc3NlcyBpc24ndCBleGFjdGx5IHRoZSBzYW1lIGFzIHRoZSBvbGQgbGlzdCwgaW4gdGhlIHNhbWUgb3JkZXIuXG4gICAgICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbiwgXCJmXCIpLmFjY291bnRzLnNvbWUoKGFjY291bnQsIGlpKSA9PiBhY2NvdW50LmFkZHJlc3MgIT09IGF1dGhvcml6YXRpb24uYWNjb3VudHNbaWldLmFkZHJlc3MpO1xuICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbiwgYXV0aG9yaXphdGlvbiwgXCJmXCIpO1xuICAgICAgICAgICAgaWYgKGRpZFB1YmxpY0tleXNDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9pbnN0YW5jZXMsIFwibVwiLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2VtaXQpLmNhbGwodGhpcywgJ2NoYW5nZScsIHsgYWNjb3VudHM6IHRoaXMuYWNjb3VudHMgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9oYW5kbGVXYWxsZXRDYXBhYmlsaXRpZXNSZXN1bHQuc2V0KHRoaXMsIChjYXBhYmlsaXRpZXMpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIC8vIFRPRE86IGludmVzdGlnYXRlIHdoeSB1c2luZyBTb2xhbmFTaWduVHJhbnNhY3Rpb25zIGNvbnN0YW50IGJyZWFrcyB0cmVlc2hha2luZ1xuICAgICAgICAgICAgY29uc3Qgc3VwcG9ydHNTaWduVHJhbnNhY3Rpb24gPSBjYXBhYmlsaXRpZXMuZmVhdHVyZXMuaW5jbHVkZXMoJ3NvbGFuYTpzaWduVHJhbnNhY3Rpb25zJyk7IC8vU29sYW5hU2lnblRyYW5zYWN0aW9ucyk7XG4gICAgICAgICAgICBjb25zdCBzdXBwb3J0c1NpZ25BbmRTZW5kVHJhbnNhY3Rpb24gPSBjYXBhYmlsaXRpZXMuc3VwcG9ydHNfc2lnbl9hbmRfc2VuZF90cmFuc2FjdGlvbnM7XG4gICAgICAgICAgICBjb25zdCBkaWRDYXBhYmlsaXRpZXNDaGFuZ2UgPSBTb2xhbmFTaWduQW5kU2VuZFRyYW5zYWN0aW9uIGluIHRoaXMuZmVhdHVyZXMgIT09IHN1cHBvcnRzU2lnbkFuZFNlbmRUcmFuc2FjdGlvbiB8fFxuICAgICAgICAgICAgICAgIFNvbGFuYVNpZ25UcmFuc2FjdGlvbiBpbiB0aGlzLmZlYXR1cmVzICE9PSBzdXBwb3J0c1NpZ25UcmFuc2FjdGlvbjtcbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X29wdGlvbmFsRmVhdHVyZXMsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgKChzdXBwb3J0c1NpZ25BbmRTZW5kVHJhbnNhY3Rpb24gfHwgKCFzdXBwb3J0c1NpZ25BbmRTZW5kVHJhbnNhY3Rpb24gJiYgIXN1cHBvcnRzU2lnblRyYW5zYWN0aW9uKSkgJiYge1xuICAgICAgICAgICAgICAgIFtTb2xhbmFTaWduQW5kU2VuZFRyYW5zYWN0aW9uXToge1xuICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uOiAnMS4wLjAnLFxuICAgICAgICAgICAgICAgICAgICBzdXBwb3J0ZWRUcmFuc2FjdGlvblZlcnNpb25zOiBbJ2xlZ2FjeScsIDBdLFxuICAgICAgICAgICAgICAgICAgICBzaWduQW5kU2VuZFRyYW5zYWN0aW9uOiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9zaWduQW5kU2VuZFRyYW5zYWN0aW9uLCBcImZcIiksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pKSwgKHN1cHBvcnRzU2lnblRyYW5zYWN0aW9uICYmIHtcbiAgICAgICAgICAgICAgICBbU29sYW5hU2lnblRyYW5zYWN0aW9uXToge1xuICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uOiAnMS4wLjAnLFxuICAgICAgICAgICAgICAgICAgICBzdXBwb3J0ZWRUcmFuc2FjdGlvblZlcnNpb25zOiBbJ2xlZ2FjeScsIDBdLFxuICAgICAgICAgICAgICAgICAgICBzaWduVHJhbnNhY3Rpb246IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3NpZ25UcmFuc2FjdGlvbiwgXCJmXCIpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KSksIFwiZlwiKTtcbiAgICAgICAgICAgIGlmIChkaWRDYXBhYmlsaXRpZXNDaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9pbnN0YW5jZXMsIFwibVwiLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2VtaXQpLmNhbGwodGhpcywgJ2NoYW5nZScsIHsgZmVhdHVyZXM6IHRoaXMuZmVhdHVyZXMgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtUmVhdXRob3JpemF0aW9uLnNldCh0aGlzLCAod2FsbGV0LCBhdXRoVG9rZW4sIGNoYWluKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX2IsIF9jO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBbY2FwYWJpbGl0aWVzLCBtd2FBdXRob3JpemF0aW9uUmVzdWx0XSA9IHlpZWxkIFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgICAgICAgICAgKF9jID0gKF9iID0gX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbiwgXCJmXCIpKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2FwYWJpbGl0aWVzKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiB5aWVsZCB3YWxsZXQuZ2V0Q2FwYWJpbGl0aWVzKCksXG4gICAgICAgICAgICAgICAgICAgIHdhbGxldC5hdXRob3JpemUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgYXV0aF90b2tlbjogYXV0aFRva2VuLFxuICAgICAgICAgICAgICAgICAgICAgICAgaWRlbnRpdHk6IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2FwcElkZW50aXR5LCBcImZcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFpbjogY2hhaW5cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICBjb25zdCBhY2NvdW50cyA9IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2FjY291bnRzVG9XYWxsZXRTdGFuZGFyZEFjY291bnRzLCBcImZcIikuY2FsbCh0aGlzLCBtd2FBdXRob3JpemF0aW9uUmVzdWx0LmFjY291bnRzKTtcbiAgICAgICAgICAgICAgICBjb25zdCBhdXRob3JpemF0aW9uID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBtd2FBdXRob3JpemF0aW9uUmVzdWx0KSwgeyBhY2NvdW50czogYWNjb3VudHMsIGNoYWluOiBjaGFpbiwgY2FwYWJpbGl0aWVzOiBjYXBhYmlsaXRpZXMgfSk7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogRXZhbHVhdGUgd2hldGhlciB0aGVyZSdzIGFueSB0aHJlYXQgdG8gbm90IGBhd2FpdGluZ2AgdGhpcyBleHByZXNzaW9uXG4gICAgICAgICAgICAgICAgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uQ2FjaGUsIFwiZlwiKS5zZXQoYXV0aG9yaXphdGlvbiksXG4gICAgICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2hhbmRsZUF1dGhvcml6YXRpb25SZXN1bHQsIFwiZlwiKS5jYWxsKHRoaXMsIGF1dGhvcml6YXRpb24pLFxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9kaXNjb25uZWN0LCBcImZcIikuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKGUgaW5zdGFuY2VvZiBFcnJvciAmJiBlLm1lc3NhZ2UpIHx8ICdVbmtub3duIGVycm9yJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9kaXNjb25uZWN0LnNldCh0aGlzLCAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX2Q7XG4gICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uQ2FjaGUsIFwiZlwiKS5jbGVhcigpOyAvLyBUT0RPOiBFdmFsdWF0ZSB3aGV0aGVyIHRoZXJlJ3MgYW55IHRocmVhdCB0byBub3QgYGF3YWl0aW5nYCB0aGlzIGV4cHJlc3Npb25cbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Nvbm5lY3RpbmcsIGZhbHNlLCBcImZcIik7XG4gICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jb25uZWN0aW9uR2VuZXJhdGlvbiwgKF9kID0gX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY29ubmVjdGlvbkdlbmVyYXRpb24sIFwiZlwiKSwgX2QrKywgX2QpLCBcImZcIik7XG4gICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uLCB1bmRlZmluZWQsIFwiZlwiKTtcbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2luc3RhbmNlcywgXCJtXCIsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfZW1pdCkuY2FsbCh0aGlzLCAnY2hhbmdlJywgeyBhY2NvdW50czogdGhpcy5hY2NvdW50cyB9KTtcbiAgICAgICAgfSkpO1xuICAgICAgICBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3RyYW5zYWN0LnNldCh0aGlzLCAoY2FsbGJhY2spID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfZTtcbiAgICAgICAgICAgIGNvbnN0IHdhbGxldFVyaUJhc2UgPSAoX2UgPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uLCBcImZcIikpID09PSBudWxsIHx8IF9lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZS53YWxsZXRfdXJpX2Jhc2U7XG4gICAgICAgICAgICBjb25zdCBjb25maWcgPSB3YWxsZXRVcmlCYXNlID8geyBiYXNlVXJpOiB3YWxsZXRVcmlCYXNlIH0gOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Q29ubmVjdGlvbkdlbmVyYXRpb24gPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jb25uZWN0aW9uR2VuZXJhdGlvbiwgXCJmXCIpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4geWllbGQgdHJhbnNhY3QoY2FsbGJhY2ssIGNvbmZpZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jb25uZWN0aW9uR2VuZXJhdGlvbiwgXCJmXCIpICE9PSBjdXJyZW50Q29ubmVjdGlvbkdlbmVyYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgbmV3IFByb21pc2UoKCkgPT4geyB9KTsgLy8gTmV2ZXIgcmVzb2x2ZS5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBFcnJvciAmJlxuICAgICAgICAgICAgICAgICAgICBlLm5hbWUgPT09ICdTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyRXJyb3InICYmXG4gICAgICAgICAgICAgICAgICAgIGUuY29kZSA9PT0gJ0VSUk9SX1dBTExFVF9OT1RfRk9VTkQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X29uV2FsbGV0Tm90Rm91bmQsIFwiZlwiKS5jYWxsKHRoaXMsIHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXNzZXJ0SXNBdXRob3JpemVkLnNldCh0aGlzLCAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIV9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb24sIFwiZlwiKSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dhbGxldCBub3QgY29ubmVjdGVkJyk7XG4gICAgICAgICAgICByZXR1cm4geyBhdXRoVG9rZW46IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb24sIFwiZlwiKS5hdXRoX3Rva2VuLCBjaGFpbjogX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbiwgXCJmXCIpLmNoYWluIH07XG4gICAgICAgIH0pO1xuICAgICAgICBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2FjY291bnRzVG9XYWxsZXRTdGFuZGFyZEFjY291bnRzLnNldCh0aGlzLCAoYWNjb3VudHMpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBhY2NvdW50cy5tYXAoKGFjY291bnQpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgICAgIGNvbnN0IHB1YmxpY0tleSA9IHRvVWludDhBcnJheShhY2NvdW50LmFkZHJlc3MpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IGJhc2U1OC5lbmNvZGUocHVibGljS2V5KSxcbiAgICAgICAgICAgICAgICAgICAgcHVibGljS2V5LFxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogYWNjb3VudC5sYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogYWNjb3VudC5pY29uLFxuICAgICAgICAgICAgICAgICAgICBjaGFpbnM6IChfYSA9IGFjY291bnQuY2hhaW5zKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jaGFpbnMsIFwiZlwiKSxcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogZ2V0IHN1cHBvcnRlZCBmZWF0dXJlcyBmcm9tIGdldENhcGFiaWxpdGllcyBBUEkgXG4gICAgICAgICAgICAgICAgICAgIGZlYXR1cmVzOiAoX2IgPSBhY2NvdW50LmZlYXR1cmVzKSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiBERUZBVUxUX0ZFQVRVUkVTXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtU2lnblRyYW5zYWN0aW9ucy5zZXQodGhpcywgKHRyYW5zYWN0aW9ucykgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgeyBhdXRoVG9rZW4sIGNoYWluIH0gPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hc3NlcnRJc0F1dGhvcml6ZWQsIFwiZlwiKS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBiYXNlNjRUcmFuc2FjdGlvbnMgPSB0cmFuc2FjdGlvbnMubWFwKCh0eCkgPT4geyByZXR1cm4gZnJvbVVpbnQ4QXJyYXkodHgpOyB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4geWllbGQgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfdHJhbnNhY3QsIFwiZlwiKS5jYWxsKHRoaXMsICh3YWxsZXQpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfcGVyZm9ybVJlYXV0aG9yaXphdGlvbiwgXCJmXCIpLmNhbGwodGhpcywgd2FsbGV0LCBhdXRoVG9rZW4sIGNoYWluKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2lnbmVkVHJhbnNhY3Rpb25zID0gKHlpZWxkIHdhbGxldC5zaWduVHJhbnNhY3Rpb25zKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWRzOiBiYXNlNjRUcmFuc2FjdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgIH0pKS5zaWduZWRfcGF5bG9hZHMubWFwKHRvVWludDhBcnJheSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzaWduZWRUcmFuc2FjdGlvbnM7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKGUgaW5zdGFuY2VvZiBFcnJvciAmJiBlLm1lc3NhZ2UpIHx8ICdVbmtub3duIGVycm9yJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtU2lnbkFuZFNlbmRUcmFuc2FjdGlvbi5zZXQodGhpcywgKHRyYW5zYWN0aW9uLCBvcHRpb25zKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCB7IGF1dGhUb2tlbiwgY2hhaW4gfSA9IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Fzc2VydElzQXV0aG9yaXplZCwgXCJmXCIpLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiB5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF90cmFuc2FjdCwgXCJmXCIpLmNhbGwodGhpcywgKHdhbGxldCkgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBbY2FwYWJpbGl0aWVzLCBfMV0gPSB5aWVsZCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgICAgICAgICB3YWxsZXQuZ2V0Q2FwYWJpbGl0aWVzKCksXG4gICAgICAgICAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtUmVhdXRob3JpemF0aW9uLCBcImZcIikuY2FsbCh0aGlzLCB3YWxsZXQsIGF1dGhUb2tlbiwgY2hhaW4pXG4gICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FwYWJpbGl0aWVzLnN1cHBvcnRzX3NpZ25fYW5kX3NlbmRfdHJhbnNhY3Rpb25zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiYXNlNjRUcmFuc2FjdGlvbiA9IGZyb21VaW50OEFycmF5KHRyYW5zYWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNpZ25hdHVyZXMgPSAoeWllbGQgd2FsbGV0LnNpZ25BbmRTZW5kVHJhbnNhY3Rpb25zKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyksIHsgcGF5bG9hZHM6IFtiYXNlNjRUcmFuc2FjdGlvbl0gfSkpKS5zaWduYXR1cmVzLm1hcCh0b1VpbnQ4QXJyYXkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNpZ25hdHVyZXNbMF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2Nvbm5lY3RlZCB3YWxsZXQgZG9lcyBub3Qgc3VwcG9ydCBzaWduQW5kU2VuZFRyYW5zYWN0aW9uJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigoZSBpbnN0YW5jZW9mIEVycm9yICYmIGUubWVzc2FnZSkgfHwgJ1Vua25vd24gZXJyb3InKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3NpZ25BbmRTZW5kVHJhbnNhY3Rpb24uc2V0KHRoaXMsICguLi5pbnB1dHMpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IG91dHB1dHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaW5wdXQgb2YgaW5wdXRzKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2lnbmF0dXJlID0geWllbGQgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfcGVyZm9ybVNpZ25BbmRTZW5kVHJhbnNhY3Rpb24sIFwiZlwiKS5jYWxsKHRoaXMsIGlucHV0LnRyYW5zYWN0aW9uLCBpbnB1dC5vcHRpb25zKTtcbiAgICAgICAgICAgICAgICBvdXRwdXRzLnB1c2goeyBzaWduYXR1cmUgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gb3V0cHV0cztcbiAgICAgICAgfSkpO1xuICAgICAgICBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3NpZ25UcmFuc2FjdGlvbi5zZXQodGhpcywgKC4uLmlucHV0cykgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgcmV0dXJuICh5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtU2lnblRyYW5zYWN0aW9ucywgXCJmXCIpLmNhbGwodGhpcywgaW5wdXRzLm1hcCgoeyB0cmFuc2FjdGlvbiB9KSA9PiB0cmFuc2FjdGlvbikpKVxuICAgICAgICAgICAgICAgIC5tYXAoKHNpZ25lZFRyYW5zYWN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgc2lnbmVkVHJhbnNhY3Rpb24gfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSk7XG4gICAgICAgIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2lnbk1lc3NhZ2Uuc2V0KHRoaXMsICguLi5pbnB1dHMpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgYXV0aFRva2VuLCBjaGFpbiB9ID0gX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXNzZXJ0SXNBdXRob3JpemVkLCBcImZcIikuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIGNvbnN0IGFkZHJlc3NlcyA9IGlucHV0cy5tYXAoKHsgYWNjb3VudCB9KSA9PiBmcm9tVWludDhBcnJheShhY2NvdW50LnB1YmxpY0tleSkpO1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBpbnB1dHMubWFwKCh7IG1lc3NhZ2UgfSkgPT4gZnJvbVVpbnQ4QXJyYXkobWVzc2FnZSkpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4geWllbGQgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfdHJhbnNhY3QsIFwiZlwiKS5jYWxsKHRoaXMsICh3YWxsZXQpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfcGVyZm9ybVJlYXV0aG9yaXphdGlvbiwgXCJmXCIpLmNhbGwodGhpcywgd2FsbGV0LCBhdXRoVG9rZW4sIGNoYWluKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2lnbmVkTWVzc2FnZXMgPSAoeWllbGQgd2FsbGV0LnNpZ25NZXNzYWdlcyh7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRyZXNzZXM6IGFkZHJlc3NlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBheWxvYWRzOiBtZXNzYWdlcyxcbiAgICAgICAgICAgICAgICAgICAgfSkpLnNpZ25lZF9wYXlsb2Fkcy5tYXAodG9VaW50OEFycmF5KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNpZ25lZE1lc3NhZ2VzLm1hcCgoc2lnbmVkTWVzc2FnZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgc2lnbmVkTWVzc2FnZTogc2lnbmVkTWVzc2FnZSwgc2lnbmF0dXJlOiBzaWduZWRNZXNzYWdlLnNsaWNlKC1TSUdOQVRVUkVfTEVOR1RIX0lOX0JZVEVTKSB9O1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigoZSBpbnN0YW5jZW9mIEVycm9yICYmIGUubWVzc2FnZSkgfHwgJ1Vua25vd24gZXJyb3InKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3NpZ25Jbi5zZXQodGhpcywgKC4uLmlucHV0cykgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0cyA9IFtdO1xuICAgICAgICAgICAgaWYgKGlucHV0cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBpbnB1dCBvZiBpbnB1dHMpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0cy5wdXNoKHlpZWxkIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1TaWduSW4sIFwiZlwiKS5jYWxsKHRoaXMsIGlucHV0KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFt5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtU2lnbkluLCBcImZcIikuY2FsbCh0aGlzLCBpbnB1dHNbMF0pXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvdXRwdXRzO1xuICAgICAgICB9KSk7XG4gICAgICAgIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfcGVyZm9ybVNpZ25Jbi5zZXQodGhpcywgKGlucHV0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX2YsIF9nLCBfaDtcbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Nvbm5lY3RpbmcsIHRydWUsIFwiZlwiKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXV0aG9yaXphdGlvblJlc3VsdCA9IHlpZWxkIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1BdXRob3JpemF0aW9uLCBcImZcIikuY2FsbCh0aGlzLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGlucHV0KSwgeyBkb21haW46IChfZiA9IGlucHV0ID09PSBudWxsIHx8IGlucHV0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpbnB1dC5kb21haW4pICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IHdpbmRvdy5sb2NhdGlvbi5ob3N0IH0pKTtcbiAgICAgICAgICAgICAgICBpZiAoIWF1dGhvcml6YXRpb25SZXN1bHQuc2lnbl9pbl9yZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2lnbiBpbiBmYWlsZWQsIG5vIHNpZ24gaW4gcmVzdWx0IHJldHVybmVkIGJ5IHdhbGxldFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgc2lnbmVkSW5BZGRyZXNzID0gYXV0aG9yaXphdGlvblJlc3VsdC5zaWduX2luX3Jlc3VsdC5hZGRyZXNzO1xuICAgICAgICAgICAgICAgIGNvbnN0IHNpZ25lZEluQWNjb3VudCA9IGF1dGhvcml6YXRpb25SZXN1bHQuYWNjb3VudHMuZmluZChhY2MgPT4gYWNjLmFkZHJlc3MgPT0gc2lnbmVkSW5BZGRyZXNzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBhY2NvdW50OiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHNpZ25lZEluQWNjb3VudCAhPT0gbnVsbCAmJiBzaWduZWRJbkFjY291bnQgIT09IHZvaWQgMCA/IHNpZ25lZEluQWNjb3VudCA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IGJhc2U1OC5lbmNvZGUodG9VaW50OEFycmF5KHNpZ25lZEluQWRkcmVzcykpXG4gICAgICAgICAgICAgICAgICAgIH0pLCB7IHB1YmxpY0tleTogdG9VaW50OEFycmF5KHNpZ25lZEluQWRkcmVzcyksIGNoYWluczogKF9nID0gc2lnbmVkSW5BY2NvdW50ID09PSBudWxsIHx8IHNpZ25lZEluQWNjb3VudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2lnbmVkSW5BY2NvdW50LmNoYWlucykgIT09IG51bGwgJiYgX2cgIT09IHZvaWQgMCA/IF9nIDogX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY2hhaW5zLCBcImZcIiksIGZlYXR1cmVzOiAoX2ggPSBzaWduZWRJbkFjY291bnQgPT09IG51bGwgfHwgc2lnbmVkSW5BY2NvdW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzaWduZWRJbkFjY291bnQuZmVhdHVyZXMpICE9PSBudWxsICYmIF9oICE9PSB2b2lkIDAgPyBfaCA6IGF1dGhvcml6YXRpb25SZXN1bHQuY2FwYWJpbGl0aWVzLmZlYXR1cmVzIH0pLFxuICAgICAgICAgICAgICAgICAgICBzaWduZWRNZXNzYWdlOiB0b1VpbnQ4QXJyYXkoYXV0aG9yaXphdGlvblJlc3VsdC5zaWduX2luX3Jlc3VsdC5zaWduZWRfbWVzc2FnZSksXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZTogdG9VaW50OEFycmF5KGF1dGhvcml6YXRpb25SZXN1bHQuc2lnbl9pbl9yZXN1bHQuc2lnbmF0dXJlKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigoZSBpbnN0YW5jZW9mIEVycm9yICYmIGUubWVzc2FnZSkgfHwgJ1Vua25vd24gZXJyb3InKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Nvbm5lY3RpbmcsIGZhbHNlLCBcImZcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbkNhY2hlLCBjb25maWcuYXV0aG9yaXphdGlvbkNhY2hlLCBcImZcIik7XG4gICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2FwcElkZW50aXR5LCBjb25maWcuYXBwSWRlbnRpdHksIFwiZlwiKTtcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY2hhaW5zLCBjb25maWcuY2hhaW5zLCBcImZcIik7XG4gICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2NoYWluU2VsZWN0b3IsIGNvbmZpZy5jaGFpblNlbGVjdG9yLCBcImZcIik7XG4gICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X29uV2FsbGV0Tm90Rm91bmQsIGNvbmZpZy5vbldhbGxldE5vdEZvdW5kLCBcImZcIik7XG4gICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X29wdGlvbmFsRmVhdHVyZXMsIHtcbiAgICAgICAgICAgIC8vIEluIE1XQSAxLjAsIHNpZ25BbmRTZW5kIGlzIG9wdGlvbmFsIGFuZCBzaWduVHJhbnNhY3Rpb24gaXMgbWFuZGF0b3J5LiBXaGVyZWFzIGluIE1XQSAyLjArLFxuICAgICAgICAgICAgLy8gc2lnbkFuZFNlbmQgaXMgbWFuZGF0b3J5IGFuZCBzaWduVHJhbnNhY3Rpb24gaXMgb3B0aW9uYWwgKGFuZCBzb2Z0IGRlcHJlY2F0ZWQpLiBBcyBvZiBtaWRcbiAgICAgICAgICAgIC8vIDIwMjUsIGFsbCBNV0Egd2FsbGV0cyBzdXBwb3J0IGJvdGggc2lnbkFuZFNlbmRUcmFuc2FjdGlvbiBhbmQgc2lnblRyYW5zYWN0aW9uIHNvIGl0cyBzYWZlXG4gICAgICAgICAgICAvLyBhc3N1bWUgYm90aCBhcmUgc3VwcG9ydGVkIGhlcmUuIFRoZSBmZWF0dXJlcyB3aWxsIGJlIHVwZGF0ZWQgYmFzZWQgb24gdGhlIGFjdHVhbCBjb25uZWN0ZWQgXG4gICAgICAgICAgICAvLyB3YWxsZXRzIGNhcGFiaWxpdGllcyBkdXJpbmcgY29ubmVjdGlvbiByZWdhcmRsZXNzLCBzbyB0aGlzIGlzIHNhZmUuIFxuICAgICAgICAgICAgW1NvbGFuYVNpZ25BbmRTZW5kVHJhbnNhY3Rpb25dOiB7XG4gICAgICAgICAgICAgICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICAgICAgICAgICAgICBzdXBwb3J0ZWRUcmFuc2FjdGlvblZlcnNpb25zOiBbJ2xlZ2FjeScsIDBdLFxuICAgICAgICAgICAgICAgIHNpZ25BbmRTZW5kVHJhbnNhY3Rpb246IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3NpZ25BbmRTZW5kVHJhbnNhY3Rpb24sIFwiZlwiKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBbU29sYW5hU2lnblRyYW5zYWN0aW9uXToge1xuICAgICAgICAgICAgICAgIHZlcnNpb246ICcxLjAuMCcsXG4gICAgICAgICAgICAgICAgc3VwcG9ydGVkVHJhbnNhY3Rpb25WZXJzaW9uczogWydsZWdhY3knLCAwXSxcbiAgICAgICAgICAgICAgICBzaWduVHJhbnNhY3Rpb246IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3NpZ25UcmFuc2FjdGlvbiwgXCJmXCIpLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSwgXCJmXCIpO1xuICAgIH1cbiAgICBnZXQgdmVyc2lvbigpIHtcbiAgICAgICAgcmV0dXJuIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3ZlcnNpb24sIFwiZlwiKTtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9uYW1lLCBcImZcIik7XG4gICAgfVxuICAgIGdldCB1cmwoKSB7XG4gICAgICAgIHJldHVybiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF91cmwsIFwiZlwiKTtcbiAgICB9XG4gICAgZ2V0IGljb24oKSB7XG4gICAgICAgIHJldHVybiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9pY29uLCBcImZcIik7XG4gICAgfVxuICAgIGdldCBjaGFpbnMoKSB7XG4gICAgICAgIHJldHVybiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jaGFpbnMsIFwiZlwiKTtcbiAgICB9XG4gICAgZ2V0IGZlYXR1cmVzKCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7IFtTdGFuZGFyZENvbm5lY3RdOiB7XG4gICAgICAgICAgICAgICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICAgICAgICAgICAgICBjb25uZWN0OiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jb25uZWN0LCBcImZcIiksXG4gICAgICAgICAgICB9LCBbU3RhbmRhcmREaXNjb25uZWN0XToge1xuICAgICAgICAgICAgICAgIHZlcnNpb246ICcxLjAuMCcsXG4gICAgICAgICAgICAgICAgZGlzY29ubmVjdDogX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfZGlzY29ubmVjdCwgXCJmXCIpLFxuICAgICAgICAgICAgfSwgW1N0YW5kYXJkRXZlbnRzXToge1xuICAgICAgICAgICAgICAgIHZlcnNpb246ICcxLjAuMCcsXG4gICAgICAgICAgICAgICAgb246IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X29uLCBcImZcIiksXG4gICAgICAgICAgICB9LCBbU29sYW5hU2lnbk1lc3NhZ2VdOiB7XG4gICAgICAgICAgICAgICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICAgICAgICAgICAgICBzaWduTWVzc2FnZTogX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2lnbk1lc3NhZ2UsIFwiZlwiKSxcbiAgICAgICAgICAgIH0sIFtTb2xhbmFTaWduSW5dOiB7XG4gICAgICAgICAgICAgICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICAgICAgICAgICAgICBzaWduSW46IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3NpZ25JbiwgXCJmXCIpLFxuICAgICAgICAgICAgfSB9LCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9vcHRpb25hbEZlYXR1cmVzLCBcImZcIikpO1xuICAgIH1cbiAgICBnZXQgYWNjb3VudHMoKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHJldHVybiAoX2IgPSAoX2EgPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uLCBcImZcIikpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5hY2NvdW50cykgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogW107XG4gICAgfVxuICAgIGdldCBjb25uZWN0ZWQoKSB7XG4gICAgICAgIHJldHVybiAhIV9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb24sIFwiZlwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQXV0aG9yaXplZCgpIHtcbiAgICAgICAgcmV0dXJuICEhX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbiwgXCJmXCIpO1xuICAgIH1cbiAgICBnZXQgY3VycmVudEF1dGhvcml6YXRpb24oKSB7XG4gICAgICAgIHJldHVybiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uLCBcImZcIik7XG4gICAgfVxuICAgIGdldCBjYWNoZWRBdXRob3JpemF0aW9uUmVzdWx0KCkge1xuICAgICAgICByZXR1cm4gX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbkNhY2hlLCBcImZcIikuZ2V0KCk7XG4gICAgfVxufVxuX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9saXN0ZW5lcnMgPSBuZXcgV2Vha01hcCgpLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3ZlcnNpb24gPSBuZXcgV2Vha01hcCgpLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X25hbWUgPSBuZXcgV2Vha01hcCgpLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3VybCA9IG5ldyBXZWFrTWFwKCksIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfaWNvbiA9IG5ldyBXZWFrTWFwKCksIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXBwSWRlbnRpdHkgPSBuZXcgV2Vha01hcCgpLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb24gPSBuZXcgV2Vha01hcCgpLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb25DYWNoZSA9IG5ldyBXZWFrTWFwKCksIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY29ubmVjdGluZyA9IG5ldyBXZWFrTWFwKCksIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY29ubmVjdGlvbkdlbmVyYXRpb24gPSBuZXcgV2Vha01hcCgpLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2NoYWlucyA9IG5ldyBXZWFrTWFwKCksIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY2hhaW5TZWxlY3RvciA9IG5ldyBXZWFrTWFwKCksIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfb3B0aW9uYWxGZWF0dXJlcyA9IG5ldyBXZWFrTWFwKCksIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfb25XYWxsZXROb3RGb3VuZCA9IG5ldyBXZWFrTWFwKCksIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfb24gPSBuZXcgV2Vha01hcCgpLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Nvbm5lY3QgPSBuZXcgV2Vha01hcCgpLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1BdXRob3JpemF0aW9uID0gbmV3IFdlYWtNYXAoKSwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9oYW5kbGVBdXRob3JpemF0aW9uUmVzdWx0ID0gbmV3IFdlYWtNYXAoKSwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9oYW5kbGVXYWxsZXRDYXBhYmlsaXRpZXNSZXN1bHQgPSBuZXcgV2Vha01hcCgpLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1SZWF1dGhvcml6YXRpb24gPSBuZXcgV2Vha01hcCgpLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Rpc2Nvbm5lY3QgPSBuZXcgV2Vha01hcCgpLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3RyYW5zYWN0ID0gbmV3IFdlYWtNYXAoKSwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hc3NlcnRJc0F1dGhvcml6ZWQgPSBuZXcgV2Vha01hcCgpLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2FjY291bnRzVG9XYWxsZXRTdGFuZGFyZEFjY291bnRzID0gbmV3IFdlYWtNYXAoKSwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtU2lnblRyYW5zYWN0aW9ucyA9IG5ldyBXZWFrTWFwKCksIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfcGVyZm9ybVNpZ25BbmRTZW5kVHJhbnNhY3Rpb24gPSBuZXcgV2Vha01hcCgpLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3NpZ25BbmRTZW5kVHJhbnNhY3Rpb24gPSBuZXcgV2Vha01hcCgpLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3NpZ25UcmFuc2FjdGlvbiA9IG5ldyBXZWFrTWFwKCksIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2lnbk1lc3NhZ2UgPSBuZXcgV2Vha01hcCgpLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3NpZ25JbiA9IG5ldyBXZWFrTWFwKCksIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfcGVyZm9ybVNpZ25JbiA9IG5ldyBXZWFrTWFwKCksIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfaW5zdGFuY2VzID0gbmV3IFdlYWtTZXQoKSwgX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9lbWl0ID0gZnVuY3Rpb24gX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9lbWl0KGV2ZW50LCAuLi5hcmdzKSB7XG4gICAgdmFyIF9hO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItc3ByZWFkXG4gICAgKF9hID0gX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfbGlzdGVuZXJzLCBcImZcIilbZXZlbnRdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZm9yRWFjaCgobGlzdGVuZXIpID0+IGxpc3RlbmVyLmFwcGx5KG51bGwsIGFyZ3MpKTtcbn0sIF9Mb2NhbFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfb2ZmID0gZnVuY3Rpb24gX0xvY2FsU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9vZmYoZXZlbnQsIGxpc3RlbmVyKSB7XG4gICAgdmFyIF9hO1xuICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2xpc3RlbmVycywgXCJmXCIpW2V2ZW50XSA9IChfYSA9IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2xpc3RlbmVycywgXCJmXCIpW2V2ZW50XSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZpbHRlcigoZXhpc3RpbmdMaXN0ZW5lcikgPT4gbGlzdGVuZXIgIT09IGV4aXN0aW5nTGlzdGVuZXIpO1xufTtcbmNsYXNzIFJlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXQge1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZykge1xuICAgICAgICBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9pbnN0YW5jZXMuYWRkKHRoaXMpO1xuICAgICAgICBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9saXN0ZW5lcnMuc2V0KHRoaXMsIHt9KTtcbiAgICAgICAgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfdmVyc2lvbi5zZXQodGhpcywgJzEuMC4wJyk7IC8vIHdhbGxldC1zdGFuZGFyZCB2ZXJzaW9uXG4gICAgICAgIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X25hbWUuc2V0KHRoaXMsIFNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJSZW1vdGVXYWxsZXROYW1lKTtcbiAgICAgICAgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfdXJsLnNldCh0aGlzLCAnaHR0cHM6Ly9zb2xhbmFtb2JpbGUuY29tL3dhbGxldHMnKTtcbiAgICAgICAgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfaWNvbi5zZXQodGhpcywgaWNvbik7XG4gICAgICAgIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2FwcElkZW50aXR5LnNldCh0aGlzLCB2b2lkIDApO1xuICAgICAgICBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uLnNldCh0aGlzLCB2b2lkIDApO1xuICAgICAgICBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uQ2FjaGUuc2V0KHRoaXMsIHZvaWQgMCk7XG4gICAgICAgIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Nvbm5lY3Rpbmcuc2V0KHRoaXMsIGZhbHNlKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV2ZXJ5IHRpbWUgdGhlIGNvbm5lY3Rpb24gaXMgcmVjeWNsZWQgaW4gc29tZSB3YXkgKGVnLiBgZGlzY29ubmVjdCgpYCBpcyBjYWxsZWQpXG4gICAgICAgICAqIGluY3JlbWVudCB0aGlzIGFuZCB1c2UgaXQgdG8gbWFrZSBzdXJlIHRoYXQgYHRyYW5zYWN0YCBjYWxscyBmcm9tIHRoZSBwcmV2aW91c1xuICAgICAgICAgKiAnZ2VuZXJhdGlvbicgZG9uJ3QgY29udGludWUgdG8gZG8gd29yayBhbmQgdGhyb3cgZXhjZXB0aW9ucy5cbiAgICAgICAgICovXG4gICAgICAgIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Nvbm5lY3Rpb25HZW5lcmF0aW9uLnNldCh0aGlzLCAwKTtcbiAgICAgICAgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY2hhaW5zLnNldCh0aGlzLCBbXSk7XG4gICAgICAgIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2NoYWluU2VsZWN0b3Iuc2V0KHRoaXMsIHZvaWQgMCk7XG4gICAgICAgIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X29wdGlvbmFsRmVhdHVyZXMuc2V0KHRoaXMsIHZvaWQgMCk7XG4gICAgICAgIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X29uV2FsbGV0Tm90Rm91bmQuc2V0KHRoaXMsIHZvaWQgMCk7XG4gICAgICAgIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2hvc3RBdXRob3JpdHkuc2V0KHRoaXMsIHZvaWQgMCk7XG4gICAgICAgIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3Nlc3Npb24uc2V0KHRoaXMsIHZvaWQgMCk7XG4gICAgICAgIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X29uLnNldCh0aGlzLCAoZXZlbnQsIGxpc3RlbmVyKSA9PiB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICAoKF9hID0gX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2xpc3RlbmVycywgXCJmXCIpW2V2ZW50XSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnB1c2gobGlzdGVuZXIpKSB8fCAoX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2xpc3RlbmVycywgXCJmXCIpW2V2ZW50XSA9IFtsaXN0ZW5lcl0pO1xuICAgICAgICAgICAgcmV0dXJuICgpID0+IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9pbnN0YW5jZXMsIFwibVwiLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9vZmYpLmNhbGwodGhpcywgZXZlbnQsIGxpc3RlbmVyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Nvbm5lY3Quc2V0KHRoaXMsICh7IHNpbGVudCB9ID0ge30pID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGlmIChfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY29ubmVjdGluZywgXCJmXCIpIHx8IHRoaXMuY29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgYWNjb3VudHM6IHRoaXMuYWNjb3VudHMgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jb25uZWN0aW5nLCB0cnVlLCBcImZcIik7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHlpZWxkIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtQXV0aG9yaXphdGlvbiwgXCJmXCIpLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigoZSBpbnN0YW5jZW9mIEVycm9yICYmIGUubWVzc2FnZSkgfHwgJ1Vua25vd24gZXJyb3InKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jb25uZWN0aW5nLCBmYWxzZSwgXCJmXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHsgYWNjb3VudHM6IHRoaXMuYWNjb3VudHMgfTtcbiAgICAgICAgfSkpO1xuICAgICAgICBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtQXV0aG9yaXphdGlvbi5zZXQodGhpcywgKHNpZ25JblBheWxvYWQpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FjaGVkQXV0aG9yaXphdGlvblJlc3VsdCA9IHlpZWxkIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uQ2FjaGUsIFwiZlwiKS5nZXQoKTtcbiAgICAgICAgICAgICAgICBpZiAoY2FjaGVkQXV0aG9yaXphdGlvblJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBFdmFsdWF0ZSB3aGV0aGVyIHRoZXJlJ3MgYW55IHRocmVhdCB0byBub3QgYGF3YWl0aW5nYCB0aGlzIGV4cHJlc3Npb25cbiAgICAgICAgICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2hhbmRsZUF1dGhvcml6YXRpb25SZXN1bHQsIFwiZlwiKS5jYWxsKHRoaXMsIGNhY2hlZEF1dGhvcml6YXRpb25SZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FjaGVkQXV0aG9yaXphdGlvblJlc3VsdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9zZXNzaW9uLCBcImZcIikpXG4gICAgICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9zZXNzaW9uLCB1bmRlZmluZWQsIFwiZlwiKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZENoYWluID0geWllbGQgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2NoYWluU2VsZWN0b3IsIFwiZlwiKS5zZWxlY3QoX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2NoYWlucywgXCJmXCIpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geWllbGQgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3RyYW5zYWN0LCBcImZcIikuY2FsbCh0aGlzLCAod2FsbGV0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IFtjYXBhYmlsaXRpZXMsIG13YUF1dGhvcml6YXRpb25SZXN1bHRdID0geWllbGQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgICAgICAgICAgICAgd2FsbGV0LmdldENhcGFiaWxpdGllcygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2FsbGV0LmF1dGhvcml6ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hhaW46IHNlbGVjdGVkQ2hhaW4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWRlbnRpdHk6IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hcHBJZGVudGl0eSwgXCJmXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpZ25faW5fcGF5bG9hZDogc2lnbkluUGF5bG9hZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhY2NvdW50cyA9IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hY2NvdW50c1RvV2FsbGV0U3RhbmRhcmRBY2NvdW50cywgXCJmXCIpLmNhbGwodGhpcywgbXdhQXV0aG9yaXphdGlvblJlc3VsdC5hY2NvdW50cyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGF1dGhvcml6YXRpb25SZXN1bHQgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG13YUF1dGhvcml6YXRpb25SZXN1bHQpLCB7IGFjY291bnRzLCBjaGFpbjogc2VsZWN0ZWRDaGFpbiwgY2FwYWJpbGl0aWVzOiBjYXBhYmlsaXRpZXMgfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IEV2YWx1YXRlIHdoZXRoZXIgdGhlcmUncyBhbnkgdGhyZWF0IHRvIG5vdCBgYXdhaXRpbmdgIHRoaXMgZXhwcmVzc2lvblxuICAgICAgICAgICAgICAgICAgICBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfaGFuZGxlV2FsbGV0Q2FwYWJpbGl0aWVzUmVzdWx0LCBcImZcIikuY2FsbCh0aGlzLCBjYXBhYmlsaXRpZXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb25DYWNoZSwgXCJmXCIpLnNldChhdXRob3JpemF0aW9uUmVzdWx0KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9oYW5kbGVBdXRob3JpemF0aW9uUmVzdWx0LCBcImZcIikuY2FsbCh0aGlzLCBhdXRob3JpemF0aW9uUmVzdWx0KSxcbiAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhdXRob3JpemF0aW9uUmVzdWx0O1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKChlIGluc3RhbmNlb2YgRXJyb3IgJiYgZS5tZXNzYWdlKSB8fCAnVW5rbm93biBlcnJvcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2hhbmRsZUF1dGhvcml6YXRpb25SZXN1bHQuc2V0KHRoaXMsIChhdXRob3JpemF0aW9uKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICBjb25zdCBkaWRQdWJsaWNLZXlzQ2hhbmdlID0gXG4gICAgICAgICAgICAvLyBDYXNlIDE6IFdlIHN0YXJ0ZWQgZnJvbSBoYXZpbmcgbm8gYXV0aG9yaXphdGlvbi5cbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uLCBcImZcIikgPT0gbnVsbCB8fFxuICAgICAgICAgICAgICAgIC8vIENhc2UgMjogVGhlIG51bWJlciBvZiBhdXRob3JpemVkIGFjY291bnRzIGNoYW5nZWQuXG4gICAgICAgICAgICAgICAgKChfYSA9IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uLCBcImZcIikpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5hY2NvdW50cy5sZW5ndGgpICE9PSBhdXRob3JpemF0aW9uLmFjY291bnRzLmxlbmd0aCB8fFxuICAgICAgICAgICAgICAgIC8vIENhc2UgMzogVGhlIG5ldyBsaXN0IG9mIGFkZHJlc3NlcyBpc24ndCBleGFjdGx5IHRoZSBzYW1lIGFzIHRoZSBvbGQgbGlzdCwgaW4gdGhlIHNhbWUgb3JkZXIuXG4gICAgICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb24sIFwiZlwiKS5hY2NvdW50cy5zb21lKChhY2NvdW50LCBpaSkgPT4gYWNjb3VudC5hZGRyZXNzICE9PSBhdXRob3JpemF0aW9uLmFjY291bnRzW2lpXS5hZGRyZXNzKTtcbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uLCBhdXRob3JpemF0aW9uLCBcImZcIik7XG4gICAgICAgICAgICBpZiAoZGlkUHVibGljS2V5c0NoYW5nZSkge1xuICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9pbnN0YW5jZXMsIFwibVwiLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9lbWl0KS5jYWxsKHRoaXMsICdjaGFuZ2UnLCB7IGFjY291bnRzOiB0aGlzLmFjY291bnRzIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2hhbmRsZVdhbGxldENhcGFiaWxpdGllc1Jlc3VsdC5zZXQodGhpcywgKGNhcGFiaWxpdGllcykgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgLy8gVE9ETzogaW52ZXN0aWdhdGUgd2h5IHVzaW5nIFNvbGFuYVNpZ25UcmFuc2FjdGlvbnMgY29uc3RhbnQgYnJlYWtzIHRyZWVzaGFraW5nXG4gICAgICAgICAgICBjb25zdCBzdXBwb3J0c1NpZ25UcmFuc2FjdGlvbiA9IGNhcGFiaWxpdGllcy5mZWF0dXJlcy5pbmNsdWRlcygnc29sYW5hOnNpZ25UcmFuc2FjdGlvbnMnKTsgLy9Tb2xhbmFTaWduVHJhbnNhY3Rpb25zKTtcbiAgICAgICAgICAgIGNvbnN0IHN1cHBvcnRzU2lnbkFuZFNlbmRUcmFuc2FjdGlvbiA9IGNhcGFiaWxpdGllcy5zdXBwb3J0c19zaWduX2FuZF9zZW5kX3RyYW5zYWN0aW9ucyB8fFxuICAgICAgICAgICAgICAgIGNhcGFiaWxpdGllcy5mZWF0dXJlcy5pbmNsdWRlcygnc29sYW5hOnNpZ25BbmRTZW5kVHJhbnNhY3Rpb24nKTtcbiAgICAgICAgICAgIGNvbnN0IGRpZENhcGFiaWxpdGllc0NoYW5nZSA9IFNvbGFuYVNpZ25BbmRTZW5kVHJhbnNhY3Rpb24gaW4gdGhpcy5mZWF0dXJlcyAhPT0gc3VwcG9ydHNTaWduQW5kU2VuZFRyYW5zYWN0aW9uIHx8XG4gICAgICAgICAgICAgICAgU29sYW5hU2lnblRyYW5zYWN0aW9uIGluIHRoaXMuZmVhdHVyZXMgIT09IHN1cHBvcnRzU2lnblRyYW5zYWN0aW9uO1xuICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X29wdGlvbmFsRmVhdHVyZXMsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgKHN1cHBvcnRzU2lnbkFuZFNlbmRUcmFuc2FjdGlvbiAmJiB7XG4gICAgICAgICAgICAgICAgW1NvbGFuYVNpZ25BbmRTZW5kVHJhbnNhY3Rpb25dOiB7XG4gICAgICAgICAgICAgICAgICAgIHZlcnNpb246ICcxLjAuMCcsXG4gICAgICAgICAgICAgICAgICAgIHN1cHBvcnRlZFRyYW5zYWN0aW9uVmVyc2lvbnM6IGNhcGFiaWxpdGllcy5zdXBwb3J0ZWRfdHJhbnNhY3Rpb25fdmVyc2lvbnMsXG4gICAgICAgICAgICAgICAgICAgIHNpZ25BbmRTZW5kVHJhbnNhY3Rpb246IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9zaWduQW5kU2VuZFRyYW5zYWN0aW9uLCBcImZcIiksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pKSwgKHN1cHBvcnRzU2lnblRyYW5zYWN0aW9uICYmIHtcbiAgICAgICAgICAgICAgICBbU29sYW5hU2lnblRyYW5zYWN0aW9uXToge1xuICAgICAgICAgICAgICAgICAgICB2ZXJzaW9uOiAnMS4wLjAnLFxuICAgICAgICAgICAgICAgICAgICBzdXBwb3J0ZWRUcmFuc2FjdGlvblZlcnNpb25zOiBjYXBhYmlsaXRpZXMuc3VwcG9ydGVkX3RyYW5zYWN0aW9uX3ZlcnNpb25zLFxuICAgICAgICAgICAgICAgICAgICBzaWduVHJhbnNhY3Rpb246IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9zaWduVHJhbnNhY3Rpb24sIFwiZlwiKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSkpLCBcImZcIik7XG4gICAgICAgICAgICBpZiAoZGlkQ2FwYWJpbGl0aWVzQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2luc3RhbmNlcywgXCJtXCIsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2VtaXQpLmNhbGwodGhpcywgJ2NoYW5nZScsIHsgZmVhdHVyZXM6IHRoaXMuZmVhdHVyZXMgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfcGVyZm9ybVJlYXV0aG9yaXphdGlvbi5zZXQodGhpcywgKHdhbGxldCwgYXV0aFRva2VuLCBjaGFpbikgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgdmFyIF9iLCBfYztcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgW2NhcGFiaWxpdGllcywgbXdhQXV0aG9yaXphdGlvblJlc3VsdF0gPSB5aWVsZCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgICAgIChfYyA9IChfYiA9IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uLCBcImZcIikpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5jYXBhYmlsaXRpZXMpICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IHlpZWxkIHdhbGxldC5nZXRDYXBhYmlsaXRpZXMoKSxcbiAgICAgICAgICAgICAgICAgICAgd2FsbGV0LmF1dGhvcml6ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRoX3Rva2VuOiBhdXRoVG9rZW4sXG4gICAgICAgICAgICAgICAgICAgICAgICBpZGVudGl0eTogX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2FwcElkZW50aXR5LCBcImZcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGFpbjogY2hhaW5cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICBjb25zdCBhY2NvdW50cyA9IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hY2NvdW50c1RvV2FsbGV0U3RhbmRhcmRBY2NvdW50cywgXCJmXCIpLmNhbGwodGhpcywgbXdhQXV0aG9yaXphdGlvblJlc3VsdC5hY2NvdW50cyk7XG4gICAgICAgICAgICAgICAgY29uc3QgYXV0aG9yaXphdGlvbiA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgbXdhQXV0aG9yaXphdGlvblJlc3VsdCksIHsgYWNjb3VudHM6IGFjY291bnRzLCBjaGFpbjogY2hhaW4sIGNhcGFiaWxpdGllczogY2FwYWJpbGl0aWVzIH0pO1xuICAgICAgICAgICAgICAgIC8vIFRPRE86IEV2YWx1YXRlIHdoZXRoZXIgdGhlcmUncyBhbnkgdGhyZWF0IHRvIG5vdCBgYXdhaXRpbmdgIHRoaXMgZXhwcmVzc2lvblxuICAgICAgICAgICAgICAgIFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb25DYWNoZSwgXCJmXCIpLnNldChhdXRob3JpemF0aW9uKSxcbiAgICAgICAgICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2hhbmRsZUF1dGhvcml6YXRpb25SZXN1bHQsIFwiZlwiKS5jYWxsKHRoaXMsIGF1dGhvcml6YXRpb24pLFxuICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfZGlzY29ubmVjdCwgXCJmXCIpLmNhbGwodGhpcyk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKChlIGluc3RhbmNlb2YgRXJyb3IgJiYgZS5tZXNzYWdlKSB8fCAnVW5rbm93biBlcnJvcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Rpc2Nvbm5lY3Quc2V0KHRoaXMsICgpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfZDtcbiAgICAgICAgICAgIHZhciBfZTtcbiAgICAgICAgICAgIChfZCA9IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9zZXNzaW9uLCBcImZcIikpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC5jbG9zZSgpO1xuICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb25DYWNoZSwgXCJmXCIpLmNsZWFyKCk7IC8vIFRPRE86IEV2YWx1YXRlIHdoZXRoZXIgdGhlcmUncyBhbnkgdGhyZWF0IHRvIG5vdCBgYXdhaXRpbmdgIHRoaXMgZXhwcmVzc2lvblxuICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Nvbm5lY3RpbmcsIGZhbHNlLCBcImZcIik7XG4gICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY29ubmVjdGlvbkdlbmVyYXRpb24sIChfZSA9IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jb25uZWN0aW9uR2VuZXJhdGlvbiwgXCJmXCIpLCBfZSsrLCBfZSksIFwiZlwiKTtcbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uLCB1bmRlZmluZWQsIFwiZlwiKTtcbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9zZXNzaW9uLCB1bmRlZmluZWQsIFwiZlwiKTtcbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9pbnN0YW5jZXMsIFwibVwiLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9lbWl0KS5jYWxsKHRoaXMsICdjaGFuZ2UnLCB7IGFjY291bnRzOiB0aGlzLmFjY291bnRzIH0pO1xuICAgICAgICB9KSk7XG4gICAgICAgIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3RyYW5zYWN0LnNldCh0aGlzLCAoY2FsbGJhY2spID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIHZhciBfZjtcbiAgICAgICAgICAgIGNvbnN0IHdhbGxldFVyaUJhc2UgPSAoX2YgPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbiwgXCJmXCIpKSA9PT0gbnVsbCB8fCBfZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Yud2FsbGV0X3VyaV9iYXNlO1xuICAgICAgICAgICAgY29uc3QgYmFzZUNvbmZpZyA9IHdhbGxldFVyaUJhc2UgPyB7IGJhc2VVcmk6IHdhbGxldFVyaUJhc2UgfSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGNvbnN0IHJlbW90ZUNvbmZpZyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgYmFzZUNvbmZpZyksIHsgcmVtb3RlSG9zdEF1dGhvcml0eTogX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2hvc3RBdXRob3JpdHksIFwiZlwiKSB9KTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRDb25uZWN0aW9uR2VuZXJhdGlvbiA9IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jb25uZWN0aW9uR2VuZXJhdGlvbiwgXCJmXCIpO1xuICAgICAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgUmVtb3RlQ29ubmVjdGlvbk1vZGFsKCk7XG4gICAgICAgICAgICBpZiAoX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3Nlc3Npb24sIFwiZlwiKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2Vzc2lvbiwgXCJmXCIpLndhbGxldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgYXNzb2NpYXRpb25VcmwsIGNsb3NlLCB3YWxsZXQgfSA9IHlpZWxkIHN0YXJ0UmVtb3RlU2NlbmFyaW8ocmVtb3RlQ29uZmlnKTtcbiAgICAgICAgICAgICAgICBjb25zdCByZW1vdmVDbG9zZUxpc3RlbmVyID0gbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignY2xvc2UnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50KVxuICAgICAgICAgICAgICAgICAgICAgICAgY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBtb2RhbC5pbml0V2l0aFFSKGFzc29jaWF0aW9uVXJsLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICAgICAgICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2Vzc2lvbiwgeyBjbG9zZSwgd2FsbGV0OiB5aWVsZCB3YWxsZXQgfSwgXCJmXCIpO1xuICAgICAgICAgICAgICAgIHJlbW92ZUNsb3NlTGlzdGVuZXIoKTtcbiAgICAgICAgICAgICAgICBtb2RhbC5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIHJldHVybiB5aWVsZCBjYWxsYmFjayhfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2Vzc2lvbiwgXCJmXCIpLndhbGxldCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIG1vZGFsLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgaWYgKF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jb25uZWN0aW9uR2VuZXJhdGlvbiwgXCJmXCIpICE9PSBjdXJyZW50Q29ubmVjdGlvbkdlbmVyYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgeWllbGQgbmV3IFByb21pc2UoKCkgPT4geyB9KTsgLy8gTmV2ZXIgcmVzb2x2ZS5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBFcnJvciAmJlxuICAgICAgICAgICAgICAgICAgICBlLm5hbWUgPT09ICdTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyRXJyb3InICYmXG4gICAgICAgICAgICAgICAgICAgIGUuY29kZSA9PT0gJ0VSUk9SX1dBTExFVF9OT1RfRk9VTkQnKSB7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9vbldhbGxldE5vdEZvdW5kLCBcImZcIikuY2FsbCh0aGlzLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hc3NlcnRJc0F1dGhvcml6ZWQuc2V0KHRoaXMsICgpID0+IHtcbiAgICAgICAgICAgIGlmICghX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb24sIFwiZlwiKSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1dhbGxldCBub3QgY29ubmVjdGVkJyk7XG4gICAgICAgICAgICByZXR1cm4geyBhdXRoVG9rZW46IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uLCBcImZcIikuYXV0aF90b2tlbiwgY2hhaW46IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uLCBcImZcIikuY2hhaW4gfTtcbiAgICAgICAgfSk7XG4gICAgICAgIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2FjY291bnRzVG9XYWxsZXRTdGFuZGFyZEFjY291bnRzLnNldCh0aGlzLCAoYWNjb3VudHMpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBhY2NvdW50cy5tYXAoKGFjY291bnQpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICAgICAgICAgIGNvbnN0IHB1YmxpY0tleSA9IHRvVWludDhBcnJheShhY2NvdW50LmFkZHJlc3MpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGFkZHJlc3M6IGJhc2U1OC5lbmNvZGUocHVibGljS2V5KSxcbiAgICAgICAgICAgICAgICAgICAgcHVibGljS2V5LFxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogYWNjb3VudC5sYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogYWNjb3VudC5pY29uLFxuICAgICAgICAgICAgICAgICAgICBjaGFpbnM6IChfYSA9IGFjY291bnQuY2hhaW5zKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY2hhaW5zLCBcImZcIiksXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IGdldCBzdXBwb3J0ZWQgZmVhdHVyZXMgZnJvbSBnZXRDYXBhYmlsaXRpZXMgQVBJIFxuICAgICAgICAgICAgICAgICAgICBmZWF0dXJlczogKF9iID0gYWNjb3VudC5mZWF0dXJlcykgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogREVGQVVMVF9GRUFUVVJFU1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1TaWduVHJhbnNhY3Rpb25zLnNldCh0aGlzLCAodHJhbnNhY3Rpb25zKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCB7IGF1dGhUb2tlbiwgY2hhaW4gfSA9IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hc3NlcnRJc0F1dGhvcml6ZWQsIFwiZlwiKS5jYWxsKHRoaXMpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4geWllbGQgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3RyYW5zYWN0LCBcImZcIikuY2FsbCh0aGlzLCAod2FsbGV0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtUmVhdXRob3JpemF0aW9uLCBcImZcIikuY2FsbCh0aGlzLCB3YWxsZXQsIGF1dGhUb2tlbiwgY2hhaW4pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzaWduZWRUcmFuc2FjdGlvbnMgPSAoeWllbGQgd2FsbGV0LnNpZ25UcmFuc2FjdGlvbnMoe1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZHM6IHRyYW5zYWN0aW9ucy5tYXAoZnJvbVVpbnQ4QXJyYXkpLFxuICAgICAgICAgICAgICAgICAgICB9KSkuc2lnbmVkX3BheWxvYWRzLm1hcCh0b1VpbnQ4QXJyYXkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2lnbmVkVHJhbnNhY3Rpb25zO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKChlIGluc3RhbmNlb2YgRXJyb3IgJiYgZS5tZXNzYWdlKSB8fCAnVW5rbm93biBlcnJvcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1TaWduQW5kU2VuZFRyYW5zYWN0aW9uLnNldCh0aGlzLCAodHJhbnNhY3Rpb24sIG9wdGlvbnMpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgYXV0aFRva2VuLCBjaGFpbiB9ID0gX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Fzc2VydElzQXV0aG9yaXplZCwgXCJmXCIpLmNhbGwodGhpcyk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiB5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfdHJhbnNhY3QsIFwiZlwiKS5jYWxsKHRoaXMsICh3YWxsZXQpID0+IF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgW2NhcGFiaWxpdGllcywgXzFdID0geWllbGQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgICAgICAgICAgICAgd2FsbGV0LmdldENhcGFiaWxpdGllcygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1SZWF1dGhvcml6YXRpb24sIFwiZlwiKS5jYWxsKHRoaXMsIHdhbGxldCwgYXV0aFRva2VuLCBjaGFpbilcbiAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjYXBhYmlsaXRpZXMuc3VwcG9ydHNfc2lnbl9hbmRfc2VuZF90cmFuc2FjdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNpZ25hdHVyZXMgPSAoeWllbGQgd2FsbGV0LnNpZ25BbmRTZW5kVHJhbnNhY3Rpb25zKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgb3B0aW9ucyksIHsgcGF5bG9hZHM6IFtmcm9tVWludDhBcnJheSh0cmFuc2FjdGlvbildIH0pKSkuc2lnbmF0dXJlcy5tYXAodG9VaW50OEFycmF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzaWduYXR1cmVzWzBdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb25uZWN0ZWQgd2FsbGV0IGRvZXMgbm90IHN1cHBvcnQgc2lnbkFuZFNlbmRUcmFuc2FjdGlvbicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKGUgaW5zdGFuY2VvZiBFcnJvciAmJiBlLm1lc3NhZ2UpIHx8ICdVbmtub3duIGVycm9yJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICAgICAgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2lnbkFuZFNlbmRUcmFuc2FjdGlvbi5zZXQodGhpcywgKC4uLmlucHV0cykgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0cyA9IFtdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBpbnB1dCBvZiBpbnB1dHMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzaWduYXR1cmUgPSAoeWllbGQgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1TaWduQW5kU2VuZFRyYW5zYWN0aW9uLCBcImZcIikuY2FsbCh0aGlzLCBpbnB1dC50cmFuc2FjdGlvbiwgaW5wdXQub3B0aW9ucykpO1xuICAgICAgICAgICAgICAgIG91dHB1dHMucHVzaCh7IHNpZ25hdHVyZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvdXRwdXRzO1xuICAgICAgICB9KSk7XG4gICAgICAgIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3NpZ25UcmFuc2FjdGlvbi5zZXQodGhpcywgKC4uLmlucHV0cykgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgcmV0dXJuICh5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfcGVyZm9ybVNpZ25UcmFuc2FjdGlvbnMsIFwiZlwiKS5jYWxsKHRoaXMsIGlucHV0cy5tYXAoKHsgdHJhbnNhY3Rpb24gfSkgPT4gdHJhbnNhY3Rpb24pKSlcbiAgICAgICAgICAgICAgICAubWFwKChzaWduZWRUcmFuc2FjdGlvbikgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiB7IHNpZ25lZFRyYW5zYWN0aW9uIH07XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpO1xuICAgICAgICBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9zaWduTWVzc2FnZS5zZXQodGhpcywgKC4uLmlucHV0cykgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3QgeyBhdXRoVG9rZW4sIGNoYWluIH0gPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXNzZXJ0SXNBdXRob3JpemVkLCBcImZcIikuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIGNvbnN0IGFkZHJlc3NlcyA9IGlucHV0cy5tYXAoKHsgYWNjb3VudCB9KSA9PiBmcm9tVWludDhBcnJheShhY2NvdW50LnB1YmxpY0tleSkpO1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBpbnB1dHMubWFwKCh7IG1lc3NhZ2UgfSkgPT4gZnJvbVVpbnQ4QXJyYXkobWVzc2FnZSkpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4geWllbGQgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3RyYW5zYWN0LCBcImZcIikuY2FsbCh0aGlzLCAod2FsbGV0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHlpZWxkIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtUmVhdXRob3JpemF0aW9uLCBcImZcIikuY2FsbCh0aGlzLCB3YWxsZXQsIGF1dGhUb2tlbiwgY2hhaW4pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzaWduZWRNZXNzYWdlcyA9ICh5aWVsZCB3YWxsZXQuc2lnbk1lc3NhZ2VzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZHJlc3NlczogYWRkcmVzc2VzLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGF5bG9hZHM6IG1lc3NhZ2VzLFxuICAgICAgICAgICAgICAgICAgICB9KSkuc2lnbmVkX3BheWxvYWRzLm1hcCh0b1VpbnQ4QXJyYXkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2lnbmVkTWVzc2FnZXMubWFwKChzaWduZWRNZXNzYWdlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geyBzaWduZWRNZXNzYWdlOiBzaWduZWRNZXNzYWdlLCBzaWduYXR1cmU6IHNpZ25lZE1lc3NhZ2Uuc2xpY2UoLVNJR05BVFVSRV9MRU5HVEhfSU5fQllURVMpIH07XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKChlIGluc3RhbmNlb2YgRXJyb3IgJiYgZS5tZXNzYWdlKSB8fCAnVW5rbm93biBlcnJvcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3NpZ25Jbi5zZXQodGhpcywgKC4uLmlucHV0cykgPT4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgY29uc3Qgb3V0cHV0cyA9IFtdO1xuICAgICAgICAgICAgaWYgKGlucHV0cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBpbnB1dCBvZiBpbnB1dHMpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0cy5wdXNoKHlpZWxkIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtU2lnbkluLCBcImZcIikuY2FsbCh0aGlzLCBpbnB1dCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBbeWllbGQgX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1TaWduSW4sIFwiZlwiKS5jYWxsKHRoaXMsIGlucHV0c1swXSldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG91dHB1dHM7XG4gICAgICAgIH0pKTtcbiAgICAgICAgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfcGVyZm9ybVNpZ25Jbi5zZXQodGhpcywgKGlucHV0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICB2YXIgX2csIF9oLCBfajtcbiAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jb25uZWN0aW5nLCB0cnVlLCBcImZcIik7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGF1dGhvcml6YXRpb25SZXN1bHQgPSB5aWVsZCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfcGVyZm9ybUF1dGhvcml6YXRpb24sIFwiZlwiKS5jYWxsKHRoaXMsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgaW5wdXQpLCB7IGRvbWFpbjogKF9nID0gaW5wdXQgPT09IG51bGwgfHwgaW5wdXQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGlucHV0LmRvbWFpbikgIT09IG51bGwgJiYgX2cgIT09IHZvaWQgMCA/IF9nIDogd2luZG93LmxvY2F0aW9uLmhvc3QgfSkpO1xuICAgICAgICAgICAgICAgIGlmICghYXV0aG9yaXphdGlvblJlc3VsdC5zaWduX2luX3Jlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTaWduIGluIGZhaWxlZCwgbm8gc2lnbiBpbiByZXN1bHQgcmV0dXJuZWQgYnkgd2FsbGV0XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCBzaWduZWRJbkFkZHJlc3MgPSBhdXRob3JpemF0aW9uUmVzdWx0LnNpZ25faW5fcmVzdWx0LmFkZHJlc3M7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2lnbmVkSW5BY2NvdW50ID0gYXV0aG9yaXphdGlvblJlc3VsdC5hY2NvdW50cy5maW5kKGFjYyA9PiBhY2MuYWRkcmVzcyA9PSBzaWduZWRJbkFkZHJlc3MpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGFjY291bnQ6IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgc2lnbmVkSW5BY2NvdW50ICE9PSBudWxsICYmIHNpZ25lZEluQWNjb3VudCAhPT0gdm9pZCAwID8gc2lnbmVkSW5BY2NvdW50IDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzczogYmFzZTU4LmVuY29kZSh0b1VpbnQ4QXJyYXkoc2lnbmVkSW5BZGRyZXNzKSlcbiAgICAgICAgICAgICAgICAgICAgfSksIHsgcHVibGljS2V5OiB0b1VpbnQ4QXJyYXkoc2lnbmVkSW5BZGRyZXNzKSwgY2hhaW5zOiAoX2ggPSBzaWduZWRJbkFjY291bnQgPT09IG51bGwgfHwgc2lnbmVkSW5BY2NvdW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzaWduZWRJbkFjY291bnQuY2hhaW5zKSAhPT0gbnVsbCAmJiBfaCAhPT0gdm9pZCAwID8gX2ggOiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY2hhaW5zLCBcImZcIiksIGZlYXR1cmVzOiAoX2ogPSBzaWduZWRJbkFjY291bnQgPT09IG51bGwgfHwgc2lnbmVkSW5BY2NvdW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzaWduZWRJbkFjY291bnQuZmVhdHVyZXMpICE9PSBudWxsICYmIF9qICE9PSB2b2lkIDAgPyBfaiA6IGF1dGhvcml6YXRpb25SZXN1bHQuY2FwYWJpbGl0aWVzLmZlYXR1cmVzIH0pLFxuICAgICAgICAgICAgICAgICAgICBzaWduZWRNZXNzYWdlOiB0b1VpbnQ4QXJyYXkoYXV0aG9yaXphdGlvblJlc3VsdC5zaWduX2luX3Jlc3VsdC5zaWduZWRfbWVzc2FnZSksXG4gICAgICAgICAgICAgICAgICAgIHNpZ25hdHVyZTogdG9VaW50OEFycmF5KGF1dGhvcml6YXRpb25SZXN1bHQuc2lnbl9pbl9yZXN1bHQuc2lnbmF0dXJlKVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigoZSBpbnN0YW5jZW9mIEVycm9yICYmIGUubWVzc2FnZSkgfHwgJ1Vua25vd24gZXJyb3InKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jb25uZWN0aW5nLCBmYWxzZSwgXCJmXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uQ2FjaGUsIGNvbmZpZy5hdXRob3JpemF0aW9uQ2FjaGUsIFwiZlwiKTtcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2FwcElkZW50aXR5LCBjb25maWcuYXBwSWRlbnRpdHksIFwiZlwiKTtcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2NoYWlucywgY29uZmlnLmNoYWlucywgXCJmXCIpO1xuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY2hhaW5TZWxlY3RvciwgY29uZmlnLmNoYWluU2VsZWN0b3IsIFwiZlwiKTtcbiAgICAgICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2hvc3RBdXRob3JpdHksIGNvbmZpZy5yZW1vdGVIb3N0QXV0aG9yaXR5LCBcImZcIik7XG4gICAgICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9vbldhbGxldE5vdEZvdW5kLCBjb25maWcub25XYWxsZXROb3RGb3VuZCwgXCJmXCIpO1xuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfb3B0aW9uYWxGZWF0dXJlcywge1xuICAgICAgICAgICAgLy8gSW4gTVdBIDEuMCwgc2lnbkFuZFNlbmQgaXMgb3B0aW9uYWwgYW5kIHNpZ25UcmFuc2FjdGlvbiBpcyBtYW5kYXRvcnkuIFdoZXJlYXMgaW4gTVdBIDIuMCssXG4gICAgICAgICAgICAvLyBzaWduQW5kU2VuZCBpcyBtYW5kYXRvcnkgYW5kIHNpZ25UcmFuc2FjdGlvbiBpcyBvcHRpb25hbCAoYW5kIHNvZnQgZGVwcmVjYXRlZCkuIEFzIG9mIG1pZFxuICAgICAgICAgICAgLy8gMjAyNSwgYWxsIE1XQSB3YWxsZXRzIHN1cHBvcnQgYm90aCBzaWduQW5kU2VuZFRyYW5zYWN0aW9uIGFuZCBzaWduVHJhbnNhY3Rpb24gc28gaXRzIHNhZmVcbiAgICAgICAgICAgIC8vIGFzc3VtZSBib3RoIGFyZSBzdXBwb3J0ZWQgaGVyZS4gVGhlIGZlYXR1cmVzIHdpbGwgYmUgdXBkYXRlZCBiYXNlZCBvbiB0aGUgYWN0dWFsIGNvbm5lY3RlZCBcbiAgICAgICAgICAgIC8vIHdhbGxldHMgY2FwYWJpbGl0aWVzIGR1cmluZyBjb25uZWN0aW9uIHJlZ2FyZGxlc3MsIHNvIHRoaXMgaXMgc2FmZS4gXG4gICAgICAgICAgICBbU29sYW5hU2lnbkFuZFNlbmRUcmFuc2FjdGlvbl06IHtcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiAnMS4wLjAnLFxuICAgICAgICAgICAgICAgIHN1cHBvcnRlZFRyYW5zYWN0aW9uVmVyc2lvbnM6IFsnbGVnYWN5JywgMF0sXG4gICAgICAgICAgICAgICAgc2lnbkFuZFNlbmRUcmFuc2FjdGlvbjogX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3NpZ25BbmRTZW5kVHJhbnNhY3Rpb24sIFwiZlwiKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBbU29sYW5hU2lnblRyYW5zYWN0aW9uXToge1xuICAgICAgICAgICAgICAgIHZlcnNpb246ICcxLjAuMCcsXG4gICAgICAgICAgICAgICAgc3VwcG9ydGVkVHJhbnNhY3Rpb25WZXJzaW9uczogWydsZWdhY3knLCAwXSxcbiAgICAgICAgICAgICAgICBzaWduVHJhbnNhY3Rpb246IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9zaWduVHJhbnNhY3Rpb24sIFwiZlwiKSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sIFwiZlwiKTtcbiAgICB9XG4gICAgZ2V0IHZlcnNpb24oKSB7XG4gICAgICAgIHJldHVybiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfdmVyc2lvbiwgXCJmXCIpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9uYW1lLCBcImZcIik7XG4gICAgfVxuICAgIGdldCB1cmwoKSB7XG4gICAgICAgIHJldHVybiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfdXJsLCBcImZcIik7XG4gICAgfVxuICAgIGdldCBpY29uKCkge1xuICAgICAgICByZXR1cm4gX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2ljb24sIFwiZlwiKTtcbiAgICB9XG4gICAgZ2V0IGNoYWlucygpIHtcbiAgICAgICAgcmV0dXJuIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9jaGFpbnMsIFwiZlwiKTtcbiAgICB9XG4gICAgZ2V0IGZlYXR1cmVzKCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7IFtTdGFuZGFyZENvbm5lY3RdOiB7XG4gICAgICAgICAgICAgICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICAgICAgICAgICAgICBjb25uZWN0OiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY29ubmVjdCwgXCJmXCIpLFxuICAgICAgICAgICAgfSwgW1N0YW5kYXJkRGlzY29ubmVjdF06IHtcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiAnMS4wLjAnLFxuICAgICAgICAgICAgICAgIGRpc2Nvbm5lY3Q6IF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9kaXNjb25uZWN0LCBcImZcIiksXG4gICAgICAgICAgICB9LCBbU3RhbmRhcmRFdmVudHNdOiB7XG4gICAgICAgICAgICAgICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICAgICAgICAgICAgICBvbjogX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X29uLCBcImZcIiksXG4gICAgICAgICAgICB9LCBbU29sYW5hU2lnbk1lc3NhZ2VdOiB7XG4gICAgICAgICAgICAgICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICAgICAgICAgICAgICBzaWduTWVzc2FnZTogX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3NpZ25NZXNzYWdlLCBcImZcIiksXG4gICAgICAgICAgICB9LCBbU29sYW5hU2lnbkluXToge1xuICAgICAgICAgICAgICAgIHZlcnNpb246ICcxLjAuMCcsXG4gICAgICAgICAgICAgICAgc2lnbkluOiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2lnbkluLCBcImZcIiksXG4gICAgICAgICAgICB9IH0sIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9vcHRpb25hbEZlYXR1cmVzLCBcImZcIikpO1xuICAgIH1cbiAgICBnZXQgYWNjb3VudHMoKSB7XG4gICAgICAgIHZhciBfYSwgX2I7XG4gICAgICAgIHJldHVybiAoX2IgPSAoX2EgPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbiwgXCJmXCIpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYWNjb3VudHMpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IFtdO1xuICAgIH1cbiAgICBnZXQgY29ubmVjdGVkKCkge1xuICAgICAgICByZXR1cm4gISFfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2Vzc2lvbiwgXCJmXCIpICYmICEhX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb24sIFwiZlwiKTtcbiAgICB9XG4gICAgZ2V0IGlzQXV0aG9yaXplZCgpIHtcbiAgICAgICAgcmV0dXJuICEhX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb24sIFwiZlwiKTtcbiAgICB9XG4gICAgZ2V0IGN1cnJlbnRBdXRob3JpemF0aW9uKCkge1xuICAgICAgICByZXR1cm4gX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2F1dGhvcml6YXRpb24sIFwiZlwiKTtcbiAgICB9XG4gICAgZ2V0IGNhY2hlZEF1dGhvcml6YXRpb25SZXN1bHQoKSB7XG4gICAgICAgIHJldHVybiBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbkNhY2hlLCBcImZcIikuZ2V0KCk7XG4gICAgfVxufVxuX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfbGlzdGVuZXJzID0gbmV3IFdlYWtNYXAoKSwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfdmVyc2lvbiA9IG5ldyBXZWFrTWFwKCksIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X25hbWUgPSBuZXcgV2Vha01hcCgpLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF91cmwgPSBuZXcgV2Vha01hcCgpLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9pY29uID0gbmV3IFdlYWtNYXAoKSwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXBwSWRlbnRpdHkgPSBuZXcgV2Vha01hcCgpLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9hdXRob3JpemF0aW9uID0gbmV3IFdlYWtNYXAoKSwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXV0aG9yaXphdGlvbkNhY2hlID0gbmV3IFdlYWtNYXAoKSwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY29ubmVjdGluZyA9IG5ldyBXZWFrTWFwKCksIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Nvbm5lY3Rpb25HZW5lcmF0aW9uID0gbmV3IFdlYWtNYXAoKSwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY2hhaW5zID0gbmV3IFdlYWtNYXAoKSwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfY2hhaW5TZWxlY3RvciA9IG5ldyBXZWFrTWFwKCksIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X29wdGlvbmFsRmVhdHVyZXMgPSBuZXcgV2Vha01hcCgpLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9vbldhbGxldE5vdEZvdW5kID0gbmV3IFdlYWtNYXAoKSwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfaG9zdEF1dGhvcml0eSA9IG5ldyBXZWFrTWFwKCksIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3Nlc3Npb24gPSBuZXcgV2Vha01hcCgpLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9vbiA9IG5ldyBXZWFrTWFwKCksIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2Nvbm5lY3QgPSBuZXcgV2Vha01hcCgpLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtQXV0aG9yaXphdGlvbiA9IG5ldyBXZWFrTWFwKCksIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2hhbmRsZUF1dGhvcml6YXRpb25SZXN1bHQgPSBuZXcgV2Vha01hcCgpLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9oYW5kbGVXYWxsZXRDYXBhYmlsaXRpZXNSZXN1bHQgPSBuZXcgV2Vha01hcCgpLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtUmVhdXRob3JpemF0aW9uID0gbmV3IFdlYWtNYXAoKSwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfZGlzY29ubmVjdCA9IG5ldyBXZWFrTWFwKCksIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3RyYW5zYWN0ID0gbmV3IFdlYWtNYXAoKSwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYXNzZXJ0SXNBdXRob3JpemVkID0gbmV3IFdlYWtNYXAoKSwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfYWNjb3VudHNUb1dhbGxldFN0YW5kYXJkQWNjb3VudHMgPSBuZXcgV2Vha01hcCgpLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9wZXJmb3JtU2lnblRyYW5zYWN0aW9ucyA9IG5ldyBXZWFrTWFwKCksIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3BlcmZvcm1TaWduQW5kU2VuZFRyYW5zYWN0aW9uID0gbmV3IFdlYWtNYXAoKSwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2lnbkFuZFNlbmRUcmFuc2FjdGlvbiA9IG5ldyBXZWFrTWFwKCksIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3NpZ25UcmFuc2FjdGlvbiA9IG5ldyBXZWFrTWFwKCksIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X3NpZ25NZXNzYWdlID0gbmV3IFdlYWtNYXAoKSwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfc2lnbkluID0gbmV3IFdlYWtNYXAoKSwgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfcGVyZm9ybVNpZ25JbiA9IG5ldyBXZWFrTWFwKCksIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2luc3RhbmNlcyA9IG5ldyBXZWFrU2V0KCksIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2VtaXQgPSBmdW5jdGlvbiBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9lbWl0KGV2ZW50LCAuLi5hcmdzKSB7XG4gICAgdmFyIF9hO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItc3ByZWFkXG4gICAgKF9hID0gX19jbGFzc1ByaXZhdGVGaWVsZEdldCQxKHRoaXMsIF9SZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0X2xpc3RlbmVycywgXCJmXCIpW2V2ZW50XSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZvckVhY2goKGxpc3RlbmVyKSA9PiBsaXN0ZW5lci5hcHBseShudWxsLCBhcmdzKSk7XG59LCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9vZmYgPSBmdW5jdGlvbiBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9vZmYoZXZlbnQsIGxpc3RlbmVyKSB7XG4gICAgdmFyIF9hO1xuICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQkMSh0aGlzLCBfUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldF9saXN0ZW5lcnMsIFwiZlwiKVtldmVudF0gPSAoX2EgPSBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0JDEodGhpcywgX1JlbW90ZVNvbGFuYU1vYmlsZVdhbGxldEFkYXB0ZXJXYWxsZXRfbGlzdGVuZXJzLCBcImZcIilbZXZlbnRdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZmlsdGVyKChleGlzdGluZ0xpc3RlbmVyKSA9PiBsaXN0ZW5lciAhPT0gZXhpc3RpbmdMaXN0ZW5lcik7XG59O1xuXG52YXIgX19jbGFzc1ByaXZhdGVGaWVsZFNldCA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fY2xhc3NQcml2YXRlRmllbGRTZXQpIHx8IGZ1bmN0aW9uIChyZWNlaXZlciwgc3RhdGUsIHZhbHVlLCBraW5kLCBmKSB7XG4gICAgaWYgKGtpbmQgPT09IFwibVwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBtZXRob2QgaXMgbm90IHdyaXRhYmxlXCIpO1xuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlclwiKTtcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB3cml0ZSBwcml2YXRlIG1lbWJlciB0byBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xuICAgIHJldHVybiAoa2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIsIHZhbHVlKSA6IGYgPyBmLnZhbHVlID0gdmFsdWUgOiBzdGF0ZS5zZXQocmVjZWl2ZXIsIHZhbHVlKSksIHZhbHVlO1xufTtcbnZhciBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0ID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19jbGFzc1ByaXZhdGVGaWVsZEdldCkgfHwgZnVuY3Rpb24gKHJlY2VpdmVyLCBzdGF0ZSwga2luZCwgZikge1xuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIGdldHRlclwiKTtcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCByZWFkIHByaXZhdGUgbWVtYmVyIGZyb20gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcbiAgICByZXR1cm4ga2luZCA9PT0gXCJtXCIgPyBmIDoga2luZCA9PT0gXCJhXCIgPyBmLmNhbGwocmVjZWl2ZXIpIDogZiA/IGYudmFsdWUgOiBzdGF0ZS5nZXQocmVjZWl2ZXIpO1xufTtcbnZhciBfUmVnaXN0ZXJXYWxsZXRFdmVudF9kZXRhaWw7XG4vKipcbiAqIFJlZ2lzdGVyIGEge0BsaW5rIFwiQHdhbGxldC1zdGFuZGFyZC9iYXNlXCIuV2FsbGV0fSBhcyBhIFN0YW5kYXJkIFdhbGxldCB3aXRoIHRoZSBhcHAuXG4gKlxuICogVGhpcyBkaXNwYXRjaGVzIGEge0BsaW5rIFwiQHdhbGxldC1zdGFuZGFyZC9iYXNlXCIuV2luZG93UmVnaXN0ZXJXYWxsZXRFdmVudH0gdG8gbm90aWZ5IHRoZSBhcHAgdGhhdCB0aGUgV2FsbGV0IGlzXG4gKiByZWFkeSB0byBiZSByZWdpc3RlcmVkLlxuICpcbiAqIFRoaXMgYWxzbyBhZGRzIGEgbGlzdGVuZXIgZm9yIHtAbGluayBcIkB3YWxsZXQtc3RhbmRhcmQvYmFzZVwiLldpbmRvd0FwcFJlYWR5RXZlbnR9IHRvIGxpc3RlbiBmb3IgYSBub3RpZmljYXRpb24gZnJvbVxuICogdGhlIGFwcCB0aGF0IHRoZSBhcHAgaXMgcmVhZHkgdG8gcmVnaXN0ZXIgdGhlIFdhbGxldC5cbiAqXG4gKiBUaGlzIGNvbWJpbmF0aW9uIG9mIGV2ZW50IGRpc3BhdGNoIGFuZCBsaXN0ZW5lciBndWFyYW50ZWVzIHRoYXQgdGhlIFdhbGxldCB3aWxsIGJlIHJlZ2lzdGVyZWQgc3luY2hyb25vdXNseSBhcyBzb29uXG4gKiBhcyB0aGUgYXBwIGlzIHJlYWR5IHdoZXRoZXIgdGhlIFdhbGxldCBsb2FkcyBiZWZvcmUgb3IgYWZ0ZXIgdGhlIGFwcC5cbiAqXG4gKiBAcGFyYW0gd2FsbGV0IFdhbGxldCB0byByZWdpc3Rlci5cbiAqXG4gKiBAZ3JvdXAgV2FsbGV0XG4gKi9cbmZ1bmN0aW9uIHJlZ2lzdGVyV2FsbGV0KHdhbGxldCkge1xuICAgIGNvbnN0IGNhbGxiYWNrID0gKHsgcmVnaXN0ZXIgfSkgPT4gcmVnaXN0ZXIod2FsbGV0KTtcbiAgICB0cnkge1xuICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgUmVnaXN0ZXJXYWxsZXRFdmVudChjYWxsYmFjaykpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignd2FsbGV0LXN0YW5kYXJkOnJlZ2lzdGVyLXdhbGxldCBldmVudCBjb3VsZCBub3QgYmUgZGlzcGF0Y2hlZFxcbicsIGVycm9yKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3dhbGxldC1zdGFuZGFyZDphcHAtcmVhZHknLCAoeyBkZXRhaWw6IGFwaSB9KSA9PiBjYWxsYmFjayhhcGkpKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ3dhbGxldC1zdGFuZGFyZDphcHAtcmVhZHkgZXZlbnQgbGlzdGVuZXIgY291bGQgbm90IGJlIGFkZGVkXFxuJywgZXJyb3IpO1xuICAgIH1cbn1cbmNsYXNzIFJlZ2lzdGVyV2FsbGV0RXZlbnQgZXh0ZW5kcyBFdmVudCB7XG4gICAgY29uc3RydWN0b3IoY2FsbGJhY2spIHtcbiAgICAgICAgc3VwZXIoJ3dhbGxldC1zdGFuZGFyZDpyZWdpc3Rlci13YWxsZXQnLCB7XG4gICAgICAgICAgICBidWJibGVzOiBmYWxzZSxcbiAgICAgICAgICAgIGNhbmNlbGFibGU6IGZhbHNlLFxuICAgICAgICAgICAgY29tcG9zZWQ6IGZhbHNlLFxuICAgICAgICB9KTtcbiAgICAgICAgX1JlZ2lzdGVyV2FsbGV0RXZlbnRfZGV0YWlsLnNldCh0aGlzLCB2b2lkIDApO1xuICAgICAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHRoaXMsIF9SZWdpc3RlcldhbGxldEV2ZW50X2RldGFpbCwgY2FsbGJhY2ssIFwiZlwiKTtcbiAgICB9XG4gICAgZ2V0IGRldGFpbCgpIHtcbiAgICAgICAgcmV0dXJuIF9fY2xhc3NQcml2YXRlRmllbGRHZXQodGhpcywgX1JlZ2lzdGVyV2FsbGV0RXZlbnRfZGV0YWlsLCBcImZcIik7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gJ3dhbGxldC1zdGFuZGFyZDpyZWdpc3Rlci13YWxsZXQnO1xuICAgIH1cbiAgICAvKiogQGRlcHJlY2F0ZWQgKi9cbiAgICBwcmV2ZW50RGVmYXVsdCgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwcmV2ZW50RGVmYXVsdCBjYW5ub3QgYmUgY2FsbGVkJyk7XG4gICAgfVxuICAgIC8qKiBAZGVwcmVjYXRlZCAqL1xuICAgIHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24gY2Fubm90IGJlIGNhbGxlZCcpO1xuICAgIH1cbiAgICAvKiogQGRlcHJlY2F0ZWQgKi9cbiAgICBzdG9wUHJvcGFnYXRpb24oKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignc3RvcFByb3BhZ2F0aW9uIGNhbm5vdCBiZSBjYWxsZWQnKTtcbiAgICB9XG59XG5fUmVnaXN0ZXJXYWxsZXRFdmVudF9kZXRhaWwgPSBuZXcgV2Vha01hcCgpO1xuXG4odW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KSB8fCBmdW5jdGlvbiAocmVjZWl2ZXIsIHN0YXRlLCB2YWx1ZSwga2luZCwgZikge1xuICAgIGlmIChraW5kID09PSBcIm1cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgbWV0aG9kIGlzIG5vdCB3cml0YWJsZVwiKTtcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBzZXR0ZXJcIik7XG4gICAgaWYgKHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgIT09IHN0YXRlIHx8ICFmIDogIXN0YXRlLmhhcyhyZWNlaXZlcikpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3Qgd3JpdGUgcHJpdmF0ZSBtZW1iZXIgdG8gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcbiAgICByZXR1cm4gKGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyLCB2YWx1ZSkgOiBmID8gZi52YWx1ZSA9IHZhbHVlIDogc3RhdGUuc2V0KHJlY2VpdmVyLCB2YWx1ZSkpLCB2YWx1ZTtcbn07XG4odW5kZWZpbmVkICYmIHVuZGVmaW5lZC5fX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KSB8fCBmdW5jdGlvbiAocmVjZWl2ZXIsIHN0YXRlLCBraW5kLCBmKSB7XG4gICAgaWYgKGtpbmQgPT09IFwiYVwiICYmICFmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJpdmF0ZSBhY2Nlc3NvciB3YXMgZGVmaW5lZCB3aXRob3V0IGEgZ2V0dGVyXCIpO1xuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHJlYWQgcHJpdmF0ZSBtZW1iZXIgZnJvbSBhbiBvYmplY3Qgd2hvc2UgY2xhc3MgZGlkIG5vdCBkZWNsYXJlIGl0XCIpO1xuICAgIHJldHVybiBraW5kID09PSBcIm1cIiA/IGYgOiBraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlcikgOiBmID8gZi52YWx1ZSA6IHN0YXRlLmdldChyZWNlaXZlcik7XG59O1xuXG5mdW5jdGlvbiBnZXRJc0xvY2FsQXNzb2NpYXRpb25TdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICB3aW5kb3cuaXNTZWN1cmVDb250ZXh0ICYmXG4gICAgICAgIHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgL2FuZHJvaWQvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKTtcbn1cbmZ1bmN0aW9uIGdldElzUmVtb3RlQXNzb2NpYXRpb25TdXBwb3J0ZWQoKSB7XG4gICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICB3aW5kb3cuaXNTZWN1cmVDb250ZXh0ICYmXG4gICAgICAgIHR5cGVvZiBkb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgIS9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSk7XG59XG5cbmZ1bmN0aW9uIHJlZ2lzdGVyTXdhKGNvbmZpZykge1xuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjb25zb2xlLndhcm4oYE1XQSBub3QgcmVnaXN0ZXJlZDogbm8gd2luZG93IG9iamVjdGApO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghd2luZG93LmlzU2VjdXJlQ29udGV4dCkge1xuICAgICAgICBjb25zb2xlLndhcm4oYE1XQSBub3QgcmVnaXN0ZXJlZDogc2VjdXJlIGNvbnRleHQgcmVxdWlyZWQgKGh0dHBzKWApO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChnZXRJc0xvY2FsQXNzb2NpYXRpb25TdXBwb3J0ZWQoKSkge1xuICAgICAgICByZWdpc3RlcldhbGxldChuZXcgTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0KGNvbmZpZykpO1xuICAgIH1cbiAgICBlbHNlIGlmIChnZXRJc1JlbW90ZUFzc29jaWF0aW9uU3VwcG9ydGVkKCkgJiYgY29uZmlnLnJlbW90ZUhvc3RBdXRob3JpdHkgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZWdpc3RlcldhbGxldChuZXcgUmVtb3RlU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZyksIHsgcmVtb3RlSG9zdEF1dGhvcml0eTogY29uZmlnLnJlbW90ZUhvc3RBdXRob3JpdHkgfSkpKTtcbiAgICB9XG4gICAgZWxzZSA7XG59XG5cbmNvbnN0IFdBTExFVF9OT1RfRk9VTkRfRVJST1JfTUVTU0FHRSA9ICdUbyB1c2UgbW9iaWxlIHdhbGxldCBhZGFwdGVyLCB5b3UgbXVzdCBoYXZlIGEgY29tcGF0aWJsZSBtb2JpbGUgd2FsbGV0IGFwcGxpY2F0aW9uIGluc3RhbGxlZCBvbiB5b3VyIGRldmljZS4nO1xuY29uc3QgQlJPV1NFUl9OT1RfU1VQUE9SVEVEX0VSUk9SX01FU1NBR0UgPSAnVGhpcyBicm93c2VyIGFwcGVhcnMgdG8gYmUgaW5jb21wYXRpYmxlIHdpdGggbW9iaWxlIHdhbGxldCBhZGFwdGVyLiBPcGVuIHRoaXMgcGFnZSBpbiBhIGNvbXBhdGlibGUgbW9iaWxlIGJyb3dzZXIgYXBwIGFuZCB0cnkgYWdhaW4uJztcbmNsYXNzIEVycm9yTW9kYWwgZXh0ZW5kcyBFbWJlZGRlZE1vZGFsIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5jb250ZW50U3R5bGVzID0gY3NzO1xuICAgICAgICB0aGlzLmNvbnRlbnRIdG1sID0gRXJyb3JEaWFsb2dIdG1sO1xuICAgIH1cbiAgICBpbml0V2l0aEVycm9yKGVycm9yKSB7XG4gICAgICAgIHN1cGVyLmluaXQoKTtcbiAgICAgICAgdGhpcy5wb3B1bGF0ZUVycm9yKGVycm9yKTtcbiAgICB9XG4gICAgcG9wdWxhdGVFcnJvcihlcnJvcikge1xuICAgICAgICB2YXIgX2EsIF9iO1xuICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gKF9hID0gdGhpcy5kb20pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXRFbGVtZW50QnlJZCgnbW9iaWxlLXdhbGxldC1hZGFwdGVyLWVycm9yLW1lc3NhZ2UnKTtcbiAgICAgICAgY29uc3QgYWN0aW9uQnRuID0gKF9iID0gdGhpcy5kb20pID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5nZXRFbGVtZW50QnlJZCgnbW9iaWxlLXdhbGxldC1hZGFwdGVyLWVycm9yLWFjdGlvbicpO1xuICAgICAgICBpZiAoZXJyb3JNZXNzYWdlRWxlbWVudCkge1xuICAgICAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyRXJyb3InKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChlcnJvci5jb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0VSUk9SX1dBTExFVF9OT1RfRk9VTkQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlRWxlbWVudC5pbm5lckhUTUwgPSBXQUxMRVRfTk9UX0ZPVU5EX0VSUk9SX01FU1NBR0U7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWN0aW9uQnRuKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnaHR0cHM6Ly9zb2xhbmFtb2JpbGUuY29tL3dhbGxldHMnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdFUlJPUl9CUk9XU0VSX05PVF9TVVBQT1JURUQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3JNZXNzYWdlRWxlbWVudC5pbm5lckhUTUwgPSBCUk9XU0VSX05PVF9TVVBQT1JURURfRVJST1JfTUVTU0FHRTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhY3Rpb25CdG4pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uQnRuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXJyb3JNZXNzYWdlRWxlbWVudC5pbm5lckhUTUwgPSBgQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZDogJHtlcnJvci5tZXNzYWdlfWA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGxvY2F0ZSBlcnJvciBkaWFsb2cgZWxlbWVudCcpO1xuICAgICAgICB9XG4gICAgfVxufVxuY29uc3QgRXJyb3JEaWFsb2dIdG1sID0gYFxuPHN2ZyBjbGFzcz1cIm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1lcnJvci1pY29uXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGhlaWdodD1cIjUwcHhcIiB2aWV3Qm94PVwiMCAtOTYwIDk2MCA5NjBcIiB3aWR0aD1cIjUwcHhcIiBmaWxsPVwiIzAwMDAwMFwiPjxwYXRoIGQ9XCJNIDI4MCwtODAgUSAxOTcsLTgwIDEzOC41LC0xMzguNSA4MCwtMTk3IDgwLC0yODAgODAsLTM2MyAxMzguNSwtNDIxLjUgMTk3LC00ODAgMjgwLC00ODAgcSA4MywwIDE0MS41LDU4LjUgNTguNSw1OC41IDU4LjUsMTQxLjUgMCw4MyAtNTguNSwxNDEuNSBRIDM2MywtODAgMjgwLC04MCBaIE0gODI0LC0xMjAgNTY4LC0zNzYgUSA1NTYsLTM4OSA1NDIuNSwtNDAyLjUgNTI5LC00MTYgNTE2LC00MjggcSAzOCwtMjQgNjEsLTY0IDIzLC00MCAyMywtODggMCwtNzUgLTUyLjUsLTEyNy41IFEgNDk1LC03NjAgNDIwLC03NjAgMzQ1LC03NjAgMjkyLjUsLTcwNy41IDI0MCwtNjU1IDI0MCwtNTgwIHEgMCw2IDAuNSwxMS41IDAuNSw1LjUgMS41LDExLjUgLTE4LDIgLTM5LjUsOCAtMjEuNSw2IC0zOC41LDE0IC0yLC0xMSAtMywtMjIgLTEsLTExIC0xLC0yMyAwLC0xMDkgNzUuNSwtMTg0LjUgUSAzMTEsLTg0MCA0MjAsLTg0MCBxIDEwOSwwIDE4NC41LDc1LjUgNzUuNSw3NS41IDc1LjUsMTg0LjUgMCw0MyAtMTMuNSw4MS41IFEgNjUzLC00NjAgNjI5LC00MjggbCAyNTEsMjUyIHogbSAtNjE1LC02MSA3MSwtNzEgNzAsNzEgMjksLTI4IC03MSwtNzEgNzEsLTcxIC0yOCwtMjggLTcxLDcxIC03MSwtNzEgLTI4LDI4IDcxLDcxIC03MSw3MSB6XCIvPjwvc3ZnPlxuPGRpdiBjbGFzcz1cIm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC10aXRsZVwiPldlIGNhbid0IGZpbmQgYSB3YWxsZXQuPC9kaXY+XG48ZGl2IGlkPVwibW9iaWxlLXdhbGxldC1hZGFwdGVyLWVycm9yLW1lc3NhZ2VcIiBjbGFzcz1cIm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1zdWJ0aXRsZVwiPjwvZGl2PlxuPGRpdj5cbiAgICA8YnV0dG9uIGRhdGEtZXJyb3ItYWN0aW9uIGlkPVwibW9iaWxlLXdhbGxldC1hZGFwdGVyLWVycm9yLWFjdGlvblwiIGNsYXNzPVwibW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLWVycm9yLWFjdGlvblwiPlxuICAgICAgICBGaW5kIGEgd2FsbGV0XG4gICAgPC9idXR0b24+XG48L2Rpdj5cbmA7XG5jb25zdCBjc3MgPSBgXG4ubW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLWNvbnRlbnQge1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cblxuLm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1lcnJvci1pY29uIHtcbiAgICBtYXJnaW4tdG9wOiAyNHB4O1xufVxuXG4ubW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLXRpdGxlIHtcbiAgICBtYXJnaW46IDE4cHggMTAwcHggYXV0byAxMDBweDtcbiAgICBjb2xvcjogIzAwMDAwMDtcbiAgICBmb250LXNpemU6IDIuNzVlbTtcbiAgICBmb250LXdlaWdodDogNjAwO1xufVxuXG4ubW9iaWxlLXdhbGxldC1hZGFwdGVyLWVtYmVkZGVkLW1vZGFsLXN1YnRpdGxlIHtcbiAgICBtYXJnaW46IDMwcHggNjBweCA0MHB4IDYwcHg7XG4gICAgY29sb3I6ICMwMDAwMDA7XG4gICAgZm9udC1zaXplOiAxLjI1ZW07XG4gICAgZm9udC13ZWlnaHQ6IDQwMDtcbn1cblxuLm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC1lcnJvci1hY3Rpb24ge1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGhlaWdodDogNTZweDtcbiAgICAvKm1hcmdpbi10b3A6IDQwcHg7Ki9cbiAgICBmb250LXNpemU6IDEuMjVlbTtcbiAgICAvKmxpbmUtaGVpZ2h0OiAyNHB4OyovXG4gICAgLypsZXR0ZXItc3BhY2luZzogLTElOyovXG4gICAgYmFja2dyb3VuZDogIzAwMDAwMDtcbiAgICBjb2xvcjogI0ZGRkZGRjtcbiAgICBib3JkZXItcmFkaXVzOiAxOHB4O1xufVxuXG4vKiBTbWFsbGVyIHNjcmVlbnMgKi9cbkBtZWRpYSBhbGwgYW5kIChtYXgtd2lkdGg6IDYwMHB4KSB7XG4gICAgLm1vYmlsZS13YWxsZXQtYWRhcHRlci1lbWJlZGRlZC1tb2RhbC10aXRsZSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMS41ZW07XG4gICAgICAgIG1hcmdpbi1yaWdodDogMTJweDtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDEycHg7XG4gICAgfVxuICAgIC5tb2JpbGUtd2FsbGV0LWFkYXB0ZXItZW1iZWRkZWQtbW9kYWwtc3VidGl0bGUge1xuICAgICAgICBtYXJnaW4tcmlnaHQ6IDEycHg7XG4gICAgICAgIG1hcmdpbi1sZWZ0OiAxMnB4O1xuICAgIH1cbn1cbmA7XG5cbmZ1bmN0aW9uIGRlZmF1bHRFcnJvck1vZGFsV2FsbGV0Tm90Rm91bmRIYW5kbGVyKCkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgY29uc3QgdXNlckFnZW50ID0gd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIGNvbnN0IGVycm9yRGlhbG9nID0gbmV3IEVycm9yTW9kYWwoKTtcbiAgICAgICAgICAgIGlmICh1c2VyQWdlbnQuaW5jbHVkZXMoJ3d2JykpIHsgLy8gQW5kcm9pZCBXZWJWaWV3XG4gICAgICAgICAgICAgICAgLy8gTVdBIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyIHNvIHdlIGluZm9ybSB0aGUgdXNlclxuICAgICAgICAgICAgICAgIC8vIGVycm9yRGlhbG9nLmluaXRXaXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgLy8gICAgIG5ldyBTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyRXJyb3IoXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyRXJyb3JDb2RlLkVSUk9SX0JST1dTRVJfTk9UX1NVUFBPUlRFRCwgXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAnJ1xuICAgICAgICAgICAgICAgIC8vICAgICApXG4gICAgICAgICAgICAgICAgLy8gKTtcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBpbnZlc3RpZ2F0ZSB3aHkgaW5zdGFudGlhdGluZyBhIG5ldyBTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyRXJyb3IgaGVyZSBicmVha3MgdHJlZXNoYWtpbmcgXG4gICAgICAgICAgICAgICAgZXJyb3JEaWFsb2cuaW5pdFdpdGhFcnJvcih7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyRXJyb3InLFxuICAgICAgICAgICAgICAgICAgICBjb2RlOiAnRVJST1JfQlJPV1NFUl9OT1RfU1VQUE9SVEVEJyxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJydcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgeyAvLyBCcm93c2VyLCB1c2VyIGRvZXMgbm90IGhhdmUgYSB3YWxsZXQgaW5zdGFsbGVkLlxuICAgICAgICAgICAgICAgIC8vIGVycm9yRGlhbG9nLmluaXRXaXRoRXJyb3IoXG4gICAgICAgICAgICAgICAgLy8gICAgIG5ldyBTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyRXJyb3IoXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyRXJyb3JDb2RlLkVSUk9SX1dBTExFVF9OT1RfRk9VTkQsIFxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgJydcbiAgICAgICAgICAgICAgICAvLyAgICAgKVxuICAgICAgICAgICAgICAgIC8vICk7XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogaW52ZXN0aWdhdGUgd2h5IGluc3RhbnRpYXRpbmcgYSBuZXcgU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlckVycm9yIGhlcmUgYnJlYWtzIHRyZWVzaGFraW5nIFxuICAgICAgICAgICAgICAgIGVycm9yRGlhbG9nLmluaXRXaXRoRXJyb3Ioe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlckVycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgY29kZTogJ0VSUk9SX1dBTExFVF9OT1RfRk9VTkQnLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXJyb3JEaWFsb2cub3BlbigpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5mdW5jdGlvbiBjcmVhdGVEZWZhdWx0V2FsbGV0Tm90Rm91bmRIYW5kbGVyKCkge1xuICAgIHJldHVybiAoKSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7IGRlZmF1bHRFcnJvck1vZGFsV2FsbGV0Tm90Rm91bmRIYW5kbGVyKCk7IH0pO1xufVxuXG5jb25zdCBDQUNIRV9LRVkgPSAnU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlckRlZmF1bHRBdXRob3JpemF0aW9uQ2FjaGUnO1xuZnVuY3Rpb24gY3JlYXRlRGVmYXVsdEF1dGhvcml6YXRpb25DYWNoZSgpIHtcbiAgICBsZXQgc3RvcmFnZTtcbiAgICB0cnkge1xuICAgICAgICBzdG9yYWdlID0gd2luZG93LmxvY2FsU3RvcmFnZTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWVtcHR5XG4gICAgfVxuICAgIGNhdGNoIChfYSkgeyB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY2xlYXIoKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGlmICghc3RvcmFnZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHN0b3JhZ2UucmVtb3ZlSXRlbShDQUNIRV9LRVkpO1xuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZW1wdHlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKF9hKSB7IH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkge1xuICAgICAgICAgICAgICAgIGlmICghc3RvcmFnZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2Uoc3RvcmFnZS5nZXRJdGVtKENBQ0hFX0tFWSkpO1xuICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkICYmIHBhcnNlZC5hY2NvdW50cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkQWNjb3VudHMgPSBwYXJzZWQuYWNjb3VudHMubWFwKChhY2NvdW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgYWNjb3VudCksIHsgcHVibGljS2V5OiAncHVibGljS2V5JyBpbiBhY2NvdW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IG5ldyBVaW50OEFycmF5KE9iamVjdC52YWx1ZXMoYWNjb3VudC5wdWJsaWNLZXkpKSAvLyBSZWJ1aWxkIHB1YmxpY0tleSBmb3IgV2FsbGV0QWNjb3VudFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBiYXNlNTguZGVjb2RlKGFjY291bnQuYWRkcmVzcykgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHBhcnNlZCksIHsgYWNjb3VudHM6IHBhcnNlZEFjY291bnRzIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXJzZWQgfHwgdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tZW1wdHlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKF9hKSB7IH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBzZXQoYXV0aG9yaXphdGlvbikge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXN0b3JhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBzdG9yYWdlLnNldEl0ZW0oQ0FDSEVfS0VZLCBKU09OLnN0cmluZ2lmeShhdXRob3JpemF0aW9uKSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1lbXB0eVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoX2EpIHsgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRGVmYXVsdENoYWluU2VsZWN0b3IoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2VsZWN0KGNoYWlucykge1xuICAgICAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2hhaW5zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2hhaW5zWzBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjaGFpbnMuaW5jbHVkZXMoU09MQU5BX01BSU5ORVRfQ0hBSU4pKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBTT0xBTkFfTUFJTk5FVF9DSEFJTjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2hhaW5zWzBdO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgfTtcbn1cblxuZXhwb3J0IHsgTG9jYWxTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0LCBSZW1vdGVTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyV2FsbGV0LCBTb2xhbmFNb2JpbGVXYWxsZXRBZGFwdGVyUmVtb3RlV2FsbGV0TmFtZSwgU29sYW5hTW9iaWxlV2FsbGV0QWRhcHRlcldhbGxldE5hbWUsIGNyZWF0ZURlZmF1bHRBdXRob3JpemF0aW9uQ2FjaGUsIGNyZWF0ZURlZmF1bHRDaGFpblNlbGVjdG9yLCBjcmVhdGVEZWZhdWx0V2FsbGV0Tm90Rm91bmRIYW5kbGVyLCBkZWZhdWx0RXJyb3JNb2RhbFdhbGxldE5vdEZvdW5kSGFuZGxlciwgcmVnaXN0ZXJNd2EgfTtcbiJdLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOlswXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@solana-mobile+wallet-standard-mobile@0.4.3_@solana+wallet-adapter-base@0.9.27_@solana+_2ad14e9b2dc4e821dfae321f0eb6a4a9/node_modules/@solana-mobile/wallet-standard-mobile/lib/esm/index.js\n");

/***/ })

};
;